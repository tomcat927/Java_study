# ğŸ’§å¤‡æˆ˜é‡‘ä¸‰é“¶å››-é¢è¯•é¢˜å¤§å…¨

# <font style="color:#ECAA04;">JDKã€JREã€JVM ä¸‰è€…ä¹‹é—´çš„å…³ç³»ï¼Ÿ</font>
+ **<font style="color:#DF2A3F;">JDKï¼ˆ java development kitï¼‰ï¼š</font>****javaå¼€å‘å·¥å…·åŒ…ï¼Œç”¨æ¥å¼€å‘Javaç¨‹åºçš„ï¼Œ****<font style="color:#74B602;">é’ˆå¯¹javaå¼€å‘è€…</font>****ã€‚**
+ **<font style="color:#DF2A3F;">JREï¼ˆjava runtime environmentï¼‰ï¼š</font>****javaè¿è¡Œæ—¶ç¯å¢ƒï¼Œ****<font style="color:#74B602;">é’ˆå¯¹javaç”¨æˆ·</font>****ã€‚**
+ **<font style="color:#DF2A3F;">JVMï¼ˆjava virtual machineï¼‰ï¼š</font>****javaè™šæ‹Ÿæœºç”¨æ¥****<font style="color:#74B602;">è§£é‡Šæ‰§è¡Œå­—èŠ‚ç æ–‡ä»¶</font>****(classæ–‡ä»¶)çš„ã€‚**

![1688730807079-8f7b10b1-02d5-4e0e-a8fe-1514b7c94bb6.png](./img/hATw4O-knQXenPBo/1688730807079-8f7b10b1-02d5-4e0e-a8fe-1514b7c94bb6-123808.png)

# <font style="color:#ECAA04;">Java ä¸­åˆ›å»ºå¯¹è±¡çš„å‡ ç§æ–¹å¼ï¼Ÿ</font>
**<font style="color:#DF2A3F;">ä½¿ç”¨ new å…³é”®å­—ï¼š</font>****æœ€å¸¸è§çš„æ–¹å¼ï¼Œè¿™ç§æ–¹å¼æˆ‘ä»¬è¿˜å¯ä»¥****<font style="color:#74B602;">è°ƒç”¨ä»»æ„çš„æ„é€ å™¨</font>****ï¼ˆæ— å‚çš„å’Œæœ‰å‚çš„ï¼‰ã€‚**

**<font style="color:#DF2A3F;">ä½¿ç”¨Class.newInstanceï¼š</font>****é€šè¿‡ ****<font style="color:rgb(51, 51, 51);">Classç±»çš„newInstance</font>****åˆ›å»ºå¯¹è±¡ï¼Œ****<font style="color:#74B602;">å¿…é¡»æœ‰publicçš„æ— å‚æ„é€ å™¨</font>****æ‰è¡Œã€‚**

**<font style="color:#DF2A3F;">ä½¿ç”¨Constructor.newInstanceï¼š</font>****é€šè¿‡ java.lang.relect.Constructorç±»ä¸­çš„newInstanceæ–¹æ³•è°ƒç”¨****<font style="color:#74B602;">æœ‰å‚æ•°çš„å’Œç§æœ‰çš„</font>****æ„é€ å‡½æ•°ã€‚**

**<font style="color:#DF2A3F;">ä½¿ç”¨Cloneï¼š</font>****é€šè¿‡å¯¹è±¡çš„ clone() æ–¹æ³•åˆ›å»ºä¸€ä¸ªå¯¹è±¡çš„å‰¯æœ¬ã€‚éœ€è¦å¯¹è±¡****<font style="color:#74B602;">å®ç°Cloneableæ¥å£å¹¶é‡å†™ clone()</font>****æ–¹æ³•ã€‚**

**<font style="color:#DF2A3F;">ä½¿ç”¨ååºåˆ—åŒ–ï¼š</font>****é€šè¿‡å°†å¯¹è±¡è½¬æ¢ä¸ºå­—èŠ‚æµå¹¶ä¿å­˜åˆ°æ–‡ä»¶æˆ–ä¼ è¾“åˆ°ç½‘ç»œï¼Œç„¶åå†ä»å­—èŠ‚æµä¸­é‡æ–°åˆ›å»ºå¯¹è±¡ã€‚éœ€è¦å¯¹è±¡****<font style="color:#74B602;">å®ç°Serializable</font>**

```java
package polo;

import java.io.Serializable;

/**
 * 1.ä½¿ç”¨cloneåˆ›å»ºå¯¹è±¡æ—¶ï¼Œéœ€å®ç°Cloneableæ¥å£å¹¶é‡å†™cloneæ–¹æ³•
 *        è®¿é—®æƒé™ç”±protectedæ”¹å†™ä¸ºpublicï¼Œå¹¶ä¸”è¿”å›å€¼å†™ä¸ºperson
 *
 * 2.ä½¿ç”¨ååºåˆ—åŒ–åˆ›å»ºå¯¹è±¡æ—¶ï¼Œéœ€å®ç°Serializableæ¥å£
 */
public class User implements Cloneable, Serializable {
    private static final long serialVersionUID = -303793456610254190L;
    
    private int id;
    private String username;
    private String email;

    public User() {
    }

    public User(int id, String username, String email) {
        this.id = id;
        this.username = username;
        this.email = email;
    }
    
    // Getters and Setters
    public int getId() {
        return id;
    }

    public void setId(int id) {
        this.id = id;
    }

    public String getUsername() {
        return username;
    }

    public void setUsername(String username) {
        this.username = username;
    }

    public String getEmail() {
        return email;
    }

    public void setEmail(String email) {
        this.email = email;
    }
    
    // toString() method
    @Override
    public String toString() {
        return "User [id=" + id + ", username=" + username + ", email=" + email + "]";
    }

    /**
     * è®¿é—®æƒé™ç”±protectedæ”¹å†™ä¸ºpublicï¼Œå¹¶ä¸”è¿”å›å€¼å†™ä¸ºUser
     * @return
     * @throws CloneNotSupportedException
     */
    @Override
    public User clone() throws CloneNotSupportedException {
        return (User)super.clone();
    }
}
```

```java
import org.junit.Test;
import org.springframework.util.SerializationUtils;
import polo.User;

import java.lang.reflect.Constructor;

/**
 * @author ç™¾é‡Œ
 */
public class BaiLiDemo {

    /**
     * ä½¿ç”¨ new å…³é”®å­—
     */
    @Test
    public void createDemo1() {
        User user = new User();
        User user1 = new User(1, "baili", "baili.com");
        System.out.println(user);
        System.out.println(user1);
    }

    /**
     * ä½¿ç”¨Class.newInstance
     *
     * @throws Exception
     */
    @Test
    public void createDemo2() throws Exception {
        User user = User.class.newInstance();
        System.out.println(user);//User [id=0, username=null, email=null]
    }

    /**
     * ä½¿ç”¨Constructor.newInstance
     *
     * @throws Exception
     */
    @Test
    public void createDemo3() throws Exception {
        // åŒ…æ‹¬publicçš„å’Œépublicçš„ï¼Œå½“ç„¶ä¹ŸåŒ…æ‹¬privateçš„
        Constructor<?>[] declaredClasses = User.class.getDeclaredConstructors();

        // åªè¿”å›publicçš„~~~~~~(è¿”å›ç»“æœæ˜¯ä¸Šé¢çš„å­é›†)
        Constructor<?>[] constructors = User.class.getConstructors();

        Constructor<?> noArgsConstructor = declaredClasses[0];
        Constructor<?> haveArgsConstructor = declaredClasses[1];

        noArgsConstructor.setAccessible(true); // épublicçš„æ„é€ å¿…é¡»è®¾ç½®trueæ‰èƒ½ç”¨äºåˆ›å»ºå®ä¾‹
        Object o = noArgsConstructor.newInstance();
        Object o1 = haveArgsConstructor.newInstance(1, "baili", "baili.com");

        System.out.println(o);
        System.out.println(o1);
    }

    /**
     * ä½¿ç”¨Clone
     *
     * @throws CloneNotSupportedException
     */
     @Test
    public void createDemo4() throws CloneNotSupportedException {
        User user = new User(1, "baili", "baili.com");
        User clone = user.clone();

        System.out.println(user);
        System.out.println(clone);
        System.out.println(user == clone);
    }

    /**
     * ä½¿ç”¨ååºåˆ—åŒ–
     */
    @Test
    public void createDemo5() {
        User user = new User(1, "baili", "baili.com");
        byte[] bytes = SerializationUtils.serialize(user);

        // å­—èŠ‚æ•°ç»„ï¼šå¯ä»¥æ¥è‡ªç½‘ç»œã€å¯ä»¥æ¥è‡ªæ–‡ä»¶ï¼ˆæœ¬å¤„ç›´æ¥æœ¬åœ°æ¨¡æ‹Ÿï¼‰
        Object deserialize = SerializationUtils.deserialize(bytes);
        System.out.println(user);
        System.out.println(deserialize);
        System.out.println(user == deserialize);
    }
}
```

# <font style="color:#ECAA04;">finalã€finallyã€finalize çš„åŒºåˆ«</font>
+ **<font style="color:#DF2A3F;">final å…³é”®å­—ï¼šç”¨äºä¿®é¥°ç±»ã€æ–¹æ³•ã€å˜é‡ã€å…¥å‚å’Œå¯¹è±¡</font>**
        * **åº”ç”¨äº****<font style="color:#74B602;">ç±»</font>****æ—¶ï¼Œè¡¨ç¤ºè¯¥ç±»æ˜¯æœ€ç»ˆç±»ï¼Œ****<font style="color:#74B602;">ä¸èƒ½è¢«</font>****å…¶ä»–ç±»****<font style="color:#74B602;">ç»§æ‰¿</font>****ã€‚**
        * **åº”ç”¨äº****<font style="color:#74B602;">æ–¹æ³•</font>****æ—¶ï¼Œè¡¨ç¤ºè¯¥æ–¹æ³•æ˜¯æœ€ç»ˆæ–¹æ³•ï¼Œ****<font style="color:#74B602;">ä¸èƒ½è¢«</font>****å­ç±»****<font style="color:#74B602;">é‡å†™</font>****ã€‚**
        * **åº”ç”¨äº****<font style="color:#74B602;">å˜é‡</font>****æ—¶ï¼Œè¡¨ç¤ºè¯¥å˜é‡æ˜¯ä¸€ä¸ªå¸¸é‡ï¼Œ****<font style="color:#74B602;">åªèƒ½èµ‹å€¼ä¸€æ¬¡</font>****ã€‚**
        * **åº”ç”¨äº****<font style="color:#74B602;">å…¥å‚</font>****æ—¶ï¼Œè¡¨ç¤ºè¯¥å…¥å‚åœ¨****<font style="color:#74B602;">æ–¹æ³•å†…æ— æ³•è¢«ä¿®æ”¹</font>****ã€‚**
        * **åº”ç”¨äº****<font style="color:#74B602;">å¯¹è±¡</font>****æ—¶ï¼Œè¯¥å¯¹è±¡çš„****<font style="color:#74B602;">å¼•ç”¨ä¸èƒ½è¢«ä¿®æ”¹</font>****ï¼Œä½†å¯¹è±¡æœ¬èº«çš„çŠ¶æ€æ˜¯å¯å˜çš„ã€‚**
+ **<font style="color:#DF2A3F;">finally å…³é”®å­—ï¼šå¼‚å¸¸å¤„ç†æœºåˆ¶ä¸­çš„ä¸€éƒ¨åˆ†ï¼Œç”¨äºå®šä¹‰åœ¨ try-catch-finally å—ä¸­çš„ finally å—</font>**
        * **ä¸è®ºæ˜¯å¦å‘ç”Ÿå¼‚å¸¸ï¼Œfinally å—ä¸­çš„ä»£ç éƒ½ä¼šæ‰§è¡Œã€‚**
        * **ä¸»è¦ç”¨äºé‡Šæ”¾èµ„æºã€å…³é—­è¿æ¥ç­‰å¿…é¡»ç¡®ä¿æ‰§è¡Œçš„æ“ä½œã€‚**
+ **<font style="color:#DF2A3F;">finalize æ–¹æ³•ï¼šæ˜¯ä¸€ä¸ªå¯¹è±¡çš„æ–¹æ³•ï¼Œå®šä¹‰åœ¨ Object ç±»ä¸­</font>**
        * **åœ¨åƒåœ¾å›æ”¶å™¨å°†å¯¹è±¡å›æ”¶ä¹‹å‰è°ƒç”¨ã€‚**
        * **å¯ä»¥é‡å†™ finalize æ–¹æ³•ï¼Œåœ¨å…¶ä¸­ç¼–å†™å¯¹è±¡åœ¨è¢«å›æ”¶å‰éœ€è¦è¿›è¡Œçš„æ¸…ç†æ“ä½œï¼Œå¦‚é‡Šæ”¾èµ„æºç­‰ã€‚**
        * **<font style="color:#2F4BDA;">è¯·æ³¨æ„</font>****ï¼Œä¸æ¨èä½¿ç”¨ finalize æ–¹æ³•è¿›è¡Œå†…å­˜èµ„æºçš„é‡Šæ”¾ï¼Œå› ä¸ºå®ƒæ²¡æœ‰è¢«åŠæ—¶æ‰§è¡Œçš„ä¿è¯ï¼Œä¹Ÿå¯èƒ½å¯¼è‡´æ€§èƒ½é—®é¢˜**

```java
import org.junit.Test;

/**
 * @author ç™¾é‡Œ
 */
public final class BaiLiTest {
    final int a = 0;  //finalä¿®é¥°å˜é‡

    /**
     * finally ä¸try-catché…åˆä½¿ç”¨
     * final ä¿®é¥°å…¥å‚
     * @param num1
     * @param num2
     */
    public void divideNumbers(int num1, final int num2) {
        try {
            int result = num1 / num2;
            System.out.println("Result: " + result);
        } catch (ArithmeticException e) {
            System.out.println("Divide by zero exception!");
        } finally {
            System.out.println("Finally block executed.");
        }
    }

    /**
     * finallyæµ‹è¯•æ–¹æ³•
     * åˆ©ç”¨finalä¿®é¥°çš„å˜é‡
     */
    public void finallyTest() {
        //a = 1; //æ— æ³•é‡æ–°èµ‹å€¼ï¼Œä¼šæç¤ºå¼‚å¸¸ã€‚
        divideNumbers(10, a);
        System.out.println("-----å¯ä»¥è¿›è¡Œä¿®æ”¹æ•°æ®------------------------");
        divideNumbers(10, a + 1);
    }

    @Override
    protected void finalize() throws Throwable {
        //TODO:é‡Šæ”¾èµ„æºï¼Œç­‰å…¶ä»–æ“ä½œ
        super.finalize();
        System.out.println("è°ƒç”¨finalizeæ–¹æ³•åœ¨æ‰§è¡Œåƒåœ¾å›æ”¶");
    }

    /**
     * finalizeç”¨æ³•
     */
    public void finalizedTest() {
        BaiLiTest baiLiTest = new BaiLiTest();
        baiLiTest = null;
        System.gc();
    }
}


//finalä¿®é¥°çš„ç±»æ— æ³•è¢«å­ç±»ç»§æ‰¿
// public class BaiLiTest2 extends BaiLiTest {
    
// }
```

# <font style="color:#ECAA04;">== å’Œ equals çš„åŒºåˆ«ï¼Ÿ</font>
+ **<font style="color:#DF2A3F;">==ï¼š</font>****å¦‚æœä½œç”¨äº****<font style="color:#74B602;">åŸºæœ¬æ•°æ®ç±»å‹</font>****çš„å˜é‡ï¼Œåˆ™ç›´æ¥æ¯”è¾ƒå…¶å­˜å‚¨çš„****<font style="color:#74B602;">å€¼æ˜¯å¦ç›¸ç­‰</font>****ï¼›**

**    å¦‚æœä½œç”¨äº****<font style="color:#74B602;">å¼•ç”¨ç±»å‹</font>****çš„å˜é‡ï¼Œåˆ™æ¯”è¾ƒçš„æ˜¯æ‰€æŒ‡å‘çš„****<font style="color:#74B602;">å¯¹è±¡çš„åœ°å€æ˜¯å¦ç›¸ç­‰</font>****ã€‚**

+ **<font style="color:#DF2A3F;">equalsï¼š</font>****<font style="color:rgb(18, 18, 18);">æ¯”è¾ƒæ˜¯å¦æ˜¯åŒä¸€ä¸ªå¯¹è±¡ã€‚equals()æ–¹æ³•å­˜åœ¨äºObjectç±»ä¸­ï¼Œè€ŒObjectç±»æ˜¯æ‰€æœ‰ç±»çš„ç›´æ¥æˆ–é—´æ¥çˆ¶ç±»ï¼Œåœ¨</font>****<font style="color:#74B602;">æ²¡æœ‰é‡å†™equals()æ–¹æ³•çš„ç±»</font>****<font style="color:rgb(18, 18, 18);">ä¸­ï¼Œå’Œ==ä¸€æ ·æ¯”è¾ƒå¼•ç”¨ç±»å‹å˜é‡æ‰€æŒ‡å‘çš„</font>****<font style="color:#74B602;">å¯¹è±¡åœ°å€æ˜¯å¦ç›¸ç­‰</font>****<font style="color:rgb(18, 18, 18);">ã€‚</font>****<font style="color:#74B602;">é‡å†™equalsæ–¹æ³•å°±çœ‹å„ä¸ªç±»é‡å†™åçš„é€»è¾‘</font>****<font style="color:rgb(18, 18, 18);">ï¼Œæ¯”å¦‚Stringç±»ï¼Œ</font>****<font style="color:rgb(38, 38, 38);">è™½ç„¶æ˜¯å¼•ç”¨ç±»å‹ï¼Œä½†æ˜¯Stringç±»ä¸­é‡å†™äº†equalsæ–¹æ³•ï¼Œæ–¹æ³•å†…éƒ¨æ¯”è¾ƒçš„æ˜¯å­—ç¬¦ä¸²ä¸­çš„å„ä¸ªå­—ç¬¦æ˜¯å¦å…¨éƒ¨ç›¸ç­‰ã€‚</font>**

```java
public void compareDemo1 () {
    int x = 10;
    int y = 10;
    //æ¯”è¾ƒå€¼ç›¸ç­‰ï¼Œtrue
    System.out.println(x == y); // true

    String str1 = new String("baili");
    String str2 = new String("baili");
    //æ¯”è¾ƒå¯¹è±¡å†…å­˜åœ°å€ä¸ç›¸åŒï¼Œfalse
    System.out.println(str1 == str2); // false
    //æ¯”è¾ƒå­—ç¬¦ç›¸åŒï¼Œtrue
    System.out.println(str1.equals(str2)); // true

    String str3 = "abc";
    String str4 = "abc";
    //æ¯”è¾ƒå¯¹è±¡å†…å­˜åœ°å€ç›¸åŒï¼Œtrue
    System.out.println(str3 == str4); // true
}
```

# <font style="color:#ECAA04;">ä¸¤ä¸ªå¯¹è±¡çš„ hashCode() ç›¸åŒï¼Œåˆ™ equals() ä¹Ÿä¸€å®šä¸º true å—ï¼Ÿ</font>
+ **<font style="color:rgb(37, 41, 51);">ä¸¤ä¸ªå¯¹è±¡çš„</font>****<font style="color:#74B602;">hashCode()ç›¸åŒ</font>****<font style="color:rgb(37, 41, 51);">ï¼Œequals()</font>****<font style="color:#74B602;">ä¸ä¸€å®šä¸ºtrue</font>****<font style="color:rgb(37, 41, 51);">ï¼›</font>**
+ **<font style="color:rgb(37, 41, 51);">ä¸¤ä¸ªå¯¹è±¡çš„</font>****<font style="color:#74B602;">equalsä¸ºtrue</font>****<font style="color:rgb(37, 41, 51);">ï¼Œåˆ™ä¸¤ä¸ªå¯¹è±¡çš„</font>****<font style="color:#74B602;">hashcodeä¸€å®šä¸ºtrue</font>****<font style="color:rgb(37, 41, 51);">ï¼›</font>**

**<font style="color:#DF2A3F;">æ¡ˆä¾‹ï¼š</font>**

```java
@Test
public void hashDemo() {
    String str1 = "Ma";
    String str2 = "NB";
    System.out.println("hash1: " + str1.hashCode());
    System.out.println("hash2: " + str2.hashCode());
    System.out.println(str1.equals(str2));
}
```

**<font style="color:#DF2A3F;">åŸå› ï¼š</font>****æˆ‘ä»¬çœ‹ä¸‹hashcodeçš„è®¡ç®—æ–¹æ³•ï¼šhashcodeå…¶å®å°±æ˜¯å¯¹ä¸€ä¸ªå¯¹è±¡ä¸­çš„æ¯ä¸ªå…ƒç´ è¿›è¡Œä¸€æ¬¡è¿ç®—ç”Ÿæˆçš„ç»“æœå€¼ï¼Œä¸¤ä¸ªä¸åŒçš„å¯¹è±¡æ˜¯æœ‰å¯èƒ½å‡ºç°åŒä¸€ä¸ªhashå€¼çš„ã€‚**

```java
public int hashCode() {
    int h = hash;
    if (h == 0 && value.length > 0) {
        char val[] = value;
        for (int i = 0; i < value.length; i++) {
            h = 31 * h + val[i];
        }
        hash = h;
    }
    return h;
}
```

**è™½ç„¶ä¸¤ä¸ª****<font style="color:#74B602;">Maå’ŒNBä¸¤ä¸ªå­—ç¬¦ä¸²ä¸åŒ</font>****ï¼Œä½†æ˜¯ä»–ä»¬æœ‰****<font style="color:#74B602;">ç›¸åŒçš„hashcodeå€¼2484</font>****ã€‚**

**æ‰€ä»¥åœ¨****<font style="color:rgb(37, 41, 51);">åˆ›å»ºå®ä½“ç±»çš„æ—¶å€™å¦‚æœè¦ä½¿ç”¨hashCodeæ–¹æ³•æˆ–equalsæ–¹æ³•æ—¶éœ€è¦åœ¨å®ä½“ç±»ä¸­é‡å†™ï¼Œä»¥Userç±»ä¸ºä¾‹ï¼š</font>**

```java
@Override
public boolean equals(Object o) {
    if (this == o) return true;
    if (o == null || getClass() != o.getClass()) return false;
    User user = (User) o;
    return id == user.id && Objects.equals(username, user.username) && Objects.equals(email, user.email);
}

@Override
public int hashCode() {
    return Objects.hash(id, username, email);
}
```

# <font style="color:#ECAA04;">& å’Œ && ã€||å’Œ|çš„åŒºåˆ«ï¼Ÿ</font>
**<font style="color:#74B602;">&&ï¼šçŸ­è·¯ä¸</font>****ï¼›  ****<font style="color:#74B602;">&ï¼šé€»è¾‘ä¸</font>**

**&&å’Œ&éƒ½å¯ä»¥è¡¨ç¤ºé€»è¾‘ä¸ï¼Œä½†ä»–ä»¬æ˜¯æœ‰åŒºåˆ«çš„ã€‚**

+ **<font style="color:#DF2A3F;">å…±åŒç‚¹ï¼š</font>****ä»–ä»¬ä¸¤è¾¹çš„æ¡ä»¶éƒ½æˆç«‹çš„æ—¶å€™æœ€ç»ˆç»“æœæ‰æ˜¯trueï¼›**
+ **<font style="color:#DF2A3F;">ä¸åŒç‚¹ï¼š</font>****&&åªè¦ç¬¬ä¸€ä¸ªæ¡ä»¶ä¸æˆç«‹ï¼Œåé¢çš„æ¡ä»¶å°±ä¸å†åˆ¤æ–­ï¼Œè€Œ&åˆ¤æ–­çš„æ˜¯æ‰€æœ‰æ¡ä»¶**

```java
@Test
public void withNonDemo() {
    int i = 5;
    int j = 8;
    //if ((i == j) && (80 / 0 == 0)) {  //ä¸ä¼šæŠ¥é”™
    if ((i == j) & (80 / 0 == 0)) {   //å‡ºç° java.lang.ArithmeticException: / by zero
        System.out.println("1");
    } else {
        System.out.println("æ²¡æœ‰æŠ¥é”™");
    }
}
```

**<font style="color:#DF2A3F;">ä½¿ç”¨&&ï¼š</font>****ä¸ä¼šå‡ºç°é”™è¯¯ã€‚å› ä¸ºç¬¬ä¸€ä¸ªæ¡ä»¶ä¸æ»¡è¶³æ—¶ï¼Œç›´æ¥è¿”å›falseã€‚å¦‚æœç¬¬ä¸€ä¸ªæ¡ä»¶æ»¡è¶³æ‰ä¼šåˆ¤æ–­ç¬¬äºŒä¸ªæ¡ä»¶ã€‚**

**<font style="color:#DF2A3F;">ä½¿ç”¨&ï¼š</font>****å‡ºç°é”™è¯¯ã€‚åˆ¤æ–­æ‰€æœ‰æ¡ä»¶æ‰ä¼šè¿”å›ã€‚**

**<font style="color:#74B602;">||ï¼šçŸ­è·¯æˆ–    |ï¼šé€»è¾‘æˆ–</font>**

+ **<font style="color:#DF2A3F;">å…±åŒç‚¹ï¼š</font>****åªè¦ä¸¤ä¸ªåˆ¤æ–­æ¡ä»¶å…¶ä¸­æœ‰ä¸€ä¸ªæˆç«‹æœ€ç»ˆçš„ç»“æœå°±æ˜¯trueã€‚**
+ **<font style="color:#DF2A3F;">ä¸åŒç‚¹ï¼š</font>****||åªè¦æ»¡è¶³ç¬¬ä¸€ä¸ªæ¡ä»¶ï¼Œåé¢çš„æ¡ä»¶å°±ä¸å†åˆ¤æ–­ï¼Œè€Œ|è¦å¯¹æ‰€æœ‰çš„æ¡ä»¶è¿›è¡Œåˆ¤æ–­ã€‚**

```java
@Test
public void withNonDemo1() {
    int i = 5;
    int j = 5;
    if ((i == j) || (100 / 0 == 0)) {
    //if ((i == j) | (80 / 0 == 0)) {
        System.out.println("1");
    } else {
        System.out.println("æ²¡æœ‰æŠ¥é”™");
    }
}
```

**<font style="color:#DF2A3F;">ä½¿ç”¨||ï¼š</font>****ä¸ä¼šå‡ºç°é”™è¯¯ï¼Œç¬¬ä¸€ä¸ªæ¡ä»¶æ»¡è¶³ç›´æ¥è¿”å›ã€‚**

**<font style="color:#DF2A3F;">ä½¿ç”¨|ï¼š</font>****å‡ºç°é”™è¯¯ï¼Œæ‰€æœ‰æ¡ä»¶éƒ½ä¼šè¿›è¡Œåˆ¤æ–­ã€‚**

# <font style="color:#ECAA04;">Java ä¸­çš„å‚æ•°ä¼ é€’æ—¶ä¼ å€¼å‘¢ï¼Ÿè¿˜æ˜¯ä¼ å¼•ç”¨ï¼Ÿ</font>
**åœ¨ Java ä¸­ï¼Œæ–¹æ³•å‚æ•°ä¼ é€’æ˜¯æŒ‰å€¼ä¼ é€’çš„ã€‚è¿™æ„å‘³ç€åœ¨æ–¹æ³•è°ƒç”¨æ—¶ï¼Œå®é™…ä¸Šæ˜¯å°†å‚æ•°çš„å€¼è¿›è¡Œæ‹·è´å¹¶ä¼ é€’ç»™æ–¹æ³•å†…éƒ¨ä½¿ç”¨ï¼Œè€Œä¸æ˜¯ç›´æ¥ä¼ é€’å‚æ•°æœ¬èº«çš„å¼•ç”¨ã€‚**

+ **å¯¹äº****<font style="color:#DF2A3F;">åŸºæœ¬æ•°æ®ç±»å‹</font>****ï¼ˆå¦‚æ•´æ•°ã€æµ®ç‚¹æ•°ç­‰ï¼‰ï¼š****<font style="color:#74B602;">ä¼ é€’çš„æ˜¯å…¶å€¼çš„æ‹·è´</font>****ã€‚ä»»ä½•å¯¹å‚æ•°å€¼çš„ä¿®æ”¹éƒ½ä¸ä¼šå½±å“åŸå§‹å˜é‡ã€‚**
+ **å¯¹äº****<font style="color:#DF2A3F;">å¼•ç”¨ç±»å‹</font>****ï¼ˆå¦‚å¯¹è±¡ã€æ•°ç»„ç­‰ï¼‰ï¼š****<font style="color:#74B602;">ä¼ é€’çš„æ˜¯å¼•ç”¨çš„å€¼çš„æ‹·è´</font>****ï¼Œä¹Ÿå°±æ˜¯è¯´æ–¹æ³•å†…éƒ¨çš„å‚æ•°å’ŒåŸå§‹å˜é‡å°†å¼•ç”¨åŒä¸€ä¸ªå¯¹è±¡ã€‚è™½ç„¶æˆ‘ä»¬å¯ä»¥é€šè¿‡æ–¹æ³•å†…éƒ¨çš„å‚æ•°ä¿®æ”¹å¯¹è±¡çš„çŠ¶æ€ï¼Œä½†æ˜¯å¯¹äºå¼•ç”¨æœ¬èº«çš„ä¿®æ”¹æ˜¯ä¸ä¼šå½±å“åŸå§‹å˜é‡çš„ã€‚**

```java
@Test
public void passValueDemo() {
    int baiLiValue = 5;
    modifyValue(baiLiValue);
    System.out.println("modifyValue after:" + baiLiValue);
    System.out.println("-----------------------------");
    User user = new User(1,"baili","baili.com");
    modifyUser(user);
    System.out.println("modifyUser after:" + user);
}

public void modifyValue(int number) {
    number = 10;
    System.out.println("modifyValue:" + number);
}

public void modifyUser(User user) {
//        user = new User();  //ç›´æ¥ä¿®æ”¹useræœ¬èº«ï¼Œä¸å½±å“åŸuserå±æ€§
    user.setUsername("BAILI");//ç›´æ¥ä¿®æ”¹nameå±æ€§ï¼Œä¼šå½±å“åŸuserå±æ€§
    System.out.println("modifyUser:" + user);
}
```

**ä¸Šé¢çš„æ¡ˆä¾‹ï¼Œå…¶ä¸­baiLiValueæ˜¯åŸºæœ¬ç±»å‹ï¼Œæ‰€ä»¥ä¼ é€’çš„æ˜¯å€¼çš„æ‹·è´ï¼Œä¿®æ”¹åä¸ä¼šå½±å“åŸå€¼ã€‚**

**è€ŒUserå¯¹è±¡ä¼ é€’æ˜¯å¼•ç”¨çš„å€¼çš„æ‹·è´ï¼Œæˆ‘ä»¬å¯ä»¥ä¿®æ”¹å…¶å†…éƒ¨å±æ€§ã€‚ä½†ç›´æ¥ä¿®æ”¹Useræœ¬èº«æ—¶ï¼Œæ˜¯ä¸ä¼šå½±å“åŸUserçš„ã€‚**

# <font style="color:#ECAA04;">ä»€ä¹ˆæ˜¯ Java çš„åºåˆ—åŒ–ï¼Œå¦‚ä½•å®ç° Java çš„åºåˆ—åŒ–ï¼Ÿ</font>
**<font style="color:#DF2A3F;">å®šä¹‰ï¼š</font>****<font style="color:#74B602;">åºåˆ—åŒ–</font>****æ˜¯æŒ‡å°†ä¸€ä¸ªå¯¹è±¡è½¬æ¢ä¸ºå­—èŠ‚æµï¼Œä»¥ä¾¿åœ¨ç½‘ç»œä¸Šä¼ è¾“æˆ–ä¿å­˜åˆ°æ–‡ä»¶ä¸­ã€‚åºåˆ—åŒ–è¿‡ç¨‹è¿˜å¯ä»¥é€šè¿‡****<font style="color:#74B602;">ååºåˆ—åŒ–</font>****å°†å­—èŠ‚æµé‡æ–°è½¬æ¢ä¸ºå¯¹è±¡ã€‚**

**<font style="color:#DF2A3F;">å®ç°æ–¹å¼ï¼š</font>****é€šè¿‡****<font style="color:#74B602;">å®ç° java.io.Serializable æ¥å£</font>****ã€‚è¯¥æ¥å£æ˜¯ä¸€ä¸ª****<font style="color:#74B602;">æ ‡è®°æ¥å£</font>****ï¼Œæ²¡æœ‰ä»»ä½•æ–¹æ³•å®šä¹‰ï¼Œåªè¦ä¸€ä¸ªç±»å®ç°äº†Serializableæ¥å£ï¼Œå°±è¡¨ç¤ºè¯¥ç±»çš„å¯¹è±¡å¯ä»¥è¢«åºåˆ—åŒ–ã€‚Javaåºåˆ—åŒ–æœºåˆ¶ä¼šæ ¹æ®å¯¹è±¡çš„ç±»ç»“æ„è‡ªåŠ¨è¿›è¡Œåºåˆ—åŒ–å’Œååºåˆ—åŒ–æ“ä½œã€‚**

**<font style="color:#DF2A3F;">ç¤ºä¾‹ä»£ç ï¼š</font>**

```java
@Test
public void serializableDemo() throws IOException, ClassNotFoundException {
    // åºåˆ—åŒ–
    User user = new User(1,"baili","baili.com");
    ObjectOutputStream output = new ObjectOutputStream(Files.newOutputStream(new File("D:\\BaiLi\\user.txt").toPath()));
    output.writeObject(user);
    output.close();
    System.out.println("åºåˆ—åŒ–æˆåŠŸï¼š" + user);

    // ååºåˆ—åŒ–
    ObjectInputStream input = new ObjectInputStream(Files.newInputStream(new File("D:\\BaiLi\\user.txt").toPath()));
    User user1 = (User) input.readObject();
    input.close();
    System.out.println("ååºåˆ—åŒ–æˆåŠŸï¼š" + user1);
}
```

**<font style="color:#1DC0C9;">TIPS1ï¼š</font>****<font style="color:#000000;">å¦‚æœå»æ‰Userç±»å®ç°çš„Serializableæ¥å£ï¼Œä¼šå‡ºç°ä»¥ä¸‹æŠ¥é”™ï¼š</font>**

```java
java.io.NotSerializableException: polo.User

	at java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1184)
	at java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:348)
	at BaiLiTest.serializableDemo(BaiLiTest.java:151)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
```

**<font style="color:#1DC0C9;">TIPS2ï¼š</font>****serialVersionUIDæœ‰ä»€ä¹ˆä½œç”¨ï¼Ÿç®€å•æ¥è¯´å°±æ˜¯åºåˆ—åŒ–çš„ä¸€ä¸ªâ€œå¯†ç â€ï¼Œåºåˆ—åŒ–ä¸ååºåˆ—åŒ–â€œå¯†ç â€éœ€ä¿æŒä¸€è‡´ï¼Œå¦åˆ™ä¼šæŠ›å‡ºå¼‚å¸¸ï¼š**

+ **<font style="color:#2F8EF4;">åŸUserç±»ä¸­çš„serialVersionUIDå±æ€§</font>**

```java
private static final long serialVersionUID = -303793456610254190L;
```

+ **<font style="color:#2F8EF4;">åºåˆ—åŒ–ç”Ÿæˆuser.txtæ–‡ä»¶ï¼ŒåŒ…å«serialVersionUID</font>**

```java
@Test
public void serializableDemo() throws IOException, ClassNotFoundException {
    // åºåˆ—åŒ–
    User user = new User(1,"baili","baili.com");
    ObjectOutputStream output = new ObjectOutputStream(Files.newOutputStream(new File("D:\\BaiLi\\user.txt").toPath()));
    output.writeObject(user);
    output.close();
    System.out.println("åºåˆ—åŒ–æˆåŠŸï¼š" + user);
}
```

+ **<font style="color:#2F8EF4;">æ³¨é‡Šæˆ–ä¿®æ”¹Userç±»ä¸­çš„serialVersionUIDå±æ€§å€¼ï¼Œç„¶åå†ååºåˆ—åŒ–æ–‡ä»¶å‡ºç°å¼‚å¸¸</font>**

```java
@Test
public void serializableDemo() throws IOException, ClassNotFoundException {
	// ååºåˆ—åŒ–
    ObjectInputStream input = new ObjectInputStream(Files.newInputStream(new File("D:\\BaiLi\\user.txt").toPath()));
    User user1 = (User) input.readObject();
    input.close();
    System.out.println("ååºåˆ—åŒ–æˆåŠŸï¼š" + user1);
}
```

```java
java.io.InvalidClassException: polo.User; local class incompatible: stream classdesc serialVersionUID = -303793456610254190, local class serialVersionUID = 252382001504705380
	at java.io.ObjectStreamClass.initNonProxy(ObjectStreamClass.java:616)
	at java.io.ObjectInputStream.readNonProxyDesc(ObjectInputStream.java:1630)
	at java.io.ObjectInputStream.readClassDesc(ObjectInputStream.java:1521)
	at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:1781)
	at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1353)
	at java.io.ObjectInputStream.readObject(ObjectInputStream.java:373)
	at BaiLiTest.serializableDemo(BaiLiTest.java:157)
```

**<font style="color:#DF2A3F;">ä½¿ç”¨åœºæ™¯ï¼š</font>****æ‰€æœ‰å¯åœ¨****<font style="color:#74B602;">ç½‘ç»œä¸Šä¼ è¾“</font>****çš„å¯¹è±¡éƒ½****<font style="color:#74B602;">å¿…é¡»æ˜¯å¯åºåˆ—åŒ–çš„</font>****ï¼Œæ¯”å¦‚RMIï¼ˆè¿œç¨‹æ–¹æ³•è°ƒç”¨ï¼‰ï¼Œä¼ å…¥çš„å‚æ•°æˆ–è¿”å›çš„å¯¹è±¡éƒ½æ˜¯å¯åºåˆ—åŒ–çš„ï¼Œå¦åˆ™ä¼šå‡ºé”™ï¼›æ‰€æœ‰éœ€è¦ä¿å­˜åˆ°ç£ç›˜çš„javaå¯¹è±¡éƒ½å¿…é¡»æ˜¯å¯åºåˆ—åŒ–çš„ã€‚**

**<font style="color:#DF2A3F;">é€šå¸¸å»ºè®®ï¼š</font>****ç¨‹åºåˆ›å»ºçš„æ¯ä¸ªJavaBeanç±»éƒ½å®ç°Serializeableæ¥å£ã€‚**

# <font style="color:#ECAA04;">Java ä¸­çš„åå°„æ˜¯ä»€ä¹ˆæ„æ€ï¼Ÿ</font>
**<font style="color:#01B2BC;">ä»€ä¹ˆæ˜¯Javaåå°„ï¼Ÿ</font>**

**<font style="color:#DF2A3F;">å®˜æ–¹ç»™å‡ºçš„è§£é‡Šï¼š</font>****Javaçš„åå°„æœºåˆ¶æ˜¯æŒ‡åœ¨è¿è¡ŒçŠ¶æ€ä¸­ï¼Œå¯¹äºä»»æ„ä¸€ä¸ªç±»éƒ½èƒ½å¤ŸçŸ¥é“è¿™ä¸ªç±»æ‰€æœ‰çš„å±æ€§å’Œæ–¹æ³•ï¼› å¹¶ä¸”å¯¹äºä»»æ„ä¸€ä¸ªå¯¹è±¡ï¼Œéƒ½èƒ½å¤Ÿè°ƒç”¨å®ƒçš„ä»»æ„ä¸€ä¸ªæ–¹æ³•ï¼›è¿™ç§åŠ¨æ€è·å–ä¿¡æ¯ä»¥åŠåŠ¨æ€è°ƒç”¨å¯¹è±¡æ–¹æ³•çš„åŠŸèƒ½æˆä¸ºJavaè¯­è¨€çš„åå°„æœºåˆ¶ã€‚**

**<font style="color:#DF2A3F;">ç®€å•çš„è¯´ï¼š</font>****åœ¨è¿è¡Œæ—¶åŠ¨æ€åœ°è·å–ã€æ“ä½œå’Œä¿®æ”¹ç±»æˆ–å¯¹è±¡çš„å±æ€§ã€æ–¹æ³•ã€æ„é€ å‡½æ•°ç­‰ä¿¡æ¯çš„èƒ½åŠ›ï¼Œè€Œä¸éœ€è¦åœ¨ç¼–è¯‘æ—¶é¢„å…ˆçŸ¥é“ç±»çš„å…·ä½“ä¿¡æ¯ã€‚**

![ç”»æ¿](./img/hATw4O-knQXenPBo/1689842222472-c44dbf54-465a-4fd6-a48f-f37bc7788a9e-044874.jpeg)

**<font style="color:#01B2BC;">å¦‚ä½•åˆ©ç”¨åå°„æœºåˆ¶è·å–classå¯¹è±¡ï¼Ÿ</font>**

![ç”»æ¿](./img/hATw4O-knQXenPBo/1689843085682-68d770bd-f085-44f9-9194-a7f05dc1e49c-984234.jpeg)

+ **<font style="color:rgb(37, 41, 51);">ä½¿ç”¨ Class.forName é™æ€æ–¹æ³•</font>**

```java

```

**åœ¨ä½¿ç”¨Class.forNameè·å–Classå¯¹è±¡æ—¶ï¼Œéœ€è¦æä¾›å®Œæ•´çš„ç±»åï¼ˆåŒ…æ‹¬åŒ…åï¼‰ã€‚å¦‚æœUserç±»ä¸åœ¨é»˜è®¤åŒ…ä¸­ï¼Œè¿˜éœ€è¦åŠ ä¸ŠåŒ…åï¼Œå¦‚Class.forName("polo.User")ã€‚**

+ **<font style="color:rgb(37, 41, 51);">ä½¿ç”¨</font>****ç±»å****<font style="color:rgb(37, 41, 51);">.class æ–¹æ³•</font>**

```java
@Test
public void classDemo1() {
    // ä½¿ç”¨ç±»çš„.classè·å–Classå¯¹è±¡
	Class<?> userClass = User.class;
    System.out.println(userClass);
}
```

+ **<font style="color:rgb(37, 41, 51);">ä½¿ç”¨å®ä¾‹å¯¹è±¡çš„ getClass() æ–¹æ³•</font>**

```java
@Test
public void classDemo1() throws ClassNotFoundException {
    // ä½¿ç”¨å®ä¾‹è·å–Classå¯¹è±¡
    User user = new User();
    Class<?> userClass = user.getClass();
}
```

**<font style="color:#01B2BC;">åˆ©ç”¨åå°„åˆ›é€ å¯¹è±¡</font>**

![ç”»æ¿](./img/hATw4O-knQXenPBo/1689059828269-23c09602-3151-4c4c-adca-3a456d23274b-211101.jpeg)

```java
//æ–¹å¼ä¸€
Class class = Class.forName("polo.User");
User user = (User) class.newInstance();
System.out.println(user);

//æ–¹å¼äºŒ
Constructor constructor = class.getConstructor();
User user1 = (User) constructor.newInstance();
System.out.println(user1);
```

**<font style="color:#01B2BC;">åˆ©ç”¨åå°„è·å–æ–¹æ³•</font>**

![ç”»æ¿](./img/hATw4O-knQXenPBo/1689059830344-468729bb-99c7-4b2b-aca2-e316ba6ee73b-363396.jpeg)

```java
//æ–¹æ³•ä¸€
Class class1 = Class.forName("polo.User");
Method[] declaredMethods = class1.getMethods();
System.out.println(Arrays.toString(declaredMethods));
```

**<font style="color:#01B2BC;">åˆ©ç”¨åå°„æˆå‘˜å˜é‡</font>**

![ç”»æ¿](./img/hATw4O-knQXenPBo/1689059832435-ac9d2870-57fb-47b2-9134-29df1c0dbee2-515026.jpeg)

```java
Class class1 = Class.forName("polo.User");
Field email = class1.getDeclaredField("email");
System.out.println(email);
Field username = class1.getDeclaredField("username");
System.out.println(username);
```

**<font style="color:#01B2BC;">åˆ©ç”¨åå°„è·å–ç±»æ„é€ å™¨</font>**

![ç”»æ¿](./img/hATw4O-knQXenPBo/1689059834365-07b5b414-e307-4e60-b547-267a4c167506-153369.jpeg)

```java
Class class1 = Class.forName("polo.User");
//Class<?>[] parameterTypes = null; //è°ƒç”¨æ— å‚æ„é€ å™¨ï¼Œä¹Ÿå¯ä»¥ç›´æ¥ä¸ä¼ ä»»ä½•å‚æ•°
Class<?>[] parameterTypes = {int.class, String.class, String.class}
Constructor<? extends User> constructor1 = Class.getConstructor(parameterTypes);
System.out.println(constructor1);
//constructor1.newInstance();
constructor1.newInstance(1,"baili","baili.com");
```

# <font style="color:#ECAA04;">åå°„çš„åº”ç”¨åœºæ™¯æœ‰å“ªäº›ï¼Ÿåå°„æœ‰ä»€ä¹ˆä¼˜ç¼ºç‚¹ï¼Ÿ</font>
**<font style="color:#DF2A3F;">åº”ç”¨åœºæ™¯</font>**

**åå°„æ˜¯Javaæ¡†æ¶çš„çµé­‚æŠ€æœ¯ï¼Œå¾ˆå¤šæ¡†æ¶éƒ½ä½¿ç”¨äº†åå°„æŠ€æœ¯ï¼Œå¦‚springï¼ŒMybatisï¼ŒHibernateç­‰ã€‚**

**<font style="color:#01B2BC;">JDBC çš„æ•°æ®åº“çš„è¿æ¥</font>**

**åœ¨JDBCè¿æ¥æ•°æ®åº“ä¸­ï¼Œä¸€èˆ¬åŒ…æ‹¬åŠ è½½é©±åŠ¨ï¼Œè·å¾—æ•°æ®åº“è¿æ¥ç­‰æ­¥éª¤ã€‚è€ŒåŠ è½½é©±åŠ¨ï¼Œå°±æ˜¯å¼•å…¥ç›¸å…³JaråŒ…åï¼Œé€šè¿‡Class.forName()åŠ è½½æ•°æ®åº“çš„é©±åŠ¨ç¨‹åºã€‚**

```java
Class.forName("com.mysql.cj.jdbc.Driver");
```

**<font style="color:#01B2BC;">xmlæˆ–propertiesç­‰é…ç½®æ–‡ä»¶åŠ è½½</font>**

**Spring é€šè¿‡ XML é…ç½®æ¨¡å¼è£…è½½ Beanï¼Œä¹Ÿæ˜¯åå°„çš„ä¸€ä¸ªå…¸å‹ä¾‹å­ã€‚**

**<font style="color:#2F4BDA;">è£…è½½è¿‡ç¨‹ï¼š</font>**

+ **å°†ç¨‹åºå†…XML é…ç½®æ–‡ä»¶åŠ è½½å…¥å†…å­˜ä¸­**
+ **Javaç±»è§£æxmlæˆ–è€…propertiesé‡Œé¢çš„å†…å®¹ï¼Œå¾—åˆ°å¯¹åº”å®ä½“ç±»çš„å­—èŠ‚ç å­—ç¬¦ä¸²ä»¥åŠç›¸å…³çš„å±æ€§ä¿¡æ¯**
+ **ä½¿ç”¨åå°„æœºåˆ¶ï¼Œå¾—åˆ°Classå®ä¾‹**
+ **åŠ¨æ€é…ç½®å®ä¾‹çš„å±æ€§**

**è¿™æ ·åšå½“ç„¶æ˜¯æœ‰å¥½å¤„çš„ä¸ç”¨æ¯æ¬¡éƒ½å»newå®ä¾‹äº†ï¼Œå¹¶ä¸”å¯ä»¥ä¿®æ”¹é…ç½®æ–‡ä»¶ï¼Œæ¯”è¾ƒçµæ´»ã€‚**

**<font style="color:#DF2A3F;">åå°„çš„ä¼˜ç‚¹ï¼š</font>**

**<font style="color:#01B2BC;">åŠ¨æ€æ€§ï¼š</font>****åå°„æä¾›äº†åœ¨è¿è¡Œæ—¶åŠ¨æ€åœ°æ¢ç´¢å’Œæ“ä½œç±»çš„èƒ½åŠ›ã€‚å®ƒå…è®¸æˆ‘ä»¬åœ¨è¿è¡Œæ—¶è·å–ç±»çš„ä¿¡æ¯ã€åˆ›å»ºå¯¹è±¡ã€è°ƒç”¨æ–¹æ³•å’Œä¿®æ”¹å­—æ®µçš„å€¼ï¼Œä»è€Œä½¿ç¨‹åºæ›´åŠ çµæ´»ã€å¯æ‰©å±•å’ŒåŠ¨æ€ã€‚**

**<font style="color:#01B2BC;">é€‚åº”å¤æ‚ç¯å¢ƒï¼šï¼š</font>****åå°„å¯ä»¥åº”å¯¹ä¸€äº›å¤æ‚çš„åœºæ™¯ï¼Œå¦‚åœ¨æ’ä»¶åŒ–ç³»ç»Ÿä¸­æ ¹æ®é…ç½®æ–‡ä»¶åŠ è½½ç±»ã€åŠ¨æ€ä»£ç†ã€è¯†åˆ«å’Œå¤„ç†æ³¨è§£ç­‰ã€‚**

**<font style="color:#DF2A3F;">åå°„çš„ç¼ºç‚¹ï¼š</font>**

**<font style="color:#01B2BC;">æ€§èƒ½é—®é¢˜ï¼š</font>****ç”±äºåå°„æ¶‰åŠåˆ°åŠ¨æ€è§£æå’Œè°ƒç”¨ï¼Œæ‰€ä»¥å®ƒé€šå¸¸æ¯”ç›´æ¥è°ƒç”¨ä»£ç æ€§èƒ½è¾ƒä½ã€‚åå°„éœ€è¦è¿›è¡Œé¢å¤–çš„æ£€æŸ¥å’Œå¤„ç†ï¼Œå¯èƒ½ä¼šå¯¼è‡´æ€§èƒ½ä¸‹é™ã€‚**

**<font style="color:#01B2BC;">å®‰å…¨é—®é¢˜ï¼š</font>****åå°„å¯ä»¥ç»•è¿‡è®¿é—®æ§åˆ¶é™åˆ¶ï¼Œä¾‹å¦‚è®¿é—®ç§æœ‰æ–¹æ³•å’Œå­—æ®µã€‚è¿™å¯èƒ½ä¼šå¯¼è‡´å®‰å…¨éšæ‚£ï¼Œå› æ­¤åœ¨ä½¿ç”¨åå°„æ—¶éœ€è¦å°å¿ƒå¤„ç†ï¼Œå¹¶ç¡®ä¿åªåœ¨å¿…è¦æƒ…å†µä¸‹ä½¿ç”¨**

# <font style="color:#ECAA04;">æ€ä¹ˆå®ç°åŠ¨æ€ä»£ç†ï¼Ÿ</font>
**<font style="color:rgb(43, 43, 43);">ä»£ç†æ¨¡å¼æ˜¯ä¸€ç§è®¾è®¡æ¨¡å¼ï¼Œæä¾›äº†å¯¹ç›®æ ‡å¯¹è±¡é¢å¤–çš„è®¿é—®æ–¹å¼ï¼Œå³é€šè¿‡ä»£ç†å¯¹è±¡è®¿é—®ç›®æ ‡å¯¹è±¡ï¼Œè¿™æ ·å¯ä»¥åœ¨ä¸ä¿®æ”¹åŸç›®æ ‡å¯¹è±¡çš„å‰æä¸‹ï¼Œæä¾›é¢å¤–çš„åŠŸèƒ½æ“ä½œï¼Œæ‰©å±•ç›®æ ‡å¯¹è±¡çš„åŠŸèƒ½ã€‚</font>**

**<font style="color:#01B2BC;">ä¸¾ä¸ªä¾‹å­ï¼š</font>**

**åœ¨ç§Ÿæˆ¿çš„æ—¶å€™ï¼Œæœ‰çš„äººä¼šé€šè¿‡æˆ¿ä¸œç›´ç§Ÿï¼Œæœ‰çš„äººä¼šé€šè¿‡ä¸­ä»‹ç§Ÿæˆ¿ã€‚ä¸­ä»‹ä¸€èˆ¬æ˜¯ä¸æ˜¯ä¼šæä¾›ä¸€äº›é¢å¤–çš„æœåŠ¡ï¼Œè¿™é‡Œçš„ä¸­ä»‹å°±ç›¸å½“äºä»£ç†ã€‚**

**<font style="color:#01B2BC;">åŠ¨æ€ä»£ç†å®ç°æ–¹å¼ï¼š</font>**

**JDKå®ç°ï¼š****<font style="color:#8CCF17;">JDK Proxy</font>****åŸºäº****<font style="color:#74B602;">åå°„</font>******

**ç¬¬ä¸‰æ–¹ç±»å®ç°ï¼š****<font style="color:#8CCF17;">CGLIB</font>****åŸºäº****<font style="color:#8CCF17;">ASM</font>****<font style="color:#000000;">ï¼ˆä¸€ä¸ª Java å­—èŠ‚ç æ“ä½œæ¡†æ¶ï¼‰</font>**

**<font style="color:#01B2BC;">å¦‚ä½•å®ç°åŠ¨æ€ä»£ç†ï¼š</font>**

+ **<font style="color:#2F4BDA;">åŸºäºæ¥å£çš„JDKåŠ¨æ€ä»£ç†</font>**
    - **å®šä¹‰ç›®æ ‡ç±»ï¼Œå³è¢«ä»£ç†çš„ç±»ã€‚**
    - **é€šè¿‡å®ç°InvocationHandleræ¥å£æ¥è‡ªå®šä¹‰è‡ªå·±çš„InvocationHandlerï¼›é‡å†™invokeæ–¹æ³•ï¼Œåœ¨æ­¤æ–¹æ³•ä¸­å®šä¹‰å¢å¼ºé€»è¾‘ã€‚**
    - **é€šè¿‡Proxy.newProxyInstanceæ–¹æ³•è·å¾—ä»£ç†å¯¹è±¡ã€‚**
    - **é€šè¿‡ä»£ç†å¯¹è±¡è°ƒç”¨ç›®æ ‡æ–¹æ³•ï¼›**

```java
/**
 * @author ç™¾é‡Œ
 */
public interface UserService {
    void readBook();
}

/**
 * @author ç™¾é‡Œ
 */
public class UserServiceImpl implements UserService {
    @Override
    public void readBook() {
        System.out.println("é˜…è¯»ä¸‰å›½æ¼”ä¹‰ï¼ï¼ï¼");
    }
}

/**
 * @author ç™¾é‡Œ
 */
public class UserProxy implements InvocationHandler {

    private final Object object;

    public UserProxy(Object object){
        this.object = object;
    }

    @Override
    public Object invoke(Object proxy, Method method, Object[] args) throws Throwable {
        System.out.println("å‰ç½®å¤„ç†");
        Object invoke = method.invoke(object, args);
        System.out.println("åç½®å¤„ç†");
        return invoke;
    }
}

/**
 * JDK Proxy
 */
@Test
public void proxyDemo(){
    UserService userService = (UserService) Proxy.newProxyInstance(  //åˆ›å»ºä»£ç†å¯¹è±¡
            UserServiceImpl.class.getClassLoader(),     // åŠ è½½æ¥å£çš„ç±»åŠ è½½å™¨
            UserServiceImpl.class.getInterfaces(),     // æ¥å£
            new UserProxy(new UserServiceImpl()));  // ä»£ç†ç±»ï¼Œä¼ å…¥éœ€è¦è¢«ä»£ç†ç±»çš„å®ç°ç±»
    userService.rentingHouse();
}
```

+ **<font style="color:#2F4BDA;">åŸºäºç±»çš„CGLIBåŠ¨æ€ä»£ç†</font>**
    - **å¼•å…¥CGLIBçš„ç›¸å…³ä¾èµ–ã€‚**
    - **å®šä¹‰ç›®æ ‡ç±»ï¼Œå³è¢«ä»£ç†çš„ç±»ã€‚**
    - **åˆ›å»ºä»£ç†ç±»å®ç°CGLIBçš„MethodInterceptoræ¥å£ï¼Œå¹¶é‡å†™interceptæ–¹æ³•ï¼Œåœ¨æ­¤æ–¹æ³•ä¸­å®šä¹‰å¢å¼ºé€»è¾‘ã€‚**
    - **ä½¿ç”¨Enhancerç±»åˆ›å»ºä»£ç†å¯¹è±¡ï¼Œè®¾ç½®ç›®æ ‡ç±»ã€å›è°ƒå¯¹è±¡ç­‰å‚æ•°ã€‚**
    - **è°ƒç”¨ä»£ç†å¯¹è±¡çš„æ–¹æ³•ï¼Œå®ç°ä»£ç†è¡Œä¸ºã€‚**

```java
<dependency>
    <groupId>cglib</groupId>
    <artifactId>cglib</artifactId>
    <version>3.3.0</version>
</dependency>
<dependency>
    <groupId>org.ow2.asm</groupId>
    <artifactId>asm</artifactId>
    <version>9.1</version>
</dependency>
```

```java
/**
 * @author ç™¾é‡Œ
 */
public class UserCgLibProxy implements MethodInterceptor {
    private final Objec object;

    public UserCgLibProxy(Object object){
        this.object = object;
    }

    public Object createProxy() {
        // é€šè¿‡CGLIBåŠ¨æ€ä»£ç†è·å–ä»£ç†å¯¹è±¡çš„è¿‡ç¨‹
        Enhancer enhancer = new Enhancer();
        // è®¾ç½®enhancerå¯¹è±¡çš„çˆ¶ç±»
        enhancer.setSuperclass(object.getClass());
        // è®¾ç½®enhancerçš„å›è°ƒå¯¹è±¡
        enhancer.setCallback(new UserCgLibProxy(object.getClass()));
        // è¿”å›ä»£ç†å¯¹è±¡
        return enhancer.create();
    }

    @Override
    public Object intercept(Object o, Method method, Object[] objects, MethodProxy methodProxy) throws Throwable {
        System.out.println("å‰ç½®å¤„ç†");
        Object invoke = methodProxy.invokeSuper(o, objects);
        System.out.println("åç½®å¤„ç†");
        return invoke;
    }
}

/**
 * CGLIB
 */
@Test
public void cglibProxyDemo(){
    UserCgLibProxy userCgLibProxy = new UserCgLibProxy(new UserServiceImpl());
    UserServiceImpl proxy = (UserServiceImpl)userCgLibProxy.createProxy();
    proxy.rentingHouse();
}
```

**<font style="color:#2F4BDA;">JDK Proxyä¸CGLIBçš„åŒºåˆ«ï¼š</font>**

+ **<font style="color:rgba(255,140,0,1);">åŸºäºæ¥å£ vs. åŸºäºç±»ï¼š</font>**
    - **JDK Proxy ****<font style="color:#74B602;">åªèƒ½ä»£ç†æ¥å£ç±»å‹</font>****ï¼Œå®ƒé€šè¿‡****<font style="color:#74B602;">å®ç°æŒ‡å®šæ¥å£</font>****å¹¶ç”Ÿæˆä»£ç†å¯¹è±¡æ¥å®ç°ä»£ç†åŠŸèƒ½ã€‚**
    - **CGLIB å¯ä»¥****<font style="color:#74B602;">ä»£ç†æ™®é€šçš„ç±»</font>****ï¼Œå®ƒé€šè¿‡****<font style="color:#74B602;">ç»§æ‰¿ç›®æ ‡ç±»</font>****ï¼Œå¹¶åœ¨å­ç±»ä¸­é‡å†™æ–¹æ³•æ¥å®ç°ä»£ç†ã€‚**
+ **<font style="color:rgba(255,140,0,1);">å®ç°æ–¹å¼ï¼š</font>**
    - **JDK Proxy æ˜¯åŸºäº****<font style="color:#74B602;">åå°„æœºåˆ¶å®ç°</font>****çš„ï¼Œå®ƒåˆ©ç”¨ Java çš„åå°„ API åŠ¨æ€ç”Ÿæˆä»£ç†å¯¹è±¡ã€‚**
    - **CGLIB ä½¿ç”¨äº†****<font style="color:#74B602;">å­—èŠ‚ç ç”Ÿæˆåº“</font>****ï¼Œç›´æ¥æ“ä½œå­—èŠ‚ç ç”Ÿæˆä»£ç†ç±»ã€‚ç›¸æ¯”äº JDK ä»£ç†çš„åå°„è°ƒç”¨ï¼ŒCGLIB çš„æ–¹æ³•è°ƒç”¨æ›´å¿«é€Ÿã€‚**
+ **<font style="color:rgba(255,140,0,1);">æ€§èƒ½ï¼š</font>**
    - **ç”±äº CGLIB æ˜¯ç›´æ¥å¯¹****<font style="color:#74B602;">å­—èŠ‚ç è¿›è¡Œæ“ä½œ</font>****ï¼Œæ‰€ä»¥åœ¨åˆ›å»ºå’Œæ‰§è¡Œä»£ç†å¯¹è±¡æ—¶é€šå¸¸æ¯” JDK ä»£ç†æ›´å¿«é€Ÿã€‚**
    - **JDK Proxy çš„æ€§èƒ½ç•¥ä½ï¼Œå› ä¸ºå®ƒæ¶‰åŠåˆ°åå°„è°ƒç”¨çš„å¼€é”€ã€‚****<font style="color:#74B602;">JDK8 ç‰ˆæœ¬å·²ç»ä¼˜åŒ–ï¼Œæ€§èƒ½ä¸ CGLIB å·®ä¸å¤š</font>****ã€‚**
+ **<font style="color:rgba(255,140,0,1);">åº“ä¾èµ–ï¼š</font>**
    - **JDK Proxy æ˜¯ Java æ ‡å‡†åº“çš„ä¸€éƒ¨åˆ†ï¼Œæ— éœ€é¢å¤–çš„ä¾èµ–ã€‚**
    - **CGLIB éœ€è¦å¼•å…¥ç›¸å…³çš„ç¬¬ä¸‰æ–¹åº“ã€‚**

# <font style="color:#ECAA04;">String ä¸ºä»€ä¹ˆè¦è®¾è®¡ä¸ºä¸å¯å˜ç±»ï¼Ÿ</font>
**<font style="color:#01B2BC;">ä¸å¯å˜æ€ä¹ˆç†è§£ï¼Ÿ</font>**

```java
@Test
public void stringDemo() {
    String str = "baili";
    str = "BAILI";
}
```

**Stringå€¼å‚¨å­˜åœ¨å¸¸é‡æ± ä¸­ã€‚å°†å­—ç¬¦ä¸²"baili"ï¼Œå¦‚æœæ”¹å˜å€¼æˆ"BAILI"ï¼Œä¸æ˜¯åœ¨åŸå†…å­˜åœ°å€ä¸Šä¿®æ”¹æ•°æ®ï¼Œè€Œæ˜¯åœ¨å¸¸é‡æ± ä¸­æŸ¥æ‰¾æˆ–ç”Ÿæˆè¿™ä¸ªæ–°å€¼ï¼Œå†æŠŠå¼•ç”¨æŒ‡å‘æ–°å€¼çš„åœ°å€ã€‚****<font style="color:#000000;">å¦‚ä¸‹å›¾ï¼š</font>**

![ç”»æ¿](./img/hATw4O-knQXenPBo/1689078011089-0b656532-d348-40b0-be1d-90fa754fefd6-581257.jpeg)

**<font style="color:#01B2BC;">ä¸ºä»€ä¹ˆä¸å¯å˜?</font>**

+ **<font style="color:rgb(51, 51, 51);">String ç±»æœ¬èº«æ˜¯finalçš„ï¼Œä¸å¯ä»¥è¢«ç»§æ‰¿ã€‚</font>**
+ **<font style="color:rgb(51, 51, 51);">Stringç±»å†…éƒ¨é€šè¿‡private final char value[]å®ç°ï¼Œä»è€Œä¿è¯äº†å¼•ç”¨çš„ä¸å¯å˜å’Œå¯¹å¤–çš„ä¸å¯è§ã€‚</font>**
+ **<font style="color:rgb(51, 51, 51);">Stringå†…éƒ¨é€šè¿‡è‰¯å¥½çš„å°è£…ï¼Œä¸å»æ”¹å˜valueæ•°ç»„çš„å€¼ã€‚</font>**

**<font style="color:#01B2BC;">ä¸ºä»€ä¹ˆè¦è®¾è®¡æˆä¸å¯å˜?</font>**

+ **<font style="color:#117CEE;">å­—ç¬¦ä¸²æ± ä¼˜åŒ–ï¼š</font>****ä¸å¯å˜æ€§å…è®¸å­—ç¬¦ä¸²****<font style="color:#8CCF17;">å…±äº«å’Œé‡ç”¨</font>****ï¼ŒèŠ‚çœå†…å­˜ç©ºé—´å’Œæé«˜æ€§èƒ½ã€‚**
+ **<font style="color:#117CEE;">çº¿ç¨‹å®‰å…¨æ€§ï¼š</font>****ä¸å¯å˜ç±»å¤©ç„¶å…·å¤‡****<font style="color:#8CCF17;">çº¿ç¨‹å®‰å…¨</font>****çš„ç‰¹æ€§ï¼Œæ— éœ€é¢å¤–åŒæ­¥æªæ–½ã€‚**
+ **<font style="color:#117CEE;">ç¼“å­˜å“ˆå¸Œå€¼ï¼š</font>****ä¸å¯å˜æ€§ä½¿å¾—å­—ç¬¦ä¸²çš„****<font style="color:#8CCF17;">å“ˆå¸Œå€¼å¯ä»¥è¢«ç¼“å­˜</font>****ï¼Œæé«˜ç›¸å…³æ•°æ®ç»“æ„çš„æ€§èƒ½ã€‚**
+ **<font style="color:#117CEE;">å®‰å…¨æ€§å’Œå¯é æ€§ï¼š</font>****ä¸å¯å˜æ€§ç¡®ä¿****<font style="color:#8CCF17;">å®ä¾‹çŠ¶æ€ä¸ä¼šè¢«ä¿®æ”¹</font>****ï¼Œé€‚ç”¨äºå¤„ç†æ•æ„Ÿä¿¡æ¯ç­‰å®‰å…¨åœºæ™¯ã€‚**
+ **<font style="color:#117CEE;">æ–¹ä¾¿å…±äº«å’Œé‡ç”¨ï¼š</font>****ä¸å¯å˜ç±»çš„å®ä¾‹å¯ä»¥****<font style="color:#8CCF17;">è‡ªç”±å…±äº«å’Œé‡ç”¨</font>****ï¼Œæå‡æ€§èƒ½æ•ˆç‡ã€‚**

**<font style="color:#01B2BC;">TIPS</font>**

**å¯ä»¥ç”¨åå°„æ¥æ”¹å˜Stringä¸­valueçš„å€¼ï¼Œæ‰€ä»¥ä¸¥æ ¼æ„ä¹‰ä¸Šè¯´ä¸ä¸€å®šä¸å¯å˜ã€‚**

# <font style="color:#ECAA04;">Stringã€StringBuilderã€StringBuffer çš„åŒºåˆ«ï¼Ÿ</font>
**<font style="color:#01B2BC;">å¯å˜æ€§ï¼š</font>**

+ **String ç±»æ˜¯****<font style="color:#74B602;">ä¸å¯å˜ç±»</font>****ï¼Œä¸€æ—¦åˆ›å»ºå°±æ— æ³•æ”¹å˜å…¶å†…å®¹ã€‚å¯¹äºæ¯æ¬¡ä¿®æ”¹æ“ä½œï¼ˆä¾‹å¦‚æ‹¼æ¥å­—ç¬¦ä¸²ï¼‰ï¼Œéƒ½ä¼šåˆ›å»ºä¸€ä¸ª****<font style="color:#74B602;">æ–°çš„å­—ç¬¦ä¸²å¯¹è±¡</font>****ï¼Œæ—§å¯¹è±¡åˆ™æˆä¸ºåƒåœ¾æ•°æ®ï¼Œéœ€è¦ç­‰å¾…****<font style="color:#74B602;">åƒåœ¾å›æ”¶</font>****ã€‚**
+ **StringBuilder å’Œ StringBuffer ç±»æ˜¯****<font style="color:#74B602;">å¯å˜çš„</font>****ï¼Œå®ƒä»¬å¯ä»¥ç›´æ¥åœ¨åŸå§‹å¯¹è±¡ä¸Šè¿›è¡Œä¿®æ”¹è€Œä¸åˆ›å»ºæ–°çš„å¯¹è±¡ã€‚è¿™ç§ç‰¹æ€§ä½¿å¾—åœ¨é¢‘ç¹æ‹¼æ¥æˆ–ä¿®æ”¹å­—ç¬¦ä¸²æ—¶æ›´****<font style="color:#74B602;">é«˜æ•ˆ</font>****ã€‚**

![ç”»æ¿](./img/hATw4O-knQXenPBo/1689078011089-0b656532-d348-40b0-be1d-90fa754fefd6-581257.jpeg)

**<font style="color:#01B2BC;">çº¿ç¨‹å®‰å…¨æ€§ï¼š</font>**

+ **String ç±»æ˜¯****<font style="color:#74B602;">çº¿ç¨‹å®‰å…¨</font>****çš„ï¼Œå› ä¸ºå®ƒçš„ä¸å¯å˜æ€§ä¿è¯äº†å¤šä¸ªçº¿ç¨‹åŒæ—¶è®¿é—®åŒä¸€ä¸ªå­—ç¬¦ä¸²å¯¹è±¡æ—¶çš„å®‰å…¨æ€§ã€‚**
+ **StringBuilder ç±»æ˜¯****<font style="color:#74B602;">éçº¿ç¨‹å®‰å…¨</font>****çš„ï¼Œå®ƒçš„æ–¹æ³•æ²¡æœ‰è¿›è¡ŒåŒæ­¥å¤„ç†ã€‚å¦‚æœåœ¨å¤šçº¿ç¨‹ç¯å¢ƒä¸‹ä½¿ç”¨ StringBuilderï¼Œéœ€è¦é¢å¤–é‡‡å–æªæ–½ä¿è¯çº¿ç¨‹å®‰å…¨ã€‚**
+ **StringBuffer ç±»æ˜¯****<font style="color:#74B602;">çº¿ç¨‹å®‰å…¨</font>****çš„ï¼Œå®ƒçš„æ–¹æ³•è¿›è¡Œäº†****<font style="color:#74B602;">åŒæ­¥å¤„ç†</font>****ï¼Œå› æ­¤****<font style="color:#74B602;">å¯ä»¥åœ¨å¤šçº¿ç¨‹ç¯å¢ƒ</font>****ä¸‹ä½¿ç”¨ã€‚**

**<font style="color:#01B2BC;">æ€§èƒ½ï¼š</font>**

+ **åœ¨****<font style="color:#74B602;">å•çº¿ç¨‹ç¯å¢ƒ</font>****ä¸‹ï¼ŒStringBuilder çš„æ€§èƒ½é€šå¸¸ä¼˜äº StringBufferï¼Œå› ä¸º StringBuilder ä¸è¿›è¡ŒåŒæ­¥å¤„ç†ï¼Œçœå»äº†åŒæ­¥çš„å¼€é”€ã€‚**
+ **åœ¨****<font style="color:#74B602;">å¤šçº¿ç¨‹ç¯å¢ƒ</font>****ä¸‹ï¼Œç”±äº StringBuffer è¿›è¡Œäº†åŒæ­¥å¤„ç†ï¼Œå¯èƒ½ä¼šå¸¦æ¥é¢å¤–çš„æ€§èƒ½å¼€é”€ã€‚ä½†å½“çº¿ç¨‹åŒæ­¥æ˜¯å¿…éœ€çš„æ—¶å€™ï¼ŒStringBuffer æ˜¯ä¸€ä¸ªå¯é çš„é€‰æ‹©ã€‚**
+ **String ç±»ç”±äºä¸å¯å˜æ€§ï¼Œæ¯æ¬¡ä¿®æ”¹éƒ½è¦åˆ›å»ºæ–°çš„å¯¹è±¡ï¼Œæ€§èƒ½ç›¸å¯¹è¾ƒå·®ã€‚ä½†ç”±äºå­—ç¬¦ä¸²å¸¸é‡æ± çš„ä¼˜åŒ–ï¼Œå­—ç¬¦ä¸²çš„æ¯”è¾ƒå’Œå…±äº«ç­‰æ“ä½œä¾ç„¶é«˜æ•ˆ**

| **** | **<font style="color:#DF2A3F;">String</font>** | **<font style="color:#DF2A3F;">StringBuffer</font>** | **<font style="color:#DF2A3F;">StringBuilder</font>** |
| --- | --- | --- | --- |
| **<font style="color:#DF2A3F;">å¯å˜æ€§</font>** | **ä¸å¯å˜** | **å¯å˜** | **å¯å˜** |
| **<font style="color:#DF2A3F;">æ•ˆç‡</font>** | **æœ€å·®** | **å…¶æ¬¡** | **æœ€é«˜** |
| **<font style="color:#DF2A3F;">çº¿ç¨‹å®‰å…¨</font>** | **çº¿ç¨‹å®‰å…¨** | **çº¿ç¨‹å®‰å…¨** | **çº¿ç¨‹ä¸å®‰å…¨** |
| **<font style="color:#DF2A3F;">ä½¿ç”¨åœºæ™¯</font>** | **å°‘é‡å­—ç¬¦ä¸²æ“ä½œ** | **å¤šçº¿ç¨‹å¤§é‡æ“ä½œ** | **å•çº¿ç¨‹å¤§é‡æ“ä½œ** |


# <font style="color:#ECAA04;">String str = "i" ä¸ String str = new String("i") ä¸€æ ·å—ï¼Ÿ</font>
**<font style="color:#DF2A3F;">ä¸ä¸€æ ·</font>**

**å› ä¸ºå†…å­˜çš„åˆ†é…æ–¹å¼ä¸ä¸€æ ·ã€‚String str="i"çš„æ–¹å¼ï¼ŒJVMä¼šå°†å…¶åˆ†é…åˆ°å¸¸é‡æ± ä¸­ï¼›è€Œ String str=new String(â€œiâ€)æ–¹å¼ï¼Œåˆ™ä¼šè¢«åˆ†åˆ°å †å†…å­˜ä¸­ã€‚**

```java
@Test
public void stringDemo1() {
    String str1 = "i";
    String str2 = "i";
    String str3 = new String("i");
    System.out.println(str1 == str2);//true
    System.out.println(str2 == str3);//false
}
```

**<font style="color:#DF2A3F;">String str="i"</font>**** **

**Java è™šæ‹Ÿæœºä¼šå°†å…¶åˆ†é…åˆ°å¸¸é‡æ± ä¸­ï¼šå¸¸é‡æ± ä¸ä¼šé‡å¤åˆ›å»ºå¯¹è±¡ã€‚**

+ **åœ¨String str1="i"ä¸­ï¼ŒæŠŠiå€¼å­˜åœ¨å¸¸é‡æ± ï¼Œåœ°å€èµ‹ç»™str1ã€‚**
+ **String str2=â€œiâ€ï¼Œåˆ™ä¼šæŠŠiçš„åœ°å€èµ‹ç»™str2ï¼Œä½†æ˜¯iå¯¹è±¡ä¸ä¼šé‡æ–°åˆ›å»ºï¼Œä»–ä»¬å¼•ç”¨çš„æ˜¯åŒä¸€ä¸ªåœ°å€å€¼ï¼Œå…±äº«åŒä¸€ä¸ªiå†…å­˜ã€‚**

**<font style="color:#DF2A3F;">String str = new String(â€œiâ€)</font>**

**Java è™šæ‹Ÿæœºä¼šå°†å…¶åˆ†åˆ°å †å†…å­˜ä¸­ï¼šå †å†…å­˜ä¼šåˆ›å»ºæ–°çš„å¯¹è±¡ã€‚**

+ **String str3=new String(â€œiâ€)ï¼Œä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„iå¯¹è±¡ï¼Œç„¶åå°†æ–°å¯¹è±¡çš„åœ°å€å€¼èµ‹ç»™str3ã€‚è™½ç„¶str3å’Œstr1çš„å€¼ç›¸åŒä½†æ˜¯åœ°å€å€¼ä¸åŒã€‚**

# <font style="color:#ECAA04;">æ¥å£å’ŒæŠ½è±¡ç±»æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</font>
**æŠ½è±¡ç±»å’Œæ¥å£æ˜¯é¢å‘å¯¹è±¡ç¼–ç¨‹ä¸­ä¸¤ç§å¸¸è§çš„æŠ½è±¡æ¦‚å¿µï¼Œå®ƒä»¬æœ‰ä»¥ä¸‹å‡ ä¸ªåŒºåˆ«ï¼š**

## <font style="color:#DF2A3F;">å®šä¹‰å…³é”®å­—ä¸åŒ</font>
**æ¥å£ä½¿ç”¨å…³é”®å­— interface æ¥å®šä¹‰ã€‚ æŠ½è±¡ç±»ä½¿ç”¨å…³é”®å­— abstract æ¥å®šä¹‰ã€‚**

## <font style="color:#DF2A3F;">ç»§æ‰¿æˆ–å®ç°çš„å…³é”®å­—ä¸åŒ</font>
**æ¥å£ä½¿ç”¨ implements å…³é”®å­—å®šä¹‰å…¶å…·ä½“å®ç°ã€‚ æŠ½è±¡ç±»ä½¿ç”¨ extends å…³é”®å­—å®ç°ç»§æ‰¿ã€‚**

## <font style="color:#DF2A3F;">å­ç±»æ‰©å±•çš„æ•°é‡ä¸åŒ</font>
+ **æ¥å£çš„å®ç°ç±»å¯ä»¥æœ‰å¤šä¸ª**

![1689083756715-955badce-7fd4-4ed4-ab37-35c3aef2483f.png](./img/hATw4O-knQXenPBo/1689083756715-955badce-7fd4-4ed4-ab37-35c3aef2483f-217325.png)

+ **<font style="color:rgb(37, 41, 51);">æŠ½è±¡ç±»çš„å­ç±»ï¼Œåªèƒ½ç»§æ‰¿ä¸€ä¸ªæŠ½è±¡ç±»ï¼ŒæŠ½è±¡ç±»çš„å­ç±»ï¼Œåªèƒ½ç»§æ‰¿ä¸€ä¸ªæŠ½è±¡ç±»</font>**

![1689083796474-a151ab4c-0962-4810-bf5b-1151e938110a.png](./img/hATw4O-knQXenPBo/1689083796474-a151ab4c-0962-4810-bf5b-1151e938110a-072870.png)

**<font style="color:rgb(37, 41, 51);">åœ¨ Java è¯­è¨€ä¸­ï¼Œä¸€ä¸ªç±»åªèƒ½ç»§æ‰¿ä¸€ä¸ªçˆ¶ç±»ï¼ˆå•ç»§æ‰¿ï¼‰ï¼Œä½†å¯ä»¥å®ç°å¤šä¸ªæ¥å£ã€‚</font>**

## <font style="color:#DF2A3F;">å±æ€§è®¿é—®æ§åˆ¶ç¬¦ä¸åŒï¼Œæ–¹æ³•æ§åˆ¶ç¬¦ä¸åŒ</font>
+ **æ¥å£ä¸­å±æ€§çš„è®¿é—®æ§åˆ¶ç¬¦åªèƒ½æ˜¯publicï¼ˆæ¥å£ä¸­çš„å±æ€§é»˜è®¤æ˜¯ public static final ä¿®é¥°çš„ï¼‰**

![1689084379962-992d8a10-0da6-41fd-be1d-4ff3e8f80ed4.png](./img/hATw4O-knQXenPBo/1689084379962-992d8a10-0da6-41fd-be1d-4ff3e8f80ed4-671632.png)

+ **æŠ½è±¡ç±»ä¸­çš„å±æ€§è®¿é—®æ§åˆ¶ç¬¦æ— é™åˆ¶ï¼Œå¯ä¸ºä»»æ„æ§åˆ¶ç¬¦ã€‚**

![1689084113452-7c09fe08-c825-4ade-8874-91e66919d117.png](./img/hATw4O-knQXenPBo/1689084113452-7c09fe08-c825-4ade-8874-91e66919d117-071054.png)

# **<font style="color:#ECAA04;">ä»€ä¹ˆæ˜¯æµ…æ‹·è´å’Œæ·±æ‹·è´ï¼Ÿ</font>**
+ **<font style="color:#DF2A3F;">æµ…æ‹·è´ï¼š</font>****<font style="color:#74B602;">åªå¤åˆ¶</font>****<font style="color:#000000;">æŒ‡</font>****<font style="color:rgb(38, 38, 38);">å‘æŸä¸ª</font>****<font style="color:#74B602;">å¯¹è±¡çš„æŒ‡é’ˆ</font>****<font style="color:rgb(38, 38, 38);">ï¼Œè€Œä¸å¤åˆ¶å¯¹è±¡æœ¬èº«ï¼Œæ–°æ—§å¯¹è±¡</font>****<font style="color:#74B602;">å…±äº«ä¸€å—å†…å­˜</font>****<font style="color:rgb(38, 38, 38);">ï¼› </font>**
+ **<font style="color:#DF2A3F;">æ·±æ‹·è´ï¼š</font>****<font style="color:rgb(38, 38, 38);">å¤åˆ¶</font>****<font style="color:#000000;">å¹¶åˆ›å»ºä¸€ä¸ªä¸€æ‘¸ä¸€æ ·çš„å¯¹è±¡</font>****<font style="color:rgb(38, 38, 38);">ï¼Œ</font>****<font style="color:#74B602;">ä¸å…±äº«å†…å­˜</font>****<font style="color:rgb(38, 38, 38);">ï¼Œä¿®æ”¹æ–°å¯¹è±¡ï¼Œæ—§å¯¹è±¡ä¿æŒä¸å˜ï¼›</font>**

**<font style="color:#01B2BC;">æµ…æ‹·è´</font>****<font style="color:rgb(38, 38, 38);">  
</font>****<font style="color:rgb(38, 38, 38);">æ‹·è´å¯¹è±¡å’ŒåŸå§‹å¯¹è±¡çš„å¼•ç”¨ç±»å‹å¼•ç”¨åŒä¸€ä¸ªå¯¹è±¡ã€‚</font>**

```java
@Test
public void copyDemo1(){
    User user1 = new User(1,"baili", "baili.com");
    User user2 = user1; // æµ…æ‹·è´

    System.out.println("User 1: " + user1);
    System.out.println("User 2: " + user2);

    // åˆ†åˆ«ä¿®æ”¹userå¯¹è±¡çš„å±æ€§
    user1.setUsername("ç™¾é‡Œ");
    user2.setEmail("ç™¾é‡Œ.com");

    // è¾“å‡ºä¿®æ”¹åçš„ç»“æœ
    System.out.println("User 1: " + user1);
    System.out.println("User 2: " + user2);
}
```

**<font style="color:#01B2BC;">æ·±æ‹·è´</font>****<font style="color:rgb(38, 38, 38);">  
</font>****<font style="color:rgb(38, 38, 38);">æ‹·è´å¯¹è±¡å’ŒåŸå§‹å¯¹è±¡çš„å¼•ç”¨ç±»å‹å¼•ç”¨ä¸åŒå¯¹è±¡ã€‚</font>**

```java
package polo;

import java.util.ArrayList;
import java.util.List;

/**
 * @author ç™¾é‡Œ
 */
public class Person implements Cloneable {
    private String name;
    private int age;
    private List<String> hobbies;

    public Person(String name, int age, List<String> hobbies) {
        this.name = name;
        this.age = age;
        this.hobbies = hobbies;
    }

    // Getters and setters

    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }

    public int getAge() {
        return age;
    }

    public void setAge(int age) {
        this.age = age;
    }

    public List<String> getHobbies() {
        return hobbies;
    }

    public void setHobbies(List<String> hobbies) {
        this.hobbies = hobbies;
    }
    
    @Override
    public Person clone() throws CloneNotSupportedException {
        // æµ…æ‹·è´å¯¹è±¡
        Person clonedPerson = (Person) super.clone();
        // æ·±æ‹·è´ List
        clonedPerson.setHobbies(new ArrayList<>(hobbies));
        
        return clonedPerson;
    }

    @Override
    public String toString() {
        return "Person [name=" + name + ", age=" + age + ", hobbies=" + hobbies + "]";
    }
}

@Test
public void copyDemo2(){
    List<String> hobbies = new ArrayList<>();
    hobbies.add("Reading");
    hobbies.add("Gardening");
    Person person1 = new Person("baili", 30, hobbies);

    try {
        Person person2 = person1.clone(); // æ·±æ‹·è´

        System.out.println("Person 1: " + person1);
        System.out.println("Person 2: " + person2);

        // ä¿®æ”¹ person2 çš„å±æ€§
        person2.setName("ç™¾é‡Œ");
        person2.setAge(25);
        person2.getHobbies().add("Cooking");

        // è¾“å‡ºä¿®æ”¹åçš„ç»“æœ
        System.out.println("Person 1: " + person1);
        System.out.println("Person 2: " + person2);
    } catch (CloneNotSupportedException e) {
        e.printStackTrace();
    }
}
```

**<font style="color:rgb(38, 38, 38);">ä½¿ç”¨ clone() æ–¹æ³•æ¥æ‹·è´ä¸€ä¸ªå¯¹è±¡å³å¤æ‚åˆæœ‰é£é™©ï¼Œå®ƒä¼šæŠ›å‡ºå¼‚å¸¸ï¼Œå¹¶ä¸”è¿˜éœ€è¦ç±»å‹è½¬æ¢ã€‚Effective Java ä¹¦ä¸Šè®²åˆ°ï¼Œæœ€å¥½ä¸è¦å»ä½¿ç”¨ clone()ï¼Œå¯ä»¥ä½¿ç”¨æ‹·è´æ„é€ å‡½æ•°æˆ–è€…æ‹·è´å·¥å‚æ¥æ‹·è´ä¸€ä¸ªå¯¹è±¡ã€‚</font>**

**<font style="color:#01B2BC;">ä½¿ç”¨æ‹·è´æ„é€ å‡½æ•°ï¼š</font>**

```java
class Person {
    private String name;
    private int age;

    public Person(String name, int age) {
        this.name = name;
        this.age = age;
    }

    // æ‹·è´æ„é€ å‡½æ•°
    public Person(Person other) {
        this.name = other.name;
        this.age = other.age;
    }

    // Getters and setters
    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }

    public int getAge() {
        return age;
    }

    public void setAge(int age) {
        this.age = age;
    }

    @Override
    public String toString() {
        return "Person [name=" + name + ", age=" + age + "]";
    }
}

public class Main {
    public static void main(String[] args) {
        Person person1 = new Person("baili", 30);

        // ä½¿ç”¨æ‹·è´æ„é€ å‡½æ•°åˆ›å»º person2 å¯¹è±¡
        Person person2 = new Person(person1);

        System.out.println("Person 1: " + person1);
        System.out.println("Person 2: " + person2);

        // ä¿®æ”¹ person2 çš„å±æ€§
        person2.setName("BAILI");
        person2.setAge(25);

        // è¾“å‡ºä¿®æ”¹åçš„ç»“æœ
        System.out.println("Person 1: " + person1);
        System.out.println("Person 2: " + person2);
    }
}
```

**<font style="color:#01B2BC;">ä½¿ç”¨æ‹·è´å·¥å‚ï¼š</font>**

```java
class Person {
    private String name;
    private int age;

    public Person(String name, int age) {
        this.name = name;
        this.age = age;
    }

    // Getters and setters

    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }

    public int getAge() {
        return age;
    }

    public void setAge(int age) {
        this.age = age;
    }

    @Override
    public String toString() {
        return "Person [name=" + name + ", age=" + age + "]";
    }
}

class PersonFactory {
    public static Person createCopy(Person original) {
        // ä½¿ç”¨æ‹·è´æ„é€ å‡½æ•°åˆ›å»ºæ–°çš„å¯¹è±¡
        return new Person(original.getName(), original.getAge());
    }
}

public class Main {
    public static void main(String[] args) {
        Person person1 = new Person("bali", 30);

        // ä½¿ç”¨æ‹·è´å·¥å‚åˆ›å»º person2 å¯¹è±¡
        Person person2 = PersonFactory.createCopy(person1);

        System.out.println("Person 1: " + person1);
        System.out.println("Person 2: " + person2);

        // ä¿®æ”¹ person2 çš„å±æ€§
        person2.setName("BAILI");
        person2.setAge(25);

        // è¾“å‡ºä¿®æ”¹åçš„ç»“æœ
        System.out.println("Person 1: " + person1);
        System.out.println("Person 2: " + person2);
    }
}
```

# **<font style="color:#ECAA04;">Overloadã€Overrideã€Overwriteçš„åŒºåˆ«?</font>**
**åœ¨é¢å‘å¯¹è±¡ç¼–ç¨‹ä¸­ï¼Œæœ‰ä¸‰ä¸ªæ¦‚å¿µç»å¸¸ç”¨åˆ°ï¼šOverloadï¼ˆé‡è½½ï¼‰ã€Overrideï¼ˆé‡å†™ï¼‰å’ŒOverwriteï¼ˆè¦†ç›–ï¼‰,è¿™äº›æ¦‚å¿µæè¿°äº†ä¸åŒçš„æ–¹æ³•æˆ–å‡½æ•°ä¹‹é—´çš„å…³ç³»ã€‚**

**<font style="color:#01B2BC;">é‡è½½ï¼ˆOverloadï¼‰ï¼š</font>**

**<font style="color:#DF2A3F;">å®šä¹‰ï¼š</font>****åœ¨åŒä¸€ä¸ªç±»ä¸­ï¼Œå¯ä»¥å®šä¹‰å¤šä¸ªå…·æœ‰ç›¸åŒåç§°ä½†å‚æ•°åˆ—è¡¨ä¸åŒçš„æ–¹æ³•ï¼Œå®ƒä»¬è¢«ç§°ä¸ºæ–¹æ³•çš„é‡è½½ã€‚**

**<font style="color:#DF2A3F;">ç‰¹ç‚¹ï¼š</font>**

    - **æ–¹æ³•åç›¸åŒï¼Œå‚æ•°åˆ—è¡¨ä¸åŒã€‚**
    - **é‡è½½æ–¹æ³•å¯ä»¥æœ‰ä¸åŒçš„è¿”å›ç±»å‹ã€‚**
    - **é‡è½½æ–¹æ³•å¿…é¡»åœ¨åŒä¸€ä¸ªç±»ä¸­ã€‚**
    - **é‡è½½æ–¹æ³•çš„åŒºåˆ†ä¾æ®æ˜¯å‚æ•°çš„ä¸ªæ•°ã€ç±»å‹æˆ–è€…é¡ºåºã€‚**

**<font style="color:#DF2A3F;">ç¤ºä¾‹ï¼š</font>**

```java
public class Calculator {
    public int add(int a, int b) {
        return a + b;
    }

    public double add(double a, double b) {
        return a + b;
    }
}
```

**<font style="color:#01B2BC;">é‡å†™ï¼ˆOverrideï¼‰ï¼š</font>**

**<font style="color:#DF2A3F;">å®šä¹‰ï¼š</font>****å­ç±»ç»§æ‰¿è‡ªçˆ¶ç±»æ—¶ï¼Œå¯ä»¥å¯¹çˆ¶ç±»çš„æ–¹æ³•è¿›è¡Œé‡æ–°å®ç°ï¼Œè¿™è¢«ç§°ä¸ºæ–¹æ³•çš„é‡å†™ã€‚**

**<font style="color:#DF2A3F;">ç‰¹ç‚¹ï¼š</font>**

    - **å­ç±»ä¸­çš„æ–¹æ³•ä¸çˆ¶ç±»ä¸­çš„æ–¹æ³•å…·æœ‰ç›¸åŒçš„åç§°ã€å‚æ•°åˆ—è¡¨å’Œè¿”å›ç±»å‹ã€‚**
    - **å­ç±»ä¸­çš„æ–¹æ³•ä¸èƒ½æ¯”çˆ¶ç±»çš„æ–¹æ³•è®¿é—®æ€§æ›´ä¸¥æ ¼ã€‚**
    - **å­ç±»æ–¹æ³•æŠ›å‡ºçš„å¼‚å¸¸ä¸èƒ½æ¯”çˆ¶ç±»æ–¹æ³•æŠ›å‡ºçš„å¼‚å¸¸æ›´å¤šã€‚**
    - **å­ç±»æ–¹æ³•å¯ä»¥è¦†ç›–çˆ¶ç±»æ–¹æ³•çš„å®ç°ï¼Œæä¾›è‡ªå·±çš„å®ç°é€»è¾‘ã€‚**

**<font style="color:#DF2A3F;">ç¤ºä¾‹ï¼š</font>**

```java
class Animal {
    public void eat() {
        System.out.println("Animal is eating.");
    }
}

class Cat extends Animal {
    @Override
    public void eat() {
        System.out.println("Cat is eating.");
    }
}
```

**<font style="color:#01B2BC;">è¦†ç›–ï¼ˆOverwriteï¼‰ï¼š</font>**

**<font style="color:#DF2A3F;">å®šä¹‰ï¼š</font>****åœ¨æ–‡ä»¶æ“ä½œä¸­ï¼Œè¦†ç›–ï¼ˆOverwriteï¼‰é€šå¸¸æŒ‡çš„æ˜¯å°†å·²æœ‰çš„æ–‡ä»¶å†…å®¹æ›¿æ¢ä¸ºæ–°çš„å†…å®¹ã€‚**

**<font style="color:#DF2A3F;">ç‰¹ç‚¹ï¼š</font>**

    - **è¦†ç›–é€šå¸¸å‘ç”Ÿåœ¨æ–‡ä»¶å†™å…¥æ—¶ï¼Œç”¨æ–°çš„å†…å®¹è¦†ç›–åŸæœ‰çš„å†…å®¹ï¼Œä½¿å…¶è¢«æ›¿ä»£ã€‚**
    - **è¦†ç›–å¯èƒ½ä¼šå¯¼è‡´åŸæ–‡ä»¶çš„å†…å®¹ä¸¢å¤±ï¼Œå› æ­¤åœ¨è¿›è¡Œè¦†ç›–æ“ä½œæ—¶è¦å°å¿ƒã€‚**

**<font style="color:#DF2A3F;">ç¤ºä¾‹ï¼š</font>**

**å‡è®¾æœ‰ä¸€ä¸ªæ–‡ä»¶ "data.txt"ï¼Œé€šè¿‡è¦†ç›–æ“ä½œå¯ä»¥å°†è¯¥æ–‡ä»¶çš„å†…å®¹æ›¿æ¢ä¸ºæ–°çš„å†…å®¹ã€‚**

**<font style="color:#01B2BC;">æ€»ç»“ï¼š</font>**

    - **é‡è½½ï¼ˆOverloadï¼‰æŒ‡çš„æ˜¯åœ¨åŒä¸€ä¸ªç±»ä¸­å®šä¹‰å¤šä¸ªå…·æœ‰ç›¸åŒåç§°ä½†å‚æ•°åˆ—è¡¨ä¸åŒçš„æ–¹æ³•ã€‚**
    - **é‡å†™ï¼ˆOverrideï¼‰æŒ‡çš„æ˜¯å­ç±»ç»§æ‰¿çˆ¶ç±»å¹¶é‡æ–°å®ç°çˆ¶ç±»ä¸­çš„æ–¹æ³•ã€‚**
    - **è¦†ç›–ï¼ˆOverwriteï¼‰é€šå¸¸æŒ‡çš„æ˜¯åœ¨æ–‡ä»¶æ“ä½œä¸­ï¼Œå°†æ–‡ä»¶å†…å®¹æ›¿æ¢ä¸ºæ–°çš„å†…å®¹ã€‚**

# <font style="color:#ECAA04;">Exceptionå’ŒErroræœ‰ä»€ä¹ˆåŒºåˆ« ?</font>
**åœ¨Javaä¸­ï¼ŒExceptionå’ŒErroræ˜¯ä¸¤ä¸ªä¸åŒçš„ç±»ï¼Œå®ƒä»¬éƒ½****<font style="color:#74B602;">ç»§æ‰¿è‡ªThrowableç±»</font>****ã€‚ä¸‹é¢æ˜¯å®ƒä»¬ä¹‹é—´çš„åŒºåˆ«ï¼š**

**<font style="color:#01B2BC;">Exceptionï¼ˆå¼‚å¸¸ï¼‰ï¼š</font>**

    - **Exceptionè¡¨ç¤ºåœ¨ç¨‹åºæ‰§è¡Œè¿‡ç¨‹ä¸­å¯èƒ½å‡ºç°çš„å¯å¤„ç†çš„å¼‚å¸¸æƒ…å†µã€‚å®ƒä¸€èˆ¬ç”±ä»£ç é€»è¾‘é”™è¯¯ã€å¤–éƒ¨æ¡ä»¶å˜åŒ–ç­‰åŸå› å¼•èµ·ï¼Œå¯ä»¥é€šè¿‡é€‚å½“çš„å¤„ç†æªæ–½æ¥æ¢å¤æ­£å¸¸çš„ç¨‹åºæ‰§è¡Œã€‚Exceptionåˆ†ä¸ºä¸¤ç§ç±»å‹ï¼š**
        * **<font style="color:#ED740C;">å—æ£€å¼‚å¸¸ï¼ˆChecked Exceptionï¼‰</font>****ï¼šç¼–è¯‘å™¨è¦æ±‚å¿…é¡»åœ¨ä»£ç ä¸­æ˜¾å¼åœ°å¤„ç†å—æ£€å¼‚å¸¸ï¼Œå¦åˆ™ä»£ç æ— æ³•é€šè¿‡ç¼–è¯‘ã€‚å¸¸è§çš„å—æ£€å¼‚å¸¸åŒ…æ‹¬IOExceptionã€SQLExceptionç­‰ã€‚**
        * **<font style="color:#ED740C;">éå—æ£€å¼‚å¸¸ï¼ˆUnchecked Exceptionï¼‰</font>****ï¼šç¼–è¯‘å™¨å¯¹éå—æ£€å¼‚å¸¸ä¸å¼ºåˆ¶è¦æ±‚è¿›è¡Œå¤„ç†ï¼Œä½†å¯ä»¥é€‰æ‹©å¤„ç†æˆ–è€…å°†å…¶æŠ›ç»™ä¸Šå±‚è°ƒç”¨è€…å¤„ç†ã€‚å¸¸è§çš„éå—æ£€å¼‚å¸¸åŒ…æ‹¬NullPointerExceptionã€ArrayIndexOutOfBoundsExceptionç­‰ã€‚**
+ **<font style="color:#BA9BF2;">ç¤ºä¾‹ï¼š</font>**

```java
@Test
public void exceptionDemo() {
    int dividend = 10;
    int divisor = 0;
    int result;
    try {
        // é™¤é›¶æ“ä½œï¼Œä¼šæŠ›å‡ºArithmeticExceptionå¼‚å¸¸
        result = dividend / divisor;
        System.out.println("Result: " + result);
    } catch (ArithmeticException e) {
        System.out.println("Exception caught: " + e.getMessage());
    }
}
```

**<font style="color:#01B2BC;">Errorï¼ˆé”™è¯¯ï¼‰ï¼š</font>**

    - **Erroræ˜¯æŒ‡åº”ç”¨ç¨‹åºé€šå¸¸æ— æ³•å¤„ç†æˆ–æ¢å¤çš„ä¸¥é‡é—®é¢˜ã€‚**
    - **Erroré€šå¸¸è¡¨ç¤ºè™šæ‹Ÿæœºï¼ˆJVMï¼‰çš„é”™è¯¯çŠ¶æ€æˆ–ç³»ç»Ÿçº§é”™è¯¯ï¼Œä¾‹å¦‚OutOfMemoryErrorã€StackOverflowErrorç­‰ã€‚**
    - **Erroré€šå¸¸æ„å‘³ç€åº”ç”¨ç¨‹åºå¤„äºä¸å¯æ¢å¤çš„çŠ¶æ€ï¼Œå› æ­¤ä¸€èˆ¬ä¸è¢«æ•è·å’Œå¤„ç†ã€‚**
    - **ä¸å¼‚å¸¸ä¸åŒï¼ŒErroræ²¡æœ‰è§„å®šè¦æ±‚åº”ç”¨ç¨‹åºå¤„ç†æˆ–æ•è·å®ƒä»¬ã€‚**
+ **<font style="color:#BA9BF2;">ç¤ºä¾‹ï¼š	</font>**

```java
public static void recursiveMethod(int i) {
    if (i == 0) {
    	return;
	}
	// é€’å½’è°ƒç”¨è‡ªèº«ï¼Œä¼šå¯¼è‡´æ ˆæº¢å‡ºé”™è¯¯(StackOverflowError)
	recursiveMethod(i + 1);
}

@Test
public void errorDemo(){
    try {
        recursiveMethod(1);
    } catch (StackOverflowError e) {
        System.out.println("Error occurred: " + e.getMessage());
    }
}
```

**<font style="color:#01B2BC;">æ€»ç»“ï¼š</font>**

**Exceptionæ˜¯é¢„æœŸçš„ã€å¯ä»¥è¢«æ•è·å’Œå¤„ç†çš„å¼‚å¸¸ï¼Œè€ŒErroræ˜¯ä¸å¯æ¢å¤çš„ä¸¥é‡é—®é¢˜ï¼Œé€šå¸¸ç”±è™šæ‹Ÿæœºæˆ–ç³»ç»Ÿçº§é”™è¯¯å¼•èµ·ã€‚åœ¨å®é™…ç¼–ç¨‹ä¸­ï¼Œæˆ‘ä»¬åº”è¯¥æ ¹æ®æƒ…å†µé€‰æ‹©é€‚å½“çš„å¼‚å¸¸å¤„ç†å’Œé”™è¯¯å¤„ç†æœºåˆ¶ï¼Œä»¥ç¡®ä¿ç¨‹åºçš„ç¨³å®šæ€§å’Œå¯é æ€§ã€‚**

# <font style="color:#ECAA04;">Javaä¸­çš„IOæµçš„åˆ†ç±»ï¼Ÿè¯´å‡ºå‡ ä¸ªä½ ç†Ÿæ‚‰çš„å®ç°ç±»ï¼Ÿ</font>
**åœ¨Javaä¸­ï¼ŒIOæµå¯ä»¥æ ¹æ®å…¶åŠŸèƒ½å’Œä½œç”¨è¿›è¡Œåˆ†ç±»ã€‚ä¸»è¦åˆ†ä¸ºå››ç§ç±»å‹ï¼š****<font style="color:#74B602;">å­—èŠ‚æµ</font>****ã€****<font style="color:#74B602;">å­—ç¬¦æµ</font>****ã€****<font style="color:#74B602;">ç¼“å†²æµ</font>****å’Œ****<font style="color:#74B602;">å¯¹è±¡æµ</font>****ã€‚**

![ç”»æ¿](./img/hATw4O-knQXenPBo/1690191851842-fe61c2b4-3cbe-4a9e-bcd6-1438019ebcfc-921874.jpeg)

+ **<font style="color:#01B2BC;">å­—èŠ‚æµï¼ˆByte Streamï¼‰</font>****ï¼šä»¥****<font style="color:#74B602;">å­—èŠ‚ä¸ºå•ä½</font>****è¿›è¡Œè¯»å†™æ“ä½œçš„æµã€‚å­—èŠ‚æµé€šå¸¸ç”¨äºå¤„ç†****<font style="color:#74B602;">äºŒè¿›åˆ¶æ•°æ®</font>****æˆ–****<font style="color:#74B602;">å­—èŠ‚æµå½¢å¼çš„æ–‡æœ¬æ•°æ®</font>****ã€‚**
    - **InputStream****ï¼šå­—èŠ‚è¾“å…¥æµçš„æŠ½è±¡åŸºç±»ï¼Œæ˜¯æ‰€æœ‰å­—èŠ‚è¾“å…¥æµçš„è¶…ç±»ã€‚**
    - **OutputStream****ï¼šå­—èŠ‚è¾“å‡ºæµçš„æŠ½è±¡åŸºç±»ï¼Œæ˜¯æ‰€æœ‰å­—èŠ‚è¾“å‡ºæµçš„è¶…ç±»ã€‚**
    - **ä¸€äº›å®ç°ç±»åŒ…æ‹¬ï¼š****FileInputStream****ã€****FileOutputStream****ã€****ByteArrayInputStream****ã€****ByteArrayOutputStream****ç­‰ã€‚**
+ **<font style="color:#01B2BC;">å­—ç¬¦æµï¼ˆCharacter Streamï¼‰</font>****ï¼šä»¥****<font style="color:#74B602;">å­—ç¬¦ä¸ºå•ä½</font>****è¿›è¡Œè¯»å†™æ“ä½œçš„æµã€‚å­—ç¬¦æµé€šå¸¸ç”¨äº****<font style="color:#74B602;">å¤„ç†å­—ç¬¦</font>****æ•°æ®ï¼Œæ”¯æŒUnicodeç¼–ç ã€‚**
    - **Reader****ï¼šå­—ç¬¦è¾“å…¥æµçš„æŠ½è±¡åŸºç±»ï¼Œæ˜¯æ‰€æœ‰å­—ç¬¦è¾“å…¥æµçš„è¶…ç±»ã€‚**
    - **Writer****ï¼šå­—ç¬¦è¾“å‡ºæµçš„æŠ½è±¡åŸºç±»ï¼Œæ˜¯æ‰€æœ‰å­—ç¬¦è¾“å‡ºæµçš„è¶…ç±»ã€‚**
    - **ä¸€äº›å®ç°ç±»åŒ…æ‹¬ï¼š****FileReader****ã€****FileWriter****ã€****BufferedReader****ã€****PrintWriter****ç­‰ã€‚**
+ **<font style="color:#01B2BC;">ç¼“å†²æµï¼ˆBuffered Streamï¼‰</font>****ï¼šæä¾›äº†****<font style="color:#74B602;">ç¼“å†²åŠŸèƒ½</font>****ï¼Œå¯ä»¥å‡å°‘å®é™…IOæ“ä½œçš„æ¬¡æ•°ï¼Œ****<font style="color:#74B602;">æé«˜è¯»å†™æ•ˆç‡</font>****ã€‚**
    - **BufferedInputStream****ï¼šå­—èŠ‚ç¼“å†²è¾“å…¥æµï¼Œè£…é¥°å™¨æ¨¡å¼å®ç°ã€‚**
    - **BufferedOutputStream****ï¼šå­—èŠ‚ç¼“å†²è¾“å‡ºæµï¼Œè£…é¥°å™¨æ¨¡å¼å®ç°ã€‚**
    - **BufferedReader****ï¼šå­—ç¬¦ç¼“å†²è¾“å…¥æµï¼Œè£…é¥°å™¨æ¨¡å¼å®ç°ã€‚**
    - **BufferedWriter****ï¼šå­—ç¬¦ç¼“å†²è¾“å‡ºæµï¼Œè£…é¥°å™¨æ¨¡å¼å®ç°ã€‚**
+ **<font style="color:#01B2BC;">å¯¹è±¡æµï¼ˆObject Streamï¼‰</font>****ï¼šç”¨äº****<font style="color:#74B602;">è¯»å†™Javaå¯¹è±¡</font>****çš„æµã€‚å¯ä»¥æ–¹ä¾¿åœ°å°†å¯¹è±¡****<font style="color:#74B602;">åºåˆ—åŒ–å’Œååºåˆ—åŒ–</font>****åˆ°æ–‡ä»¶æˆ–ç½‘ç»œä¸­ã€‚**
    - **ObjectInputStream****ï¼šå¯¹è±¡è¾“å…¥æµï¼Œç”¨äºä»æµä¸­è¯»å–å¯¹è±¡ã€‚**
    - **ObjectOutputStream****ï¼šå¯¹è±¡è¾“å‡ºæµï¼Œç”¨äºå°†å¯¹è±¡å†™å…¥æµã€‚**

**é™¤äº†ä»¥ä¸Šåˆ—ä¸¾çš„å®ç°ç±»ä»¥å¤–ï¼Œè¿˜æœ‰å¾ˆå¤šå…¶ä»–çš„IOæµå®ç°ç±»ï¼Œå¦‚DataInputStreamã€DataOutputStreamã€PrintStreamç­‰ï¼Œå®ƒä»¬æä¾›äº†ä¸åŒçš„åŠŸèƒ½å’Œç‰¹æ€§ã€‚**

+ **<font style="color:#01B2BC;">æ€»ç»“</font>****ï¼š****<font style="color:rgb(38, 38, 38);">æ—¥å¸¸ä½¿ç”¨æ ¹æ®éœ€è¦é€‰æ‹©åˆé€‚çš„æµç±»å‹è¿›è¡Œæ•°æ®çš„è¯»å–å’Œå†™å…¥æ“ä½œã€‚</font>**
    - **å­—èŠ‚æµé€‚åˆå¤„ç†äºŒè¿›åˆ¶æ•°æ®ã€‚**
    - **å­—ç¬¦æµé€‚åˆå¤„ç†æ–‡æœ¬æ•°æ®ã€‚**
    - **é€šè¿‡ç¼“å†²æµå¯ä»¥æé«˜è¯»å†™æ•ˆç‡ï¼Œå‡å°‘å¯¹åº•å±‚èµ„æºçš„è®¿é—®æ¬¡æ•°ã€‚**

# <font style="color:#ECAA04;">å¸¸è§çš„å¼‚å¸¸ç±»æœ‰å“ªäº›ï¼Ÿ</font>
![1739968598268-a5cb710e-a97b-4149-ba41-c1a7c794b99c.png](./img/hATw4O-knQXenPBo/1739968598268-a5cb710e-a97b-4149-ba41-c1a7c794b99c-900668.png)

**åœ¨Javaä¸­ï¼Œæœ‰ä¸€äº›å¸¸è§çš„å¼‚å¸¸ç±»ï¼Œå¯ä»¥æ ¹æ®å…¶ç‰¹æ€§å’Œä½¿ç”¨åœºæ™¯è¿›è¡Œåˆ†ç±»ã€‚ä»¥ä¸‹æ˜¯ä¸€äº›å¸¸è§çš„å¼‚å¸¸ç±»ï¼š**

**<font style="color:#01B2BC;">RuntimeExceptionï¼ˆè¿è¡Œæ—¶å¼‚å¸¸ï¼‰ï¼š</font>**

    - **<font style="color:#DF2A3F;">NullPointerException</font>****ï¼šç©ºæŒ‡é’ˆå¼‚å¸¸ï¼Œå½“å¯¹ä¸€ä¸ªå¯¹è±¡å¼•ç”¨è°ƒç”¨æ–¹æ³•æˆ–è®¿é—®å±æ€§æ—¶ï¼Œå¯¹è±¡å¼•ç”¨ä¸ºç©ºã€‚**
    - **ArrayIndexOutOfBoundsExceptionï¼šæ•°ç»„****<font style="color:#74B602;">ä¸‹æ ‡è¶Šç•Œ</font>****å¼‚å¸¸ï¼Œå½“å°è¯•è®¿é—®æ•°ç»„çš„ä¸å­˜åœ¨çš„ç´¢å¼•æ—¶æŠ›å‡ºã€‚**
    - **<font style="color:#DF2A3F;">IllegalArgumentException</font>****ï¼šéæ³•å‚æ•°å¼‚å¸¸ï¼Œå½“ä¼ é€’ç»™æ–¹æ³•çš„å‚æ•°ä¸åˆæ³•æ—¶æŠ›å‡ºã€‚**
    - **å–æˆ–**

**<font style="color:#01B2BC;">IOExceptionï¼ˆè¾“å…¥è¾“å‡ºå¼‚å¸¸ï¼‰ï¼š</font>**

    - **<font style="color:#DF2A3F;">FileNotFoundException</font>****ï¼šæ–‡ä»¶æœªæ‰¾åˆ°å¼‚å¸¸ï¼Œå½“å°è¯•æ‰“å¼€æˆ–è¯»å–ä¸å­˜åœ¨çš„æ–‡ä»¶æ—¶æŠ›å‡ºã€‚**
    - **EOFExceptionï¼šæ–‡ä»¶ç»“æŸå¼‚å¸¸ï¼Œå½“ä»æ•°æ®æµè¯»å–æ•°æ®æ—¶åˆ°è¾¾æ–‡ä»¶æœ«å°¾æ—¶ï¼Œè€Œä½ è¿˜åœ¨è¯•å›¾è¯»å–æ›´å¤šçš„æ•°æ®æŠ›å‡ºã€‚**
    - **SocketExceptionï¼šå¥—æ¥å­—å¼‚å¸¸ï¼Œå½“ä¸å¥—æ¥å­—ç›¸å…³çš„æ“ä½œå¤±è´¥æ—¶æŠ›å‡ºã€‚**

**<font style="color:#01B2BC;">SQLExceptionï¼ˆæ•°æ®åº“å¼‚å¸¸ï¼‰ï¼š</font>**

    - **<font style="color:#DF2A3F;">SQLSyntaxErrorException</font>****ï¼šSQLè¯­æ³•é”™è¯¯å¼‚å¸¸ï¼Œå½“æ‰§è¡ŒSQLè¯­å¥æ—¶é‡åˆ°è¯­æ³•é”™è¯¯æ—¶æŠ›å‡ºã€‚**
    - **DataAccessExceptionï¼š****<font style="color:#74B602;">æ•°æ®è®¿é—®å¼‚å¸¸</font>****ï¼Œå½“è®¿é—®æ•°æ®åº“æˆ–æ•°æ®å­˜å‚¨å‡ºç°é—®é¢˜æ—¶æŠ›å‡ºã€‚**

**<font style="color:#01B2BC;">ClassNotFoundExceptionï¼š</font>**

    - **ç±»æœªæ‰¾åˆ°å¼‚å¸¸ï¼Œå½“å°è¯•åŠ è½½ä¸å­˜åœ¨çš„ç±»æ—¶æŠ›å‡ºã€‚**

**å®é™…ä¸Šåœ¨Javaä¸­è¿˜æœ‰å¾ˆå¤šå…¶ä»–çš„å¼‚å¸¸ç±»ï¼Œäº†è§£è¿™äº›å¼‚å¸¸ç±»å¯ä»¥å¸®åŠ©æˆ‘ä»¬æ›´å¥½åœ°è¿›è¡Œå¼‚å¸¸å¤„ç†å’Œé”™è¯¯å¤„ç†ï¼Œæé«˜ç¨‹åºçš„å¯é æ€§å’Œå¯ç»´æŠ¤æ€§ã€‚**

# <font style="color:#ECAA04;">è¯´ä¸‹å¯¹JVMå†…å­˜æ¨¡å‹çš„ç†è§£</font>
**JVM å†…å­˜åŒºåŸŸæœ€ç²—ç•¥çš„åˆ’åˆ†å¯ä»¥åˆ†ä¸º****<font style="color:#74B602;">å †</font>****å’Œ****<font style="color:#74B602;">æ ˆ</font>****ï¼Œå½“ç„¶ï¼ŒæŒ‰ç…§è™šæ‹Ÿæœºè§„èŒƒï¼Œå¯ä»¥åˆ’åˆ†ä¸ºä»¥ä¸‹å‡ ä¸ªåŒºåŸŸï¼š**

![1695278627789-8b134b0f-8ee3-4b86-ace0-1fcad9db43d7.png](./img/hATw4O-knQXenPBo/1695278627789-8b134b0f-8ee3-4b86-ace0-1fcad9db43d7-060377.png)

**JVM å†…å­˜åˆ†ä¸º****<font style="color:#74B602;">çº¿ç¨‹ç§æœ‰åŒº</font>****å’Œ****<font style="color:#74B602;">çº¿ç¨‹å…±äº«åŒº</font>****ï¼Œå…¶ä¸­æ–¹æ³•åŒºå’Œå †æ˜¯çº¿ç¨‹å…±äº«åŒºï¼Œè™šæ‹Ÿæœºæ ˆã€æœ¬åœ°æ–¹æ³•æ ˆå’Œç¨‹åºè®¡æ•°å™¨æ˜¯çº¿ç¨‹éš”ç¦»çš„æ•°æ®åŒºã€‚**

**<font style="color:#1DC0C9;">1ï¼‰ç¨‹åºè®¡æ•°å™¨</font>**

**ç¨‹åºè®¡æ•°å™¨æ˜¯ä¸€å—è¾ƒå°çš„å†…å­˜åŒºåŸŸï¼Œå®ƒæ˜¯****<font style="color:#74B602;">çº¿ç¨‹ç§æœ‰çš„</font>****ã€‚åœ¨å¤šçº¿ç¨‹ç¯å¢ƒä¸­ï¼Œæ¯ä¸ªçº¿ç¨‹éƒ½æœ‰ä¸€ä¸ªç‹¬ç«‹çš„ç¨‹åºè®¡æ•°å™¨ï¼Œç”¨äºæŒ‡ç¤ºå½“å‰çº¿ç¨‹æ‰§è¡Œçš„å­—èŠ‚ç æŒ‡ä»¤åœ°å€ã€‚**

**<font style="color:#1DC0C9;">2ï¼‰Java è™šæ‹Ÿæœºæ ˆ</font>**

**æ¯ä¸ªçº¿ç¨‹åœ¨è¿è¡Œæ—¶éƒ½ä¼šåˆ›å»ºä¸€ä¸ªå¯¹åº”çš„è™šæ‹Ÿæœºæ ˆã€‚æ¯ä¸ªæ–¹æ³•åœ¨æ‰§è¡Œçš„åŒæ—¶éƒ½ä¼šåˆ›å»ºä¸€ä¸ªæ ˆå¸§ï¼Œæ ˆå¸§ä¸­ä¿å­˜äº†****<font style="color:#74B602;">å±€éƒ¨å˜é‡è¡¨</font>****ã€****<font style="color:#74B602;">æ“ä½œæ•°æ ˆ</font>****ã€****<font style="color:#74B602;">åŠ¨æ€é“¾æ¥</font>****ã€****<font style="color:#74B602;">æ–¹æ³•å‡ºå£</font>****ç­‰ä¿¡æ¯ã€‚æ ˆå¸§éšç€æ–¹æ³•çš„è°ƒç”¨å’Œè¿”å›è€Œå…¥æ ˆå’Œå‡ºæ ˆã€‚**

**<font style="color:#1DC0C9;">3ï¼‰æœ¬åœ°æ–¹æ³•æ ˆ</font>**

**æœ¬åœ°æ–¹æ³•æ ˆä¸è™šæ‹Ÿæœºæ ˆæ‰€å‘æŒ¥çš„ä½œç”¨æ˜¯éå¸¸ç›¸ä¼¼çš„ï¼Œå…¶åŒºåˆ«æ˜¯è™šæ‹Ÿæœºæ ˆä¸ºè™šæ‹Ÿæœºæ‰§è¡Œ Java æ–¹æ³•ï¼ˆä¹Ÿå°±æ˜¯å­—èŠ‚ç ï¼‰æœåŠ¡ï¼Œè€Œæœ¬åœ°æ–¹æ³•æ ˆåˆ™æ˜¯ä¸ºè™šæ‹Ÿæœºä½¿ç”¨åˆ°çš„æœ¬åœ°ï¼ˆNativeï¼‰æ–¹æ³•æœåŠ¡ã€‚**

**<font style="color:#1DC0C9;">4ï¼‰Java å †</font>**

**å †æ˜¯Javaè™šæ‹Ÿæœºç®¡ç†çš„æœ€å¤§çš„ä¸€å—å†…å­˜åŒºåŸŸã€‚æ‰€æœ‰é€šè¿‡newå…³é”®å­—åˆ›å»ºçš„å¯¹è±¡éƒ½ä¼šè¢«åˆ†é…åˆ°å †ä¸­ã€‚å †æ˜¯è¢«****<font style="color:#74B602;">æ‰€æœ‰çº¿ç¨‹å…±äº«</font>****çš„ï¼Œåœ¨è™šæ‹Ÿæœºå¯åŠ¨æ—¶è¢«åˆ›å»ºã€‚å †è¢«åˆ’åˆ†ä¸º****<font style="color:#74B602;">æ–°ç”Ÿä»£</font>****å’Œ****<font style="color:#74B602;">è€å¹´ä»£</font>****ä¸¤ä¸ªåŒºåŸŸã€‚**

+ **<font style="color:#117CEE;">æ–°ç”Ÿä»£ï¼š</font>****æ–°åˆ›å»ºçš„å¯¹è±¡é¦–å…ˆè¢«åˆ†é…åˆ°æ–°ç”Ÿä»£çš„EdenåŒºï¼Œå½“EdenåŒºæ»¡æ—¶è§¦å‘Minor GCï¼Œå¹¶ä¸”æ ¹æ®åˆ†ä»£æ”¶é›†ç†è®ºï¼Œå°†å­˜æ´»çš„å¯¹è±¡å¤åˆ¶åˆ°SurvivoråŒºã€‚ç»è¿‡å¤šæ¬¡Minor GCåä»ç„¶å­˜æ´»çš„å¯¹è±¡ä¼šè¢«ç§»åŠ¨åˆ°è€å¹´ä»£ã€‚**
+ **<font style="color:#117CEE;">è€å¹´ä»£ï¼š</font>****å¤§éƒ¨åˆ†å­˜æ´»æ—¶é—´è¾ƒé•¿çš„å¯¹è±¡ä¼šè¢«åˆ†é…åˆ°è€å¹´ä»£ã€‚å½“è€å¹´ä»£æ»¡æ—¶è§¦å‘Major GCï¼ˆä¹Ÿç§°ä¸ºFull GCï¼‰ï¼Œå¹¶ä¸”è¿›è¡Œå®Œæ•´çš„åƒåœ¾å›æ”¶æ“ä½œã€‚**

**<font style="color:#1DC0C9;">5ï¼‰æ–¹æ³•åŒº</font>**

**æ–¹æ³•åŒºæ˜¯æ¯”è¾ƒç‰¹åˆ«çš„ä¸€å—åŒºåŸŸï¼Œå’Œå †ç±»ä¼¼ï¼Œå®ƒä¹Ÿæ˜¯å„ä¸ª****<font style="color:#74B602;">çº¿ç¨‹å…±äº«çš„</font>****å†…å­˜åŒºåŸŸï¼Œç”¨äºå­˜å‚¨å·²è¢«è™šæ‹ŸæœºåŠ è½½çš„ç±»å‹ä¿¡æ¯ã€å¸¸é‡ã€é™æ€å˜é‡ã€å³æ—¶ç¼–è¯‘å™¨ç¼–è¯‘åçš„ä»£ç ç¼“å­˜ç­‰æ•°æ®ã€‚**

# <font style="color:#ECAA04;">å¯¹è±¡åˆ›å»ºçš„è¿‡ç¨‹äº†è§£å—ï¼Ÿ</font>
![1695285250201-3f8e70a0-3299-4f2b-bd7b-30befa9d8689.png](./img/hATw4O-knQXenPBo/1695285250201-3f8e70a0-3299-4f2b-bd7b-30befa9d8689-179485.png)

**åœ¨Javaä¸­ï¼Œå¯¹è±¡çš„åˆ›å»ºä¸»è¦åŒ…æ‹¬ä»¥ä¸‹å‡ ä¸ªæ­¥éª¤ï¼š**

+ **<font style="color:#DF2A3F;">ç±»åŠ è½½ï¼š</font>****é¦–å…ˆï¼Œ****<font style="color:#74B602;">JVMä¼šä»ç±»è·¯å¾„ä¸­åŠ è½½éœ€è¦åˆ›å»ºçš„å¯¹è±¡çš„ç±»ã€‚</font>****å¦‚æœç±»è¿˜æ²¡æœ‰è¢«åŠ è½½ï¼ŒJVMä¼šæ ¹æ®ç±»çš„å…¨é™å®šåæ‰¾åˆ°å¯¹åº”çš„å­—èŠ‚ç æ–‡ä»¶ï¼Œå¹¶åŠ è½½åˆ°å†…å­˜ä¸­ã€‚**
+ **<font style="color:#DF2A3F;">åˆ†é…å†…å­˜ï¼š</font>****ä¸€æ—¦ç±»è¢«åŠ è½½ï¼ŒJVMä¼šåœ¨å †ä¸­åˆ†é…å†…å­˜æ¥å­˜å‚¨å¯¹è±¡çš„å®ä¾‹æ•°æ®ã€‚åœ¨å †ä¸­ç”Ÿæˆçš„å†…å­˜åœ°å€å°†ä½œä¸ºå¯¹è±¡çš„å¼•ç”¨ã€‚**
+ **<font style="color:#DF2A3F;">åˆå§‹åŒ–é›¶å€¼ï¼š</font>****åœ¨åˆ†é…å†…å­˜åï¼Œ****<font style="color:#74B602;">JVMä¼šå¯¹åˆ†é…çš„å†…å­˜è¿›è¡Œåˆå§‹åŒ–</font>****ã€‚åŸºæœ¬æ•°æ®ç±»å‹çš„å­—æ®µä¼šè¢«åˆå§‹åŒ–ä¸ºé»˜è®¤å€¼ï¼ˆä¾‹å¦‚ï¼Œintç±»å‹åˆå§‹åŒ–ä¸º0ï¼‰ï¼Œè€Œå¼•ç”¨ç±»å‹çš„å­—æ®µä¼šè¢«åˆå§‹åŒ–ä¸ºnullã€‚**
+ **<font style="color:#DF2A3F;">è®¾ç½®å¯¹è±¡å¤´ï¼š</font>****åœ¨å¯¹è±¡çš„å®ä¾‹æ•°æ®ä¹‹å‰ï¼ŒJVMä¼šè®¾ç½®å¯¹è±¡å¤´ï¼Œ****<font style="color:#74B602;">ç”¨äºå­˜å‚¨å¯¹è±¡çš„å…ƒä¿¡æ¯</font>****ï¼Œå¦‚****<font style="color:#74B602;">å“ˆå¸Œç </font>****ã€****<font style="color:#74B602;">GCä¿¡æ¯</font>****ç­‰ã€‚å¯¹è±¡å¤´çš„å¤§å°ç”±JVMçš„å®ç°å†³å®šã€‚**
+ **<font style="color:#DF2A3F;">æ‰§è¡Œæ„é€ å‡½æ•°ï¼š</font>****ä¸€æ—¦å¯¹è±¡çš„å†…å­˜ç©ºé—´å‡†å¤‡å¥½ï¼Œå¹¶ä¸”å¯¹è±¡å¤´è®¾ç½®å®Œæ¯•ï¼ŒJVMå°±ä¼šè°ƒç”¨å¯¹è±¡çš„æ„é€ å‡½æ•°æ¥å®Œæˆå¯¹è±¡çš„åˆå§‹åŒ–è¿‡ç¨‹ã€‚æ„é€ å‡½æ•°ä¼šå¯¹å¯¹è±¡çš„å®ä¾‹å­—æ®µè¿›è¡Œåˆå§‹åŒ–ï¼Œå¯ä»¥æ‰§è¡Œå…¶ä»–å¿…è¦çš„æ“ä½œã€‚**
+ **<font style="color:#DF2A3F;">è¿”å›å¯¹è±¡å¼•ç”¨ï¼š</font>****å½“æ„é€ å‡½æ•°æ‰§è¡Œå®Œæ¯•åï¼Œå¯¹è±¡çš„çŠ¶æ€å°±è¢«å®Œå…¨åˆå§‹åŒ–äº†ã€‚æ­¤æ—¶ï¼ŒJVMä¼šè¿”å›å¯¹è±¡çš„å¼•ç”¨ï¼Œå¯ä»¥å°†è¯¥å¼•ç”¨èµ‹å€¼ç»™å˜é‡ï¼Œä»¥ä¾¿åç»­ä½¿ç”¨å¯¹è±¡ã€‚**

# <font style="color:#ECAA04;">ä»€ä¹ˆæ˜¯æŒ‡é’ˆç¢°æ’å’Œç©ºé—²åˆ—è¡¨ï¼Ÿ</font>
**æŒ‡é’ˆç¢°æ’ï¼ˆPointer Bumpingï¼‰å’Œç©ºé—²åˆ—è¡¨ï¼ˆFree Listï¼‰åˆ†åˆ«æ˜¯å†…å­˜åˆ†é…ç­–ç•¥å’Œå†…å­˜ç®¡ç†ç­–ç•¥ï¼Œ****<font style="color:#74B602;">å¸¸ç”¨äºæè¿°åŠ¨æ€å†…å­˜åˆ†é…çš„è¿‡ç¨‹</font>****ã€‚**

![1695298578382-170d4b35-b40b-4724-ba6c-7e2944e61382.png](./img/hATw4O-knQXenPBo/1695298578382-170d4b35-b40b-4724-ba6c-7e2944e61382-586361.png)![1695298586541-d9a08e0e-8944-4f95-918d-f88d4eeb1f10.png](./img/hATw4O-knQXenPBo/1695298586541-d9a08e0e-8944-4f95-918d-f88d4eeb1f10-066620.png)

1. **<font style="color:#DF2A3F;">æŒ‡é’ˆç¢°æ’ï¼ˆPointer Bumpingï¼‰</font>****ï¼šæŒ‡é’ˆç¢°æ’æ˜¯ä¸€ç§****<font style="color:#74B602;">å†…å­˜åˆ†é…ç­–ç•¥</font>****ï¼Œé€šå¸¸ç”¨äº****<font style="color:#117CEE;">å®ç°å›ºå®šå¤§å°çš„å¯¹è±¡çš„åˆ†é…</font>****ã€‚**
    1. **åœ¨****<font style="color:#74B602;">æŒ‡é’ˆç¢°æ’</font>****ä¸­ï¼Œ****<font style="color:#74B602;">å†…å­˜è¢«çœ‹ä½œæ˜¯ä¸€ä¸ªè¿ç»­çš„å—</font>****ï¼Œåˆ†é…å™¨ä½¿ç”¨ä¸€ä¸ªæŒ‡é’ˆæ¥è¡¨ç¤ºå½“å‰å¯ç”¨çš„å†…å­˜ä½ç½®ï¼Œ**
    2. **å½“æœ‰æ–°çš„å¯¹è±¡****<font style="color:#74B602;">éœ€è¦åˆ†é…</font>****æ—¶ï¼Œåˆ†é…å™¨ä¼šå°†æŒ‡é’ˆå‘å‰ç§»åŠ¨å¯¹åº”çš„å­—èŠ‚å¤§å°ï¼Œåœ¨ç§»åŠ¨æŒ‡é’ˆçš„åŒæ—¶ï¼Œä¹Ÿä¼šæ›´æ–°å¯ç”¨å†…å­˜çš„ä½ç½®ä¿¡æ¯ã€‚**
    3. **è¿™ç§ç­–ç•¥****<font style="color:#74B602;">è¦æ±‚å†…å­˜ç©ºé—´</font>****æ˜¯****<font style="color:#74B602;">è¿ç»­</font>****çš„ï¼Œå¹¶ä¸”****<font style="color:#74B602;">å¿…é¡»</font>****æŒ‰ç…§****<font style="color:#74B602;">ç›¸åŒçš„å¤§å°</font>****è¿›è¡Œ****<font style="color:#74B602;">åˆ†é…</font>****ï¼Œå› æ­¤ä¸»è¦é€‚ç”¨äºé™æ€æˆ–å›ºå®šå¤§å°çš„å†…å­˜åˆ†é…åœºæ™¯ã€‚**
2. **<font style="color:#DF2A3F;">ç©ºé—²åˆ—è¡¨ï¼ˆFree Listï¼‰</font>****ï¼šç©ºé—²åˆ—è¡¨æ˜¯ä¸€ç§****<font style="color:#74B602;">å†…å­˜ç®¡ç†ç­–ç•¥</font>****ï¼Œé€šå¸¸ç”¨äº****<font style="color:#117CEE;">å®ç°å¯å˜å¤§å°çš„å¯¹è±¡çš„åˆ†é…</font>****ã€‚**
    1. **åœ¨****<font style="color:#74B602;">ç©ºé—²åˆ—è¡¨</font>****ä¸­ï¼Œå†…å­˜è¢«åˆ’åˆ†ä¸ºå¤šä¸ªå—ï¼Œæ¯ä¸ªå—éƒ½æœ‰ä¸€ä¸ªå¤´éƒ¨ä¿¡æ¯æ¥è®°å½•å…¶çŠ¶æ€ï¼ˆåˆ†é…æˆ–ç©ºé—²ï¼‰å’Œå¤§å°ã€‚**
    2. **å½“æœ‰æ–°çš„å¯¹è±¡****<font style="color:#74B602;">éœ€è¦åˆ†é…æ—¶</font>****ï¼Œåˆ†é…å™¨ä¼šéå†ç©ºé—²åˆ—è¡¨ï¼Œå¯»æ‰¾èƒ½å¤Ÿå®¹çº³è¯¥å¯¹è±¡å¤§å°çš„ç©ºé—²å—ï¼Œå¹¶è¿›è¡Œåˆ†é…ã€‚**
    3. **<font style="color:#74B602;">åˆ†é…å</font>****ï¼Œè¯¥å—ä¼šä»ç©ºé—²åˆ—è¡¨ä¸­ç§»é™¤æˆ–è¿›è¡Œç›¸åº”çš„æ›´æ–°ã€‚**
    4. **å½“å¯¹è±¡è¢«****<font style="color:#74B602;">é‡Šæ”¾æ—¶</font>****ï¼Œåˆ†é…å™¨å°†å…¶å¯¹åº”çš„å†…å­˜å—æ ‡è®°ä¸ºç©ºé—²ï¼Œå¹¶å°†å…¶æ·»åŠ åˆ°ç©ºé—²åˆ—è¡¨ä¸­ï¼Œä»¥ä¾¿åç»­çš„åˆ†é…æ“ä½œä½¿ç”¨ã€‚**
    5. **è¿™ç§ç­–ç•¥å¯ä»¥æ›´çµæ´»åœ°å¤„ç†å¯å˜å¤§å°çš„å†…å­˜åˆ†é…éœ€æ±‚ã€‚**

# <font style="color:#ECAA04;">JVMåˆ›å»ºå¯¹è±¡æ—¶ï¼Œå †ä¼šå‘ç”ŸæŠ¢å å—ï¼Ÿ</font>
![1694695630880-f1d49e99-a72b-450b-9954-95e4926e9440.png](./img/hATw4O-knQXenPBo/1694695630880-f1d49e99-a72b-450b-9954-95e4926e9440-299078.png)

**<font style="color:#117CEE;">æœ‰å¯èƒ½ä¼š</font>******

**åœ¨JVMä¸­ï¼Œå½“å¤šä¸ªçº¿ç¨‹åŒæ—¶æ‰§è¡Œnewæ“ä½œåˆ›å»ºå¯¹è±¡æ—¶ï¼Œ****<font style="color:#74B602;">ç†è®ºä¸Šæ˜¯å­˜åœ¨å¯èƒ½å‘ç”Ÿå †çš„æŠ¢å æƒ…å†µçš„</font>****ã€‚å…·ä½“æ˜¯å¦å‘ç”ŸæŠ¢å å–å†³äºJVMçš„å®ç°å’Œæ“ä½œç³»ç»Ÿçš„è°ƒåº¦ç­–ç•¥ã€‚**

**<font style="color:#DF2A3F;">ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œ</font>****JVMä½¿ç”¨äº†å„ç§æœºåˆ¶æ¥ç¡®ä¿å †çš„çº¿ç¨‹å®‰å…¨æ€§ï¼Œä»¥é¿å…å¯¹å †å†…å­˜çš„æŠ¢å é—®é¢˜ã€‚æ¯”å¦‚åœ¨å¯¹è±¡åˆ†é…çš„è¿‡ç¨‹ä¸­ï¼ŒJVMä¼šä¸º****<font style="color:#74B602;">æ¯ä¸ªçº¿ç¨‹åˆ†é…ç‹¬ç«‹çš„å †å†…å­˜åŒºåŸŸ</font>****ï¼Œçº¿ç¨‹é—´ä¸ä¼šäº‰å¤ºåŒä¸€å—å†…å­˜åŒºåŸŸã€‚è¿™æ ·ï¼Œåœ¨å¤šçº¿ç¨‹ç¯å¢ƒä¸­ï¼Œä¸åŒçº¿ç¨‹å¯ä»¥å¹¶è¡Œåœ°åˆ›å»ºå¯¹è±¡ï¼Œè€Œäº’ä¸å¹²æ‰°ã€‚**

**<font style="color:#DF2A3F;">ç„¶è€Œï¼Œ</font>****å¦‚æœåœ¨æŸäº›ç‰¹æ®Šæƒ…å†µä¸‹ï¼Œ****<font style="color:#74B602;">å¤šä¸ªçº¿ç¨‹åŒæ—¶è¯·æ±‚åˆ†é…è¾ƒå¤§å†…å­˜çš„å¯¹è±¡</font>****ï¼Œè€Œå¯ç”¨çš„å †å†…å­˜åˆéå¸¸æœ‰é™ï¼Œé‚£ä¹ˆå°±æœ‰å¯èƒ½å‡ºç°****<font style="color:#74B602;">å †å†…å­˜ä¸è¶³</font>****çš„æƒ…å†µï¼Œä»è€Œå¯¼è‡´çº¿ç¨‹ä¹‹é—´****<font style="color:#74B602;">å‘ç”Ÿç«äº‰å’ŒæŠ¢å </font>****ã€‚å½“å †å†…å­˜ä¸è¶³æ—¶ï¼ŒJVMå¯èƒ½ä¼š****<font style="color:#74B602;">è§¦å‘åƒåœ¾å›æ”¶</font>****æ¥é‡Šæ”¾ä¸€äº›ä¸å†ä½¿ç”¨çš„å¯¹è±¡ï¼Œä»¥è…¾å‡ºè¶³å¤Ÿçš„å†…å­˜ç©ºé—´ç»™æ–°çš„å¯¹è±¡åˆ†é…ã€‚**

**<font style="color:#DF2A3F;">æ€»ä¹‹ï¼Œ</font>****è™½ç„¶ç†è®ºä¸Šå­˜åœ¨å †çš„æŠ¢å å¯èƒ½æ€§ï¼Œä½†åœ¨æ­£å¸¸æƒ…å†µä¸‹ï¼ŒJVMçš„è®¾è®¡å’Œå®ç°é€šå¸¸ä¼šé€šè¿‡åˆ†é…ç‹¬ç«‹çš„å†…å­˜åŒºåŸŸã€ä½¿ç”¨é€‚å½“çš„åŒæ­¥æœºåˆ¶ç­‰æ¥ä¿è¯å †çš„çº¿ç¨‹å®‰å…¨æ€§ï¼Œä»¥é¿å…æŠ¢å é—®é¢˜çš„å‘ç”Ÿã€‚**

+ **é‡‡ç”¨ CAS åˆ†é…é‡è¯•çš„æ–¹å¼æ¥ä¿è¯æ›´æ–°æ“ä½œçš„åŸå­æ€§**
+ **æ¯ä¸ªçº¿ç¨‹åœ¨ Java å †ä¸­é¢„å…ˆåˆ†é…ä¸€å°å—å†…å­˜ï¼Œä¹Ÿå°±æ˜¯æœ¬åœ°çº¿ç¨‹åˆ†é…ç¼“å†²ï¼ˆThread Local AllocationBufferï¼ŒTLABï¼‰ï¼Œè¦åˆ†é…å†…å­˜çš„çº¿ç¨‹ï¼Œå…ˆåœ¨æœ¬åœ°ç¼“å†²åŒºä¸­åˆ†é…ï¼Œåªæœ‰æœ¬åœ°ç¼“å†²åŒºç”¨å®Œäº†ï¼Œåˆ†é…æ–°çš„ç¼“å­˜åŒºæ—¶æ‰éœ€è¦åŒæ­¥é”å®šã€‚**

# <font style="color:#ECAA04;">èƒ½è¯´ä¸€ä¸‹å¯¹è±¡çš„å†…å­˜å¸ƒå±€å—ï¼Ÿ</font>
**åœ¨ HotSpot è™šæ‹Ÿæœºé‡Œï¼Œå¯¹è±¡åœ¨å †å†…å­˜ä¸­çš„å­˜å‚¨å¸ƒå±€å¯ä»¥åˆ’åˆ†ä¸ºä¸‰ä¸ªéƒ¨åˆ†ï¼š****<font style="color:#74B602;">å¯¹è±¡å¤´ï¼ˆHeaderï¼‰</font>****ã€****<font style="color:#74B602;">å®ä¾‹æ•°æ®ï¼ˆInstance Dataï¼‰</font>****å’Œ****<font style="color:#74B602;">å¯¹é½å¡«å……ï¼ˆPaddingï¼‰</font>****ã€‚ **

![1694761480855-c4eb604a-fd94-4888-8bdb-72746f7572e2.png](./img/hATw4O-knQXenPBo/1694761480855-c4eb604a-fd94-4888-8bdb-72746f7572e2-906843.png)**  
**** å¯¹è±¡å¤´ä¸»è¦ç”±ä¸¤éƒ¨åˆ†ç»„æˆï¼š**

+ **ç¬¬ä¸€éƒ¨åˆ†å­˜å‚¨å¯¹è±¡è‡ªèº«çš„è¿è¡Œæ—¶æ•°æ®ï¼š****<font style="color:#74B602;">é”çŠ¶æ€æ ‡å¿—</font>****ã€****<font style="color:#74B602;">å“ˆå¸Œç </font>****ã€****<font style="color:#74B602;">GC åˆ†ä»£å¹´é¾„</font>****ã€****<font style="color:#74B602;">çº¿ç¨‹æŒæœ‰çš„é”</font>****ã€****<font style="color:#74B602;">åå‘çº¿ç¨‹ ID</font>****ã€****<font style="color:#74B602;">åå‘æ—¶é—´æˆ³</font>****ç­‰ï¼Œå®˜æ–¹ç§°å®ƒä¸º ****<font style="color:#117CEE;">Mark Word</font>****ï¼Œå®ƒæ˜¯ä¸ªåŠ¨æ€çš„ç»“æ„ï¼Œéšç€å¯¹è±¡çŠ¶æ€å˜åŒ–ã€‚**
+ **ç¬¬äºŒéƒ¨åˆ†æ˜¯****<font style="color:#117CEE;">ç±»å‹æŒ‡é’ˆ</font>****ï¼ŒæŒ‡å‘å¯¹è±¡çš„ç±»å…ƒæ•°æ®ç±»å‹ï¼ˆå³å¯¹è±¡ä»£è¡¨å“ªä¸ªç±»ï¼‰ã€‚**
+ **æ­¤å¤–ï¼Œå¦‚æœå¯¹è±¡æ˜¯ä¸€ä¸ª Java æ•°ç»„ï¼Œé‚£è¿˜åº”è¯¥æœ‰ä¸€å—ç”¨äºè®°å½•æ•°ç»„é•¿åº¦çš„æ•°æ®ã€‚**

**å®ä¾‹æ•°æ®****ç”¨æ¥å­˜å‚¨å¯¹è±¡çœŸæ­£çš„æœ‰æ•ˆä¿¡æ¯ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬åœ¨ç¨‹åºä»£ç é‡Œæ‰€å®šä¹‰çš„å„ç§ç±»å‹çš„å­—æ®µå†…å®¹ï¼Œæ— è®ºæ˜¯ä»çˆ¶ç±»ç»§æ‰¿çš„ï¼Œè¿˜æ˜¯è‡ªå·±å®šä¹‰çš„ã€‚**

**å¯¹é½å¡«å……ä¸æ˜¯å¿…é¡»çš„ï¼Œæ²¡æœ‰ç‰¹åˆ«å«ä¹‰ï¼Œä»…ä»…èµ·ç€å ä½ç¬¦çš„ä½œç”¨ã€‚**

# <font style="color:#ECAA04;">å¦‚ä½•åˆ¤æ–­å¯¹è±¡ä»ç„¶å­˜æ´»ï¼Ÿ</font>
**å¸¸è§çš„åˆ¤æ–­å¯¹è±¡æ˜¯å¦å­˜æ´»çš„æ–¹æ³•æœ‰ä¸¤ç§ï¼š**

+ **<font style="color:#DF2A3F;">å¼•ç”¨è®¡æ•°æ³•ï¼š</font>****è¯¥æ–¹æ³•é€šè¿‡å¯¹****<font style="color:#117CEE;">å¯¹è±¡è¿›è¡Œå¼•ç”¨è®¡æ•°</font>****ï¼Œå³è®°å½•å¯¹è±¡è¢«å¼•ç”¨çš„æ¬¡æ•°ã€‚å½“å¼•ç”¨è®¡æ•°ä¸º0æ—¶ï¼Œè¡¨ç¤ºå¯¹è±¡æ²¡æœ‰è¢«å¼•ç”¨ï¼Œå¯ä»¥è¢«å›æ”¶ã€‚ä½†æ˜¯å¼•ç”¨è®¡æ•°æ³•****<font style="color:#74B602;">æ— æ³•è§£å†³å¾ªç¯å¼•ç”¨</font>****çš„é—®é¢˜ï¼Œå¯¼è‡´****<font style="color:#74B602;">å†…å­˜æ³„æ¼</font>****ã€‚**

![1695624496167-98045ce3-03ce-4be7-87f2-baf1ed9c13a7.jpeg](./img/hATw4O-knQXenPBo/1695624496167-98045ce3-03ce-4be7-87f2-baf1ed9c13a7-439123.jpeg)

+ **<font style="color:#DF2A3F;">å¯è¾¾æ€§åˆ†ææ³•ï¼š</font>****å¸¸è§çš„åƒåœ¾å›æ”¶ç®—æ³•ä¸­ï¼Œä¸»è¦é‡‡ç”¨çš„æ˜¯****<font style="color:#117CEE;">å¯è¾¾æ€§åˆ†æç®—æ³•</font>****ã€‚è¯¥ç®—æ³•ä»ä¸€ç»„ç§°ä¸º****<font style="color:#74B602;">"æ ¹"</font>****çš„ç‰¹å®šå¯¹è±¡ï¼ˆå¦‚å…¨å±€å˜é‡ã€æ´»åŠ¨çº¿ç¨‹ç­‰ï¼‰å¼€å§‹ï¼Œé€šè¿‡****<font style="color:#74B602;">è¿½è¸ª</font>****å¯¹è±¡ä¹‹é—´çš„****<font style="color:#74B602;">å¼•ç”¨å…³ç³»</font>****å½¢æˆå¼•ç”¨å›¾ï¼Œç„¶åæ£€æŸ¥å“ªäº›å¯¹è±¡å¯ä»¥ä»"æ ¹"å¯¹è±¡è®¿é—®åˆ°ã€‚å¦‚æœä¸€ä¸ªå¯¹è±¡****<font style="color:#74B602;">å¯ä»¥ä»"æ ¹"å¯¹è±¡è®¿é—®</font>****åˆ°ï¼Œé‚£ä¹ˆå®ƒå°±è¢«è®¤ä¸ºæ˜¯****<font style="color:#74B602;">å­˜æ´»</font>****çš„ã€‚è€Œå¯¹äº****<font style="color:#74B602;">æ— æ³•</font>****ä»"æ ¹"å¯¹è±¡****<font style="color:#74B602;">è®¿é—®åˆ°</font>****çš„å¯¹è±¡ï¼Œåˆ™è¢«åˆ¤å®šä¸º****<font style="color:#74B602;">ä¸å†å­˜æ´»</font>****ï¼Œåƒåœ¾å›æ”¶å™¨å°†å¯¹å…¶è¿›è¡Œå›æ”¶ã€‚**

![1695624768508-32d47955-d2c6-4e6b-873d-f5c9d4c23d3e.jpeg](./img/hATw4O-knQXenPBo/1695624768508-32d47955-d2c6-4e6b-873d-f5c9d4c23d3e-799641.jpeg)

# <font style="color:#ECAA04;">åƒåœ¾æ”¶é›†ç®—æ³•äº†è§£å—ï¼Ÿ</font>
**åƒåœ¾æ”¶é›†ç®—æ³•æ˜¯æŒ‡ç”¨äºç¡®å®šå“ªäº›å†…å­˜å¯¹è±¡æ˜¯åƒåœ¾å¹¶å°†å…¶å›æ”¶çš„æŠ€æœ¯ã€‚**

**å¸¸è§çš„åƒåœ¾æ”¶é›†ç®—æ³•åŒ…æ‹¬ä»¥ä¸‹å‡ ç§ï¼š**

+ **<font style="color:#DF2A3F;">æ ‡è®°-æ¸…é™¤ç®—æ³•ï¼š</font>****è¯¥ç®—æ³•é€šè¿‡****<font style="color:#74B602;">æ ‡è®°</font>****å¯¹è±¡çš„å¯è¾¾æ€§æ¥ç¡®å®šå­˜æ´»å¯¹è±¡ï¼Œç„¶å****<font style="color:#74B602;">æ¸…é™¤</font>****æœªè¢«æ ‡è®°çš„å¯¹è±¡ã€‚è¿™ç§ç®—æ³•ç®€å•ä¸”çµæ´»ï¼Œä½†å¯èƒ½ä¼šäº§ç”Ÿå†…å­˜ç¢ç‰‡ã€‚**

![1695627945022-12dd54a3-7948-4720-8e54-ea70cac254da.jpeg](./img/hATw4O-knQXenPBo/1695627945022-12dd54a3-7948-4720-8e54-ea70cac254da-218625.jpeg)

    - **<font style="color:#117CEE;">ä¼˜ç‚¹ï¼š</font>**
        * **ç®€å•ä¸”çµæ´»ï¼Œé€‚ç”¨äºå¤§å‹å’Œå¤æ‚çš„å†…å­˜ç»“æ„ã€‚ **
    - **<font style="color:#117CEE;">ç¼ºç‚¹ï¼š</font>**
        * **å¯èƒ½ä¼šäº§ç”Ÿå†…å­˜ç¢ç‰‡ï¼Œå¯¼è‡´****<font style="color:#74B602;">å†…å­˜åˆ©ç”¨ç‡é™ä½</font>****ã€‚**
        * **ç®—æ³•æ‰§è¡Œè¿‡ç¨‹ä¸­ä¼šå¼•å…¥åœé¡¿æ—¶é—´ï¼Œå½±å“ç¨‹åºçš„å“åº”æ€§èƒ½ã€‚**
+ **<font style="color:rgb(223, 42, 63);">æ ‡è®°-</font>****<font style="color:#DF2A3F;">å¤åˆ¶ç®—æ³•ï¼š</font>****è¯¥ç®—æ³•å°†å†…å­˜åˆ†ä¸ºä¸¤ä¸ªåŒºåŸŸï¼Œæ¯æ¬¡åªä½¿ç”¨å…¶ä¸­ä¸€ä¸ªåŒºåŸŸã€‚å½“å‘ç”Ÿåƒåœ¾å›æ”¶æ—¶ï¼Œå°†****<font style="color:#74B602;">å­˜æ´»å¯¹è±¡ä»ä¸€ä¸ªåŒºåŸŸå¤åˆ¶åˆ°å¦ä¸€ä¸ªåŒºåŸŸ</font>****ï¼Œç„¶åæ¸…é™¤å½“å‰ä½¿ç”¨çš„åŒºåŸŸã€‚è¿™ç§ç®—æ³•é¿å…äº†å†…å­˜ç¢ç‰‡çš„é—®é¢˜ï¼Œä½†éœ€è¦é¢å¤–çš„å†…å­˜ç©ºé—´ã€‚**

![1695627891539-b8e4ac04-da15-43dd-809d-016ca8153b0d.jpeg](./img/hATw4O-knQXenPBo/1695627891539-b8e4ac04-da15-43dd-809d-016ca8153b0d-972421.jpeg)

    - **<font style="color:#117CEE;">ä¼˜ç‚¹ï¼š</font>**
        * **<font style="color:#74B602;">æ¶ˆé™¤äº†</font>****å†…å­˜ç¢ç‰‡é—®é¢˜ï¼Œå†…å­˜åˆ©ç”¨ç‡é«˜ã€‚**
        * **å›æ”¶æ•ˆç‡é«˜ï¼Œ****<font style="color:#74B602;">ä¸éœ€è¦</font>****éå†æ•´ä¸ªå †ã€‚**
    - ** ****<font style="color:#117CEE;">ç¼ºç‚¹ï¼š</font>**
        * **éœ€è¦****<font style="color:#74B602;">é¢å¤–çš„</font>****å†…å­˜ç©ºé—´æ¥ä¿å­˜å¤åˆ¶å¯¹è±¡ã€‚**
        * **ä¸å…¶ä»–ç®—æ³•ç›¸æ¯”ï¼Œæœ‰ä¸€å®šçš„****<font style="color:#74B602;">å†…å­˜æµªè´¹</font>****ã€‚**
+ **<font style="color:#DF2A3F;">æ ‡è®°-æ•´ç†ç®—æ³•ï¼š</font>****è¯¥ç®—æ³•é¦–å…ˆ****<font style="color:#74B602;">æ ‡è®°å­˜æ´»å¯¹è±¡</font>****ï¼Œç„¶åå°†å®ƒä»¬****<font style="color:#74B602;">ç´§å‡‘åœ°ç§»åŠ¨åˆ°å†…å­˜</font>****çš„ä¸€ç«¯ï¼Œ****<font style="color:#74B602;">æ¸…é™¤æœªè¢«æ ‡è®°</font>****çš„å¯¹è±¡ã€‚è¿™æ ·å¯ä»¥æ¶ˆé™¤å†…å­˜ç¢ç‰‡ï¼Œä½†ä¹Ÿéœ€è¦ç§»åŠ¨å¯¹è±¡çš„æ“ä½œã€‚**

![1695627954117-b1bf42ce-0819-48dc-945b-a4054f34d793.jpeg](./img/hATw4O-knQXenPBo/1695627954117-b1bf42ce-0819-48dc-945b-a4054f34d793-650922.jpeg)

    - **ä¼˜ç‚¹ï¼š**
        * **<font style="color:#74B602;">æ¶ˆé™¤äº†</font>****å†…å­˜ç¢ç‰‡é—®é¢˜ï¼Œå†…å­˜åˆ©ç”¨ç‡é«˜ã€‚**
        * **ç›¸å¯¹äºå¤åˆ¶ç®—æ³•ï¼Œ****<font style="color:#74B602;">å‡å°‘äº†</font>****å†…å­˜çš„å ç”¨ã€‚**
    - ** ç¼ºç‚¹ï¼š**
        * **éœ€è¦ç§»åŠ¨å¯¹è±¡çš„æ“ä½œï¼Œå¯èƒ½ä¼š****<font style="color:#74B602;">å¢åŠ </font>****åƒåœ¾å›æ”¶çš„****<font style="color:#74B602;">æ—¶é—´æ¶ˆè€—</font>****ã€‚**
        * **<font style="color:#74B602;">ä¸é€‚ç”¨äº</font>****å­˜æ´»å¯¹è±¡è¾ƒå¤šä¸”åˆ†æ•£çš„æƒ…å†µï¼Œå› ä¸ºéœ€è¦å¤§é‡çš„å¯¹è±¡ç§»åŠ¨ã€‚**
+ **<font style="color:#DF2A3F;">åˆ†ä»£å›æ”¶ç®—æ³•ï¼š</font>****è¯¥ç®—æ³•æ ¹æ®å¯¹è±¡çš„ç”Ÿå‘½å‘¨æœŸå°†å†…å­˜åˆ’åˆ†ä¸ºä¸åŒçš„ä»£ã€‚é€šå¸¸æƒ…å†µä¸‹ï¼Œæ–°åˆ›å»ºçš„å¯¹è±¡è¢«åˆ†é…åˆ°æ–°ç”Ÿä»£ï¼Œç»è¿‡å¤šæ¬¡å›æ”¶ä»ç„¶å­˜æ´»çš„å¯¹è±¡ä¼šæ™‹å‡åˆ°è€å¹´ä»£ã€‚****<font style="color:#74B602;">ä¸åŒä»£ä½¿ç”¨ä¸åŒçš„åƒåœ¾æ”¶é›†ç­–ç•¥</font>****ï¼Œä»¥æé«˜å›æ”¶æ•ˆç‡ã€‚**
        * **<font style="color:#117CEE;">æ–°ç”Ÿä»£ï¼š</font>****æ¯æ¬¡éƒ½æœ‰å¤§é‡å¯¹è±¡æ¶ˆäº¡ï¼Œå› ä¸ºæœ‰è€å¹´ä»£ä½œä¸ºå†…å­˜æ‹…ä¿ï¼Œé€šå¸¸é‡‡å–****<font style="color:#74B602;">å¤åˆ¶ç®—æ³•</font>****ã€‚**
        * **<font style="color:#117CEE;">è€å¹´ä»£ï¼š</font>****å¯¹è±¡å­˜æ´»æ—¶é—´é•¿ï¼Œå¯é‡‡ç”¨****<font style="color:#74B602;">æ ‡è®°æ•´ç†</font>****ã€****<font style="color:#74B602;">æ ‡è®°æ¸…é™¤</font>****ç®—æ³•ã€‚**

# <font style="color:#ECAA04;">èƒ½è¯¦ç»†è¯´ä¸€ä¸‹ CMS æ”¶é›†å™¨çš„åƒåœ¾æ”¶é›†è¿‡ç¨‹å—ï¼Ÿ</font>
**CMSæ”¶é›†å™¨æ˜¯ä¸€ç§****<font style="color:#74B602;">æ—¨åœ¨å‡å°‘åƒåœ¾å›æ”¶åœé¡¿æ—¶é—´</font>****çš„åƒåœ¾æ”¶é›†å™¨ã€‚å®ƒä¸»è¦é’ˆå¯¹å“åº”æ—¶é—´æ•æ„Ÿçš„åº”ç”¨ç¨‹åºï¼Œé€šè¿‡å¹¶å‘æ‰§è¡Œå¤§éƒ¨åˆ†åƒåœ¾æ”¶é›†å·¥ä½œæ¥å‡å°‘åœé¡¿æ—¶é—´ã€‚**

**CMSæ”¶é›†å™¨çš„åƒåœ¾æ”¶é›†è¿‡ç¨‹ä¸»è¦åˆ†äº”ä¸ªé˜¶æ®µï¼š**

![1695640589833-87cda607-695a-4ff2-9ba9-c06d480c5cdf.png](./img/hATw4O-knQXenPBo/1695640589833-87cda607-695a-4ff2-9ba9-c06d480c5cdf-714401.png)

1. **<font style="color:#DF2A3F;">åˆå§‹æ ‡è®°é˜¶æ®µï¼š</font>**
    - **åœ¨æ­¤é˜¶æ®µï¼ŒCMSæ”¶é›†å™¨ä¼š****<font style="color:#74B602;">æ ‡è®°</font>****æ‰€æœ‰ä»æ ¹å¯¹è±¡ç›´æ¥****<font style="color:#74B602;">å¯è¾¾çš„å¯¹è±¡</font>****ï¼Œæ ‡è®°è¿™äº›å¯¹è±¡çš„æ ‡è®°ä½ã€‚**
    - **æ ‡è®°è¿‡ç¨‹éœ€è¦åœæ­¢åº”ç”¨ç¨‹åºçš„çº¿ç¨‹ï¼Œå› æ­¤ä¼š****<font style="color:#74B602;">äº§ç”ŸçŸ­æš‚çš„åœé¡¿</font>****ã€‚**
2. **<font style="color:#DF2A3F;">å¹¶å‘æ ‡è®°é˜¶æ®µï¼š</font>**
    - **åœ¨åˆå§‹æ ‡è®°é˜¶æ®µä¹‹åï¼ŒCMSæ”¶é›†å™¨ä¼šå¯åŠ¨å¹¶å‘æ ‡è®°é˜¶æ®µï¼Œ****<font style="color:#74B602;">æ¢å¤åº”ç”¨ç¨‹åº</font>****çš„æ‰§è¡Œã€‚**
    - **åœ¨å¹¶å‘æ ‡è®°é˜¶æ®µï¼ŒCMSæ”¶é›†å™¨ä¼š****<font style="color:#74B602;">éå†å †ä¸­çš„å¯¹è±¡</font>****ï¼Œå¹¶****<font style="color:#74B602;">æ ‡è®°</font>****æ‰€æœ‰****<font style="color:#74B602;">å¯è¾¾çš„å¯¹è±¡</font>****ã€‚æ ‡è®°è¿‡ç¨‹ä¸åº”ç”¨ç¨‹åºçš„æ‰§è¡Œ****<font style="color:#74B602;">å¹¶å‘è¿›è¡Œ</font>****ã€‚**
3. **<font style="color:#DF2A3F;">é‡æ–°æ ‡è®°é˜¶æ®µï¼š</font>**
    - **åœ¨åº”ç”¨ç¨‹åºç»§ç»­æ‰§è¡Œçš„åŒæ—¶ï¼ŒCMSæ”¶é›†å™¨ä¼š****<font style="color:#74B602;">æš‚æ—¶åœæ­¢</font>****åº”ç”¨ç¨‹åºçš„çº¿ç¨‹ï¼Œè¿›è¡Œ****<font style="color:#74B602;">é‡æ–°æ ‡è®°</font>****é˜¶æ®µã€‚**
    - **é‡æ–°æ ‡è®°é˜¶æ®µçš„ç›®çš„æ˜¯****<font style="color:#74B602;">æ ‡è®°</font>****åœ¨å¹¶å‘æ ‡è®°æœŸé—´****<font style="color:#74B602;">å‘ç”Ÿå˜åŒ–çš„å¯¹è±¡</font>****ã€‚**
    - **è¯¥é˜¶æ®µé€šå¸¸æ¯”åˆå§‹æ ‡è®°é˜¶æ®µç¨é•¿ã€‚**
4. **<font style="color:#DF2A3F;">å¹¶å‘æ¸…ç†é˜¶æ®µï¼š</font>**
    - **åœ¨é‡æ–°æ ‡è®°é˜¶æ®µä¹‹åï¼ŒCMSæ”¶é›†å™¨ä¼šå¯åŠ¨å¹¶å‘æ¸…ç†é˜¶æ®µï¼Œ****<font style="color:#74B602;">æ¢å¤åº”ç”¨ç¨‹åº</font>****çš„æ‰§è¡Œã€‚**
    - **åœ¨å¹¶å‘æ¸…ç†é˜¶æ®µï¼ŒCMSæ”¶é›†å™¨ä¼š****<font style="color:#74B602;">æ¸…ç†</font>****é‚£äº›è¢«æ ‡è®°ä¸º****<font style="color:#74B602;">åƒåœ¾çš„å¯¹è±¡</font>****ã€‚æ¸…ç†è¿‡ç¨‹ä¸åº”ç”¨ç¨‹åºçš„æ‰§è¡Œ****<font style="color:#74B602;">å¹¶å‘è¿›è¡Œ</font>****ã€‚**
5. **<font style="color:#DF2A3F;">å¹¶å‘é‡ç½®é˜¶æ®µï¼š</font>**
    - **æœ€åä¸€ä¸ªé˜¶æ®µæ˜¯å¹¶å‘é‡ç½®é˜¶æ®µã€‚åœ¨æ­¤é˜¶æ®µï¼ŒCMSæ”¶é›†å™¨å®Œæˆåƒåœ¾å›æ”¶è¿‡ç¨‹çš„æœ€åä¸€äº›****<font style="color:#74B602;">æ¸…ç†å·¥ä½œ</font>****ã€‚**
    - **è¯¥é˜¶æ®µé€šå¸¸å¾ˆå¿«ï¼Œå¹¶åœ¨å…¶ä¸­é‡Šæ”¾é¢å¤–çš„å†…å­˜ç©ºé—´ã€‚**

**å€¼å¾—æ³¨æ„çš„æ˜¯ï¼ŒCMSæ”¶é›†å™¨çš„å¹¶å‘æ ‡è®°å’Œæ¸…ç†è¿‡ç¨‹ä¸åº”ç”¨ç¨‹åºçš„æ‰§è¡Œæ˜¯åŒæ—¶è¿›è¡Œçš„ï¼Œå› æ­¤å®ƒå¯ä»¥****<font style="color:#74B602;">æ˜¾è‘—å‡å°‘åƒåœ¾å›æ”¶</font>****å¼•èµ·çš„****<font style="color:#74B602;">åœé¡¿æ—¶é—´</font>****ã€‚ç„¶è€Œï¼ŒCMSæ”¶é›†å™¨çš„ç¼ºç‚¹ä¹‹ä¸€æ˜¯å…¶åœ¨æ‰§è¡Œåƒåœ¾æ”¶é›†æ—¶ä¼šæ¶ˆè€—ä¸€å®šçš„CPUèµ„æºï¼Œå¹¶ä¸”åœ¨å †å†…å­˜ä½¿ç”¨ç‡é«˜æˆ–äº§ç”Ÿå¤§é‡åƒåœ¾æ—¶ï¼Œå¯èƒ½ä¼šå¯¼è‡´æ›´é¢‘ç¹çš„Full GCæ“ä½œã€‚**

# <font style="color:#ECAA04;">G1 åƒåœ¾æ”¶é›†å™¨äº†è§£å—ï¼Ÿ</font>
**G1åƒåœ¾æ”¶é›†å™¨çš„è®¾è®¡ç›®æ ‡æ˜¯åœ¨åœé¡¿æ—¶é—´å¯æ§çš„æƒ…å†µä¸‹ï¼Œæœ€å¤§åŒ–ç³»ç»Ÿååé‡ï¼Œå®ƒ****<font style="color:#74B602;">æ—¨åœ¨æä¾›æ›´å¯æ§ã€æ›´é«˜æ•ˆ</font>****çš„åƒåœ¾å›æ”¶æ€§èƒ½ã€‚**

**ä»¥ä¸‹æ˜¯G1åƒåœ¾æ”¶é›†å™¨çš„ä¸€äº›ç‰¹ç‚¹å’Œå·¥ä½œåŸç†ï¼š**

1. **<font style="color:#DF2A3F;">åŒºåŸŸåŒ–å†…å­˜å¸ƒå±€ï¼š</font>****G1æ”¶é›†å™¨å°†å †å†…å­˜åˆ’åˆ†ä¸º****<font style="color:#74B602;">å¤šä¸ªå¤§å°ç›¸ç­‰çš„åŒºåŸŸ</font>****ï¼ˆRegionï¼‰ã€‚æ¯ä¸ªåŒºåŸŸå¯ä»¥æ˜¯EdenåŒºã€SurvivoråŒºæˆ–OldåŒºã€‚è¿™ç§å†…å­˜å¸ƒå±€****<font style="color:#74B602;">æœ‰åŠ©äºæé«˜</font>****åƒåœ¾æ”¶é›†çš„æ•ˆç‡ã€‚**

![1695642524361-cf35e3c6-f46b-43b0-b0b7-0fb6847135e2.png](./img/hATw4O-knQXenPBo/1695642524361-cf35e3c6-f46b-43b0-b0b7-0fb6847135e2-599562.png)

2. **<font style="color:#DF2A3F;">å¹¶è¡Œä¸å¹¶å‘ï¼š</font>****G1æ”¶é›†å™¨ä½¿ç”¨****<font style="color:#74B602;">å¹¶è¡Œå’Œå¹¶å‘çš„æ–¹å¼</font>****æ‰§è¡Œåƒåœ¾å›æ”¶æ“ä½œã€‚å®ƒé€šè¿‡å¹¶è¡Œå¤„ç†æ¥****<font style="color:#74B602;">åŠ å¿«</font>****æ ‡è®°å’Œå¤åˆ¶é˜¶æ®µçš„é€Ÿåº¦ï¼ŒåŒæ—¶åˆ©ç”¨å¹¶å‘å¤„ç†æ¥****<font style="color:#74B602;">å‡å°‘</font>****åƒåœ¾å›æ”¶å¯¹åº”ç”¨ç¨‹åºçš„åœé¡¿æ—¶é—´ã€‚**
3. **<font style="color:#DF2A3F;">åƒåœ¾ä¼˜å…ˆç­–ç•¥ï¼š</font>****G1æ”¶é›†å™¨ä½¿ç”¨Garbage-Firstç­–ç•¥æ¥ç¡®å®š****<font style="color:#74B602;">ä¼˜å…ˆå¤„ç†</font>****å“ªäº›åŒºåŸŸä¸­çš„åƒåœ¾ã€‚å®ƒä¼šæ ¹æ®åŒºåŸŸä¸­çš„åƒåœ¾æ•°é‡ã€å›æ”¶æˆæœ¬ç­‰å› ç´ æ¥é€‰æ‹©ä¸‹ä¸€ä¸ªè¦å›æ”¶çš„åŒºåŸŸï¼Œä»¥****<font style="color:#74B602;">æœ€å¤§ç¨‹åº¦</font>****åœ°æé«˜åƒåœ¾å›æ”¶çš„æ•ˆç‡ã€‚**
4. **<font style="color:#DF2A3F;">æ··åˆå›æ”¶ï¼š</font>****G1æ”¶é›†å™¨æ‰§è¡Œ****<font style="color:#74B602;">æ··åˆå›æ”¶</font>****ï¼Œå³****<font style="color:#74B602;">åŒæ—¶å¤„ç†</font>****æ–°ç”Ÿä»£å’Œè€å¹´ä»£çš„åƒåœ¾å›æ”¶ã€‚ç›¸æ¯”äºä¼ ç»Ÿçš„åˆ†ä»£å¼å›æ”¶ï¼Œå®ƒå¯ä»¥****<font style="color:#74B602;">å‡è¡¡åœ°</font>****å¤„ç†æ•´ä¸ªå †å†…å­˜ï¼Œ****<font style="color:#74B602;">é¿å…</font>****é•¿æ—¶é—´çš„Full GCæš‚åœã€‚**
5. **<font style="color:#DF2A3F;">å¯é¢„æµ‹çš„åœé¡¿æ—¶é—´ï¼š</font>****G1æ”¶é›†å™¨ä½¿ç”¨ä¸€ç§å«åš"****<font style="color:#74B602;">åœé¡¿é¢„æµ‹æ¨¡å‹</font>****"çš„æœºåˆ¶ï¼Œé€šè¿‡****<font style="color:#74B602;">æ§åˆ¶</font>****æ¯æ¬¡åƒåœ¾****<font style="color:#74B602;">å›æ”¶çš„æ—¶é—´</font>****ç›®æ ‡æ¥å®ç°å¯é¢„æµ‹çš„åœé¡¿æ—¶é—´ã€‚å¼€å‘äººå‘˜å¯ä»¥é€šè¿‡è®¾ç½®æœ€å¤§åœé¡¿æ—¶é—´æ¥æ§åˆ¶G1æ”¶é›†å™¨çš„è¡Œä¸ºã€‚**

**<font style="color:#DF2A3F;">å·¥ä½œåŸç†ï¼š</font>**

![1696574891115-01a05083-14aa-4ab6-8dd1-dac317ee1871.jpeg](./img/hATw4O-knQXenPBo/1696574891115-01a05083-14aa-4ab6-8dd1-dac317ee1871-560657.jpeg)

+ **<font style="color:#DF2A3F;">åˆå§‹æ ‡è®°ï¼š</font>****åœé¡¿æ‰€æœ‰çš„åº”ç”¨ç¨‹åºçº¿ç¨‹ï¼Œè¯†åˆ«å‡º****<font style="color:#74B602;">GC Roots</font>****ç›´æ¥å…³è”çš„å¯¹è±¡ï¼Œå¹¶æ ‡è®°è¿™äº›å¯¹è±¡ã€‚**
+ **<font style="color:#DF2A3F;">å¹¶å‘æ ‡è®°ï¼š</font>****ä»ç¬¬ä¸€æ­¥å¾—åˆ°çš„æ ‡è®°ç‚¹ç»§ç»­å‘ä¸‹éå†å¯¹è±¡å›¾ï¼Œ****<font style="color:#74B602;">æ ‡è®°æ‰€æœ‰è¢«å¼•ç”¨çš„å­˜æ´»å¯¹è±¡</font>****ï¼Œæ­¤æ­¥éª¤ä¸åº”ç”¨ç¨‹åºå¹¶å‘è¿è¡Œã€‚**
+ **<font style="color:#DF2A3F;">æœ€ç»ˆæ ‡è®°ï¼š</font>****åœ¨å¹¶å‘æ ‡è®°å®Œæˆåï¼Œå†æ¬¡åœé¡¿æ‰€æœ‰çš„åº”ç”¨ç¨‹åºçº¿ç¨‹ï¼Œ****<font style="color:#74B602;">é‡æ–°æ ‡è®°è¢«æ”¹å˜çš„å¯¹è±¡</font>****å’Œæ•´ç†å­˜æ´»å¯¹è±¡çš„å¸ƒå±€ã€‚**
+ **<font style="color:#DF2A3F;">ç­›é€‰å›æ”¶ï¼š</font>****æ ¹æ®ç”¨æˆ·è®¾å®šçš„å›æ”¶ç›®æ ‡ï¼Œ****<font style="color:#74B602;">é€‰å–ä¸€ä¸ªæˆ–å¤šä¸ªRegionè¿›è¡Œåƒåœ¾å›æ”¶</font>****ï¼Œå°†è¿™äº›Regionä¸­çš„å­˜æ´»å¯¹è±¡ï¼ˆè¿˜æœ‰å…¶ä»–Regionä¸­è¢«å¼•ç”¨çš„å¯¹è±¡ï¼‰å¤åˆ¶åˆ°æ–°çš„Regionä¸­ï¼Œå³ç§°ä¸ºç­›é€‰å›æ”¶ã€‚**

**G1åƒåœ¾æ”¶é›†å™¨****<font style="color:#74B602;">é€‚ç”¨äº</font>****å…·æœ‰å¤§å†…å­˜éœ€æ±‚å’Œä½æš‚åœæ—¶é—´è¦æ±‚çš„åº”ç”¨ç¨‹åºã€‚ä½†éœ€è¦æ³¨æ„çš„æ˜¯ï¼ŒG1æ”¶é›†å™¨ä¹Ÿæœ‰ä¸€äº›å±€é™æ€§ï¼Œæ¯”å¦‚åœ¨å¤„ç†å¤§é‡ä¸´æ—¶åƒåœ¾å¯¹è±¡æˆ–å­˜åœ¨å¤§é‡è·¨åŒºåŸŸå¼•ç”¨æ—¶å¯èƒ½ä¼šå¯¼è‡´æ€§èƒ½ä¸‹é™ã€‚**

**æ€»çš„æ¥è¯´ï¼ŒG1åƒåœ¾æ”¶é›†å™¨åœ¨Javaåº”ç”¨ç¨‹åºä¸­çš„ä½¿ç”¨è¶Šæ¥è¶Šå¹¿æ³›ï¼Œç‰¹åˆ«****<font style="color:#74B602;">é€‚åˆ</font>****é‚£äº›****<font style="color:#74B602;">å¯¹åœé¡¿æ—¶é—´æ•æ„Ÿçš„</font>****å¤§å‹æœåŠ¡ç«¯****<font style="color:#74B602;">åº”ç”¨ç¨‹åº</font>****ã€‚**

# <font style="color:#ECAA04;">å¯¹è±¡ä¸€å®šåˆ†é…åœ¨å †ä¸­å—ï¼Ÿ</font>
**<font style="color:#DF2A3F;">ä¸ä¸€å®š</font>******

**åœ¨ç¼–è¯‘æœŸé—´ï¼ŒJIT ç¼–è¯‘å™¨å¯¹ä»£ç åšäº†å¾ˆå¤šä¼˜åŒ–ï¼Œå…¶ä¸­æœ‰ä¸€éƒ¨åˆ†å°±æ˜¯é’ˆå¯¹å†…å­˜å †åˆ†é…è¿›è¡Œä¼˜åŒ–ï¼Œå…¶å®ä¹Ÿå°±æ˜¯****<font style="color:#74B602;">é€ƒé€¸åˆ†ææŠ€æœ¯</font>****ã€‚**

**<font style="color:#117CEE;">ä»€ä¹ˆæ˜¯é€ƒé€¸åˆ†æï¼Ÿ</font>**

**é€ƒé€¸åˆ†ææ˜¯æŒ‡****<font style="color:#74B602;">åˆ†ææŒ‡é’ˆåŠ¨æ€èŒƒå›´çš„æ–¹æ³•</font>****ï¼Œå®ƒåŒç¼–è¯‘å™¨ä¼˜åŒ–åŸç†çš„æŒ‡é’ˆåˆ†æå’Œå¤–å½¢åˆ†æç›¸å…³è”ã€‚å½“****<font style="color:#74B602;">å˜é‡ï¼ˆæˆ–è€…å¯¹è±¡ï¼‰</font>****åœ¨æ–¹æ³•ä¸­****<font style="color:#74B602;">åˆ†é…å</font>****ï¼Œå…¶æŒ‡é’ˆæœ‰å¯èƒ½è¢«è¿”å›æˆ–è€…è¢«å…¨å±€å¼•ç”¨ï¼Œè¿™æ ·å°±ä¼š****<font style="color:#74B602;">è¢«å…¶ä»–æ–¹æ³•æˆ–è€…çº¿ç¨‹æ‰€å¼•ç”¨</font>****ï¼Œè¿™ç§ç°è±¡ç§°ä½œæŒ‡é’ˆï¼ˆæˆ–è€…å¼•ç”¨ï¼‰çš„é€ƒé€¸(Escape)ã€‚**

**é€šä¿—ç‚¹è®²ï¼Œå½“ä¸€ä¸ªå¯¹è±¡è¢« new å‡ºæ¥ä¹‹åï¼Œå®ƒå¯èƒ½è¢«å¤–éƒ¨æ‰€è°ƒç”¨ï¼Œå¦‚æœæ˜¯ä½œä¸ºå‚æ•°ä¼ é€’åˆ°å¤–éƒ¨äº†ï¼Œå°±ç§°ä¹‹ä¸º****<font style="color:#74B602;">æ–¹æ³•é€ƒé€¸</font>****ã€‚**

```java
public class Main {
    private static Object globalObj;

    public static void main(String[] args) {
        escapeMethod();
        System.out.println(globalObj.toString());
    }

    public static void escapeMethod() {
        Object localObj = new Object(); // ä¸€ä¸ªå¯¹è±¡è¢«åˆ›å»º

        globalObj = localObj; // å¯¹è±¡çš„å¼•ç”¨è¢«ä¼ é€’åˆ°å¤–éƒ¨çš„å…¨å±€å˜é‡

        // è¿™é‡Œå¯ä»¥æœ‰å…¶ä»–ä»£ç é€»è¾‘
    }
}

```

**é™¤æ­¤ä¹‹å¤–ï¼Œå¦‚æœå¯¹è±¡è¿˜æœ‰å¯èƒ½è¢«å¤–éƒ¨çº¿ç¨‹è®¿é—®åˆ°ï¼Œä¾‹å¦‚èµ‹å€¼****<font style="color:#74B602;"></font>****ç»™å¯ä»¥åœ¨å…¶å®ƒçº¿ç¨‹ä¸­è®¿é—®çš„å®ä¾‹å˜é‡ï¼Œè¿™ç§å°±è¢«ç§°ä¸º****<font style="color:#74B602;">çº¿ç¨‹é€ƒé€¸</font>****ã€‚**

```java
public class Main {
    private static Object sharedObj;

    public static void main(String[] args) throws InterruptedException {
        Thread thread = new Thread(new Runnable() {
            @Override
            public void run() {
                sharedObj = new Object(); // ä¸€ä¸ªå¯¹è±¡è¢«åˆ›å»ºå¹¶èµ‹å€¼ç»™å…±äº«å˜é‡
            }
        });

        thread.start();

        thread.join(); // ç­‰å¾…çº¿ç¨‹æ‰§è¡Œç»“æŸ

        System.out.println(sharedObj.toString());
    }
}
```

**<font style="color:#DF2A3F;">é€ƒé€¸åˆ†æçš„å¥½å¤„ï¼š</font>**

+ **<font style="color:#117CEE;">æ ˆä¸Šåˆ†é…</font>**

**å¦‚æœå¯¹è±¡ä¸é€ƒé€¸ï¼Œåˆ™å¯ä»¥é€šè¿‡åœ¨æ ˆä¸Šåˆ†é…å’Œé”€æ¯å¯¹è±¡æ¥****<font style="color:#74B602;">é¿å…é¢‘ç¹çš„</font>****å †å†…å­˜åˆ†é…å’Œåƒåœ¾å›æ”¶æ“ä½œï¼Œ****<font style="color:#74B602;">è¿›è€Œæé«˜</font>****ç¨‹åºçš„æ‰§è¡Œæ•ˆç‡ã€‚**

+ **<font style="color:#117CEE;">åŒæ­¥æ¶ˆé™¤</font>**

**çº¿ç¨‹åŒæ­¥æœ¬èº«æ˜¯ä¸€ä¸ªç›¸å¯¹è€—æ—¶çš„è¿‡ç¨‹ï¼Œå¦‚æœé€ƒé€¸åˆ†æèƒ½å¤Ÿç¡®å®šä¸€ä¸ªå˜é‡ä¸ä¼šé€ƒé€¸å‡ºçº¿ç¨‹ï¼Œæ— æ³•è¢«å…¶ä»–çº¿ç¨‹è®¿é—®ï¼Œé‚£ä¹ˆè¿™ä¸ªå˜é‡çš„è¯»å†™è‚¯å®šå°±ä¸ä¼šæœ‰ç«äº‰ï¼Œ å¯¹è¿™ä¸ªå˜é‡å®æ–½çš„åŒæ­¥æªæ–½ä¹Ÿå°±å¯ä»¥å®‰å…¨åœ°æ¶ˆé™¤æ‰ã€‚**

+ **<font style="color:#117CEE;">æ ‡é‡æ›¿æ¢</font>**

**å¦‚æœä¸€ä¸ªæ•°æ®æ˜¯åŸºæœ¬æ•°æ®ç±»å‹ï¼Œ****<font style="color:#74B602;">ä¸å¯æ‹†åˆ†</font>****ï¼Œå®ƒå°±è¢«ç§°ä¹‹ä¸º****<font style="color:#74B602;">æ ‡é‡</font>****ã€‚**

**æŠŠä¸€ä¸ª Java ****<font style="color:#74B602;">å¯¹è±¡æ‹†æ•£</font>****ï¼Œå°†å…¶ç”¨åˆ°çš„æˆå‘˜å˜é‡æ¢å¤ä¸º****<font style="color:#74B602;">åŸå§‹ç±»å‹æ¥è®¿é—®</font>****ï¼Œè¿™ä¸ªè¿‡ç¨‹å°±ç§°ä¸º****<font style="color:#74B602;">æ ‡é‡æ›¿æ¢</font>****ã€‚**

**å‡å¦‚é€ƒé€¸åˆ†æèƒ½å¤Ÿè¯æ˜ä¸€ä¸ªå¯¹è±¡ä¸ä¼šè¢«æ–¹æ³•å¤–éƒ¨è®¿é—®ï¼Œå¹¶ä¸”è¿™ä¸ªå¯¹è±¡å¯ä»¥è¢«æ‹†æ•£ï¼Œé‚£ä¹ˆå¯ä»¥ä¸åˆ›å»ºå¯¹è±¡ï¼Œç›´æ¥ç”¨åˆ›å»ºè‹¥å¹²ä¸ªæˆå‘˜å˜é‡ä»£æ›¿ï¼Œå¯ä»¥è®©å¯¹è±¡çš„æˆå‘˜å˜é‡åœ¨æ ˆä¸Šåˆ†é…å’Œè¯»å†™ã€‚**

# <font style="color:#ECAA04;">è¯´è¯´æœ‰å“ªäº›å¸¸è§é›†åˆï¼Ÿ</font>
**é›†åˆç›¸å…³ç±»å’Œæ¥å£éƒ½åœ¨java.utilä¸­ï¼Œä¸»è¦åˆ†ä¸º3ç§ï¼š****<font style="color:#74B602;">Listï¼ˆåˆ—è¡¨ï¼‰</font>****ã€****<font style="color:#74B602;">Mapï¼ˆæ˜ å°„ï¼‰</font>****ã€****<font style="color:#74B602;">Set(é›†)</font>****ã€‚**

**å…¶ä¸­****Collection****æ˜¯é›†åˆ****List****ã€****Set****çš„çˆ¶æ¥å£ï¼Œå®ƒä¸»è¦æœ‰ä¸¤ä¸ªå­æ¥å£ï¼š**

+ **<font style="color:#117CEE;">Listï¼š</font>****å­˜å‚¨çš„å…ƒç´ æœ‰åºï¼Œå¯é‡å¤ã€‚**
+ **<font style="color:#117CEE;">Setï¼š</font>****å­˜å‚¨çš„å…ƒç´ ä¸æ— åºï¼Œä¸å¯é‡å¤ã€‚**

![1696917806576-efb9bbe2-9bce-438c-b2e4-0ed2f014f166.png](./img/hATw4O-knQXenPBo/1696917806576-efb9bbe2-9bce-438c-b2e4-0ed2f014f166-593629.png)

**<font style="color:#117CEE;">Map</font>****æ˜¯å¦å¤–çš„æ¥å£ï¼Œæ˜¯é”®å€¼å¯¹æ˜ å°„ç»“æ„çš„é›†åˆã€‚**

![1696843805355-3e901729-206a-47f2-9a72-31693c49000b.png](./img/hATw4O-knQXenPBo/1696843805355-3e901729-206a-47f2-9a72-31693c49000b-361643.png)

# <font style="color:#ECAA04;">ArrayListå’ŒLinkedListæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</font>
**ArrayListå’ŒLinkedListéƒ½æ˜¯Javaä¸­å¸¸ç”¨çš„é›†åˆç±»ï¼Œä½†å®ƒä»¬æœ‰ä¸åŒçš„æ•°æ®ç»“æ„å’Œæ€§èƒ½ç‰¹ç‚¹ï¼Œå› æ­¤é€‚ç”¨äºä¸åŒçš„ä½¿ç”¨åœºæ™¯ã€‚ä»¥ä¸‹æ˜¯å®ƒä»¬çš„ä¸»è¦åŒºåˆ«ï¼š**

1. **<font style="color:#117CEE;">æ•°æ®ç»“æ„ï¼š</font>**
    - **ArrayListæ˜¯****<font style="color:#74B602;">åŸºäºæ•°ç»„</font>****å®ç°çš„åŠ¨æ€æ•°ç»„ã€‚å®ƒå†…éƒ¨ä½¿ç”¨æ•°ç»„æ¥å­˜å‚¨å…ƒç´ ï¼Œå½“æ•°ç»„ç©ºé—´ä¸è¶³æ—¶ï¼Œä¼š****<font style="color:#74B602;">è‡ªåŠ¨æ‰©å±•å®¹é‡</font>****ã€‚**
    - **LinkedListæ˜¯****<font style="color:#74B602;">åŸºäºåŒå‘é“¾è¡¨</font>****å®ç°çš„ã€‚æ¯ä¸ªå…ƒç´ éƒ½åŒ…å«ä¸€ä¸ªæŒ‡å‘å‰ä¸€ä¸ªå…ƒç´ å’Œåä¸€ä¸ªå…ƒç´ çš„å¼•ç”¨ã€‚è¿™ç§ç»“æ„å…è®¸åœ¨****<font style="color:#74B602;">ä»»ä½•ä½ç½®é«˜æ•ˆåœ°æ’å…¥å’Œåˆ é™¤</font>****å…ƒç´ ã€‚**

![1696854319360-7beebcd1-dbf6-4d77-a729-34869265c9d4.jpeg](./img/hATw4O-knQXenPBo/1696854319360-7beebcd1-dbf6-4d77-a729-34869265c9d4-915106.jpeg)

2. **<font style="color:#117CEE;">éšæœºè®¿é—®ï¼š</font>**
    - **ArrayListæ”¯æŒ****<font style="color:#74B602;">é«˜æ•ˆçš„éšæœº</font>****è®¿é—®ï¼Œå› ä¸ºå®ƒå¯ä»¥é€šè¿‡ç´¢å¼•****<font style="color:#74B602;">ç›´æ¥è®¿é—®</font>****æ•°ç»„ä¸­çš„å…ƒç´ ï¼Œæ—¶é—´****<font style="color:#74B602;">å¤æ‚åº¦ä¸ºO(1)</font>****ã€‚**
    - **LinkedList****<font style="color:#74B602;">ä¸æ”¯æŒé«˜æ•ˆçš„éšæœº</font>****è®¿é—®ï¼Œå› ä¸ºè¦è®¿é—®ç‰¹å®šä½ç½®çš„å…ƒç´ éœ€è¦ä»é“¾è¡¨å¤´æˆ–å°¾å¼€å§‹éå†ï¼Œæ—¶é—´****<font style="color:#74B602;">å¤æ‚åº¦ä¸ºO(n)</font>****ï¼Œå…¶ä¸­næ˜¯è¦è®¿é—®çš„å…ƒç´ ä½ç½®åˆ°é“¾è¡¨å¤´æˆ–å°¾çš„è·ç¦»ã€‚**
3. **<font style="color:#117CEE;">æ’å…¥å’Œåˆ é™¤æ“ä½œï¼š</font>**
    - **ArrayListåœ¨ä¸­é—´æˆ–å¼€å¤´æ’å…¥æˆ–åˆ é™¤å…ƒç´ æ—¶ï¼Œéœ€è¦ç§»åŠ¨å…ƒç´ æ¥****<font style="color:#74B602;">ç»´æŠ¤æ•°ç»„çš„è¿ç»­æ€§</font>****ï¼Œå› æ­¤è¿™äº›æ“ä½œå¯èƒ½è¾ƒæ…¢ï¼Œ****<font style="color:#74B602;">æ—¶é—´å¤æ‚åº¦ä¸ºO(n)</font>****ã€‚**
    - **LinkedListåœ¨ä»»ä½•ä½ç½®æ’å…¥æˆ–åˆ é™¤å…ƒç´ éƒ½****<font style="color:#74B602;">éå¸¸é«˜æ•ˆ</font>****ï¼Œæ—¶é—´****<font style="color:#74B602;">å¤æ‚åº¦ä¸ºO(1)</font>****ï¼Œå› ä¸ºåªéœ€è¦ä¿®æ”¹ç›¸å…³èŠ‚ç‚¹çš„å¼•ç”¨ã€‚**
4. **<font style="color:#117CEE;">å†…å­˜å ç”¨ï¼š</font>**
    - **ArrayListé€šå¸¸åœ¨å…ƒç´ æ•°é‡ä¸æ–­å¢åŠ æ—¶éœ€è¦****<font style="color:#74B602;">å®šæœŸæ‰©å±•æ•°ç»„å®¹é‡</font>****ï¼Œå¯èƒ½****<font style="color:#74B602;">å¯¼è‡´å†…å­˜æµªè´¹</font>****ã€‚ä½†æ˜¯ï¼Œå®ƒä¸éœ€è¦é¢å¤–çš„ç©ºé—´æ¥å­˜å‚¨èŠ‚ç‚¹å¼•ç”¨ã€‚**
    - **LinkedListæ¯ä¸ªå…ƒç´ éƒ½éœ€è¦****<font style="color:#74B602;">é¢å¤–çš„å†…å­˜æ¥å­˜å‚¨å‰åèŠ‚ç‚¹çš„å¼•ç”¨</font>****ï¼Œå› æ­¤å¯èƒ½****<font style="color:#74B602;">å ç”¨æ›´å¤šçš„å†…å­˜ç©ºé—´</font>****ï¼Œç‰¹åˆ«æ˜¯åœ¨å¤§é‡å…ƒç´ çš„æƒ…å†µä¸‹ã€‚**

# <font style="color:#ECAA04;">ArrayListçš„æ‰©å®¹æœºåˆ¶äº†è§£å—ï¼Ÿ</font>
**ArrayListæ˜¯åŸºäºæ•°ç»„çš„é›†åˆï¼Œæ•°ç»„çš„å®¹é‡æ˜¯åœ¨å®šä¹‰çš„æ—¶å€™ç¡®å®šçš„ï¼Œå¦‚æœæ•°ç»„æ»¡äº†ï¼Œå†æ’å…¥å°±ä¼šæ•°ç»„æº¢å‡ºã€‚æ‰€ä»¥åœ¨æ’å…¥æ—¶å€™ï¼Œä¼š****<font style="color:#74B602;">å…ˆæ£€æŸ¥æ˜¯å¦éœ€è¦æ‰©å®¹</font>****ï¼Œå¦‚æœå½“å‰å®¹é‡+1è¶…è¿‡æ•°ç»„é•¿åº¦ï¼Œå°±ä¼šè¿›è¡Œæ‰©å®¹ã€‚**

**ArrayListçš„æ‰©å®¹æ˜¯****<font style="color:#74B602;">åˆ›å»ºä¸€ä¸ª1.5å€çš„æ–°æ•°ç»„</font>****ï¼Œç„¶åæŠŠåŸæ•°ç»„çš„å€¼æ‹·è´è¿‡å»ã€‚**

```java
public boolean add(E var1) {
    // ç¡®ä¿å†…éƒ¨æ•°ç»„å®¹é‡è¶³å¤Ÿæ¥å®¹çº³æ–°å…ƒç´ 
    this.ensureCapacityInternal(this.size + 1);
    
    // å°†æ–°å…ƒç´ æ·»åŠ åˆ°æ•°ç»„ï¼Œå¹¶æ›´æ–°size
    this.elementData[this.size++] = var1;
    
    // è¿”å›trueè¡¨ç¤ºæ·»åŠ æˆåŠŸ
    return true;
}

private void ensureCapacityInternal(int var1) {
    // å¦‚æœå†…éƒ¨æ•°ç»„æ˜¯é»˜è®¤ç©ºæ•°ç»„ï¼Œå°†å®¹é‡è®¾ç½®ä¸º10æˆ–var1ä¸­çš„è¾ƒå¤§å€¼
    if (this.elementData == DEFAULTCAPACITY_EMPTY_ELEMENTDATA) {
        var1 = Math.max(10, var1);
    }

    // ç¡®ä¿å®¹é‡è¶³å¤Ÿæ¥å®¹çº³var1ä¸ªå…ƒç´ 
    this.ensureExplicitCapacity(var1);
}

private void ensureExplicitCapacity(int var1) {
    // å¢åŠ ä¿®æ”¹æ¬¡æ•°è®¡æ•°ï¼Œç”¨äºåœ¨è¿­ä»£æ—¶æ£€æµ‹å¹¶å‘ä¿®æ”¹
    ++this.modCount;
    
    // å¦‚æœéœ€è¦çš„å®¹é‡å¤§äºå½“å‰æ•°ç»„é•¿åº¦ï¼Œæ‰§è¡Œæ‰©å®¹æ“ä½œ
    if (var1 - this.elementData.length > 0) {
        this.grow(var1);
    }
}

private void grow(int var1) {
    // è·å–å½“å‰æ•°ç»„é•¿åº¦
    int var2 = this.elementData.length;
    
    // è®¡ç®—æ–°çš„å®¹é‡ï¼Œé€šå¸¸ä¸ºæ—§å®¹é‡çš„1.5å€
    int var3 = var2 + (var2 >> 1);
    
    // å¦‚æœæ–°å®¹é‡ä»ç„¶ä¸è¶³ä»¥å®¹çº³var1ä¸ªå…ƒç´ ï¼Œåˆ™å°†å®¹é‡è®¾ç½®ä¸ºvar1
    if (var3 - var1 < 0) {
        var3 = var1;
    }
    
    // å¦‚æœæ–°å®¹é‡è¶…å‡ºäº†ArrayListçš„æœ€å¤§å®¹é‡é™åˆ¶ï¼Œè°ƒç”¨hugeCapacityæ–¹æ³•æ¥ç¡®å®šæ–°å®¹é‡
    if (var3 - 2147483639 > 0) {
        var3 = hugeCapacity(var1);
    }
    
    // ä½¿ç”¨Arrays.copyOfæ–¹æ³•å°†æ•°ç»„æ‰©å®¹ä¸ºæ–°å®¹é‡
    this.elementData = Arrays.copyOf(this.elementData, var3);
}
```

# <font style="color:#ECAA04;">ArrayListä¸­ä¸ºä»€ä¹ˆç”¨transientä¿®é¥°æ•°ç»„ï¼Ÿ</font>
**ArrayList ä¸­ä½¿ç”¨ transient å…³é”®å­—ä¿®é¥°æ•°ç»„ elementData æ˜¯ä¸ºäº†****<font style="color:#74B602;">æ§åˆ¶</font>****å¯¹è±¡çš„****<font style="color:#74B602;">åºåˆ—åŒ–è¿‡ç¨‹</font>****ä»¥****<font style="color:#74B602;">æé«˜æ€§èƒ½</font>****å’Œ****<font style="color:#74B602;">èŠ‚çœå­˜å‚¨ç©ºé—´</font>****ã€‚**

+ **<font style="color:#117CEE;">æ€§èƒ½å’Œæ•ˆç‡ï¼š</font>****elementData æ•°ç»„æ˜¯ ArrayList çš„å†…éƒ¨æ•°æ®ç»“æ„ï¼Œå®ƒå¯èƒ½ä¼šéå¸¸å¤§ï¼Œä½†å®é™…ä¸Š****<font style="color:#74B602;">åªæœ‰ä¸€éƒ¨åˆ†ç”¨äºå­˜å‚¨å…ƒç´ </font>****ã€‚å¦‚æœä¸ä½¿ç”¨ transient ä¿®é¥°ç¬¦ï¼Œæ•´ä¸ª elementData æ•°ç»„å°†ä¼šè¢«åºåˆ—åŒ–ï¼ŒåŒ…æ‹¬æœªä½¿ç”¨çš„éƒ¨åˆ†ï¼Œ****<font style="color:#74B602;">é™ä½äº†åºåˆ—åŒ–æ•ˆç‡</font>****ã€‚**
+ **<font style="color:#117CEE;">èŠ‚çœå†…å­˜ï¼š</font>**** åºåˆ—åŒ–æ•´ä¸ª elementData æ•°ç»„å¯èƒ½ä¼šå ç”¨å¤§é‡çš„å†…å­˜ç©ºé—´ï¼Œå°¤å…¶æ˜¯å½“ ArrayList å¾ˆå¤§æ—¶ã€‚ä½¿ç”¨ transient å¯ä»¥****<font style="color:#74B602;">é¿å…åºåˆ—åŒ–æœªä½¿ç”¨çš„æ•°ç»„éƒ¨åˆ†</font>****ï¼Œä»è€ŒèŠ‚çœå†…å­˜ã€‚**
+ **<font style="color:#117CEE;">éšè—å†…éƒ¨å®ç°ç»†èŠ‚ï¼š</font>****ArrayList çš„è®¾è®¡ç›®æ ‡ä¹‹ä¸€æ˜¯****<font style="color:#74B602;">å°è£…å…¶å†…éƒ¨å®ç°ç»†èŠ‚</font>****ï¼Œä»¥é˜²æ­¢ç›´æ¥è®¿é—®å’Œä¾èµ–äºå†…éƒ¨æ•°æ®ç»“æ„ã€‚ä½¿ç”¨ transient å¯ä»¥ç¡®ä¿ elementData ä¸ä¼šè¢«åºåˆ—åŒ–ï¼Œä»è€Œä¿æŠ¤äº† ArrayList çš„å°è£…æ€§ã€‚**

**<font style="color:#DF2A3F;">å¦‚ä½•åºåˆ—åŒ– ArrayListï¼Ÿ</font>**

**ArrayListé€šè¿‡ä¸¤ä¸ªæ–¹æ³•readObjectã€writeObject****<font style="color:#74B602;">è‡ªå®šä¹‰åºåˆ—åŒ–å’Œååºåˆ—åŒ–ç­–ç•¥</font>****ï¼Œå®é™…ç›´æ¥ä½¿ç”¨ä¸¤ä¸ªæµObjectOutputStreamå’ŒObjectInputStreamæ¥è¿›è¡Œåºåˆ—åŒ–å’Œååºåˆ—åŒ–ã€‚**

```java
private void writeObject(ObjectOutputStream var1) throws IOException {
    // ä¿å­˜å½“å‰ modCount çš„å€¼ï¼Œç”¨äºåç»­æ£€æŸ¥
    int var2 = this.modCount;
    
    // æ‰§è¡Œé»˜è®¤å¯¹è±¡åºåˆ—åŒ–ï¼Œä¿å­˜é™¤ elementData æ•°ç»„ä»¥å¤–çš„çŠ¶æ€
    var1.defaultWriteObject();
    
    // å†™å…¥ ArrayList çš„å¤§å°ï¼ˆå…ƒç´ æ•°é‡ï¼‰
    var1.writeInt(this.size);

    // éå† elementData æ•°ç»„ï¼Œå¹¶é€ä¸ªå†™å…¥å…ƒç´ 
    for(int var3 = 0; var3 < this.size; ++var3) {
        var1.writeObject(this.elementData[var3]);
    }

    // æ£€æŸ¥ modCount æ˜¯å¦å‘ç”Ÿäº†å˜åŒ–ï¼Œå¦‚æœå˜åŒ–äº†ï¼ŒæŠ›å‡ºå¼‚å¸¸
    if (this.modCount != var2) {
        throw new ConcurrentModificationException();
    }
}

private void readObject(ObjectInputStream var1) throws IOException, ClassNotFoundException {
    // å°† elementData åˆå§‹åŒ–ä¸ºç©ºæ•°ç»„
    this.elementData = EMPTY_ELEMENTDATA;
    
    // æ‰§è¡Œé»˜è®¤å¯¹è±¡ååºåˆ—åŒ–ï¼Œè¿˜åŸé™¤ elementData æ•°ç»„ä»¥å¤–çš„çŠ¶æ€
    var1.defaultReadObject();
    
    // è¯»å– ArrayList çš„å¤§å°ï¼ˆå…ƒç´ æ•°é‡ï¼‰ï¼Œä½†æœªä½¿ç”¨æ­¤å€¼
    var1.readInt();
    
    // å¦‚æœ ArrayList çš„å¤§å°å¤§äº 0ï¼Œæ‰§è¡Œä»¥ä¸‹æ“ä½œ
    if (this.size > 0) {
        // ç¡®ä¿ elementData æ•°ç»„å…·æœ‰è¶³å¤Ÿçš„å®¹é‡æ¥å®¹çº³å…ƒç´ 
        this.ensureCapacityInternal(this.size);
        
        // è·å– elementData æ•°ç»„çš„å¼•ç”¨
        Object[] var2 = this.elementData;

        // ä»è¾“å…¥æµä¸­é€ä¸ªè¯»å–å…ƒç´ å¹¶å­˜å‚¨åˆ° elementData æ•°ç»„ä¸­
        for(int var3 = 0; var3 < this.size; ++var3) {
            var2[var3] = var1.readObject();
        }
    }
}
```

# <font style="color:#ECAA04;">ä»€ä¹ˆæ˜¯å¿«é€Ÿå¤±è´¥(fail-fast)å’Œå®‰å…¨å¤±è´¥(fail-safe)ï¼Ÿ</font>
**å¿«é€Ÿå¤±è´¥ (Fail-Fast) å’Œå®‰å…¨å¤±è´¥ (Fail-Safe) æ˜¯****<font style="color:#74B602;">ä¸¤ç§å¤„ç†å¹¶å‘é›†åˆæ“ä½œçš„ä¸åŒç­–ç•¥</font>****ã€‚**

1. **<font style="color:#117CEE;">å¿«é€Ÿå¤±è´¥ (Fail-Fast)</font>****ï¼š**
    - **åœ¨å¿«é€Ÿå¤±è´¥ç­–ç•¥ä¸‹ï¼Œå¦‚æœä¸€ä¸ªé›†åˆåœ¨****<font style="color:#74B602;">è¿­ä»£è¿‡ç¨‹ä¸­è¢«ä¿®æ”¹</font>****ï¼ˆå¢åŠ ã€åˆ é™¤ã€ä¿®æ”¹ç­‰ï¼‰ï¼Œè¿­ä»£å™¨ä¼šç«‹å³****<font style="color:#74B602;">æŠ›å‡º</font>**** ConcurrentModificationException ****<font style="color:#74B602;">å¼‚å¸¸</font>****ï¼Œä»¥é˜²æ­¢å¹¶å‘ä¿®æ”¹å¯¼è‡´ä¸ä¸€è‡´æˆ–ä¸å¯é¢„æµ‹çš„è¡Œä¸ºã€‚**
    - **å¿«é€Ÿå¤±è´¥è¿­ä»£å™¨è¿…é€Ÿæ£€æµ‹åˆ°å¹¶å‘ä¿®æ”¹ï¼Œå› æ­¤å®ƒèƒ½å¤Ÿ****<font style="color:#74B602;">å°½æ—©å‘ç°é—®é¢˜</font>****ï¼Œä½†ä¹Ÿå¯èƒ½å¯¼è‡´æŸäº›æ“ä½œå¤±è´¥ã€‚**

```java
import java.util.ArrayList;
import java.util.Iterator;
import java.util.ConcurrentModificationException;

public class FailFastDemo {
    public static void main(String[] args) {
        ArrayList<String> list = new ArrayList<>();

        list.add("Item 1");
        list.add("Item 2");
        list.add("Item 3");

        Iterator<String> iterator = list.iterator();

        while (iterator.hasNext()) {
            String item = iterator.next();
            System.out.println(item);
            
            // åœ¨è¿­ä»£è¿‡ç¨‹ä¸­å°è¯•æ·»åŠ æ–°å…ƒç´ ï¼Œè§¦å‘ ConcurrentModificationException å¼‚å¸¸
            list.add("New Item");
        }
    }
}
```

2. **<font style="color:#117CEE;">å®‰å…¨å¤±è´¥ (Fail-Safe)</font>****ï¼š**
    - **åœ¨å®‰å…¨å¤±è´¥ç­–ç•¥ä¸‹ï¼Œé›†åˆ****<font style="color:#74B602;">å…è®¸</font>****åœ¨****<font style="color:#74B602;">è¿­ä»£è¿‡ç¨‹</font>****ä¸­è¿›è¡Œ****<font style="color:#74B602;">ä¿®æ”¹</font>****ï¼Œä½†ä¸ä¼šæŠ›å‡º ConcurrentModificationException å¼‚å¸¸ã€‚ç›¸åï¼Œè¿­ä»£å™¨ä¼š****<font style="color:#74B602;">è®¿é—®é›†åˆ</font>****çš„ä¸€ä¸ª****<font style="color:#74B602;">å¿«ç…§æˆ–å¤åˆ¶å“</font>****ï¼Œä»¥ç¡®ä¿ä¸å—å¹¶å‘ä¿®æ”¹çš„å½±å“ã€‚**
    - **å®‰å…¨å¤±è´¥è¿­ä»£å™¨ä¸ä¼šé˜»æ­¢å¹¶å‘ä¿®æ”¹ï¼Œä½†å¯èƒ½ä¼šåœ¨****<font style="color:#74B602;">æŸäº›æƒ…å†µä¸‹è¿”å›ä¸ä¸€è‡´çš„æ•°æ®è§†å›¾</font>****ã€‚è¿™å…è®¸æ›´å¤šçš„çµæ´»æ€§ï¼Œä½†å¯èƒ½éœ€è¦é¢å¤–çš„å¼€é”€æ¥ç»´æŠ¤å‰¯æœ¬æˆ–å¿«ç…§ã€‚**

```java
import java.util.concurrent.CopyOnWriteArrayList;
import java.util.Iterator;

public class FailSafeDemo {
    public static void main(String[] args) {
        CopyOnWriteArrayList<String> list = new CopyOnWriteArrayList<>();

        list.add("Item 1");
        list.add("Item 2");
        list.add("Item 3");

        Iterator<String> iterator = list.iterator();

        while (iterator.hasNext()) {
            String item = iterator.next();
            System.out.println(item);

            // åœ¨è¿­ä»£è¿‡ç¨‹ä¸­æ·»åŠ æ–°å…ƒç´ ï¼Œä¸ä¼šè§¦å‘å¼‚å¸¸
            list.add("New Item");
        }
        
        // è¿­ä»£ç»“æŸåï¼Œé›†åˆå·²ç»åŒ…å«äº†æ–°æ·»åŠ çš„å…ƒç´ 
        System.out.println("Updated List: " + list);
    }
}
```

**é€šå¸¸æƒ…å†µä¸‹ï¼ŒJava é›†åˆæ¡†æ¶ä¸­çš„å¤§å¤šæ•°é›†åˆç±»éƒ½é‡‡ç”¨äº†****<font style="color:#74B602;">å¿«é€Ÿå¤±è´¥ç­–ç•¥</font>****ï¼Œ****<font style="color:#74B602;">ä¾‹å¦‚ ArrayListã€HashMap </font>****ç­‰ã€‚è¿™æ„å‘³ç€å¦‚æœåœ¨è¿­ä»£é›†åˆæ—¶å‘ç”Ÿå¹¶å‘ä¿®æ”¹ï¼Œä¼šç«‹å³æŠ›å‡ºå¼‚å¸¸ã€‚**

**ä¸€äº›å¹¶å‘é›†åˆç±»ï¼Œå¦‚ ****<font style="color:#74B602;">ConcurrentHashMap å’Œ CopyOnWriteArrayList</font>****ï¼Œé‡‡ç”¨äº†****<font style="color:#74B602;">å®‰å…¨å¤±è´¥ç­–ç•¥</font>****ã€‚å®ƒä»¬å…è®¸åœ¨è¿­ä»£è¿‡ç¨‹ä¸­è¿›è¡Œä¿®æ”¹ï¼Œä½†ä¸ä¼šæŠ›å‡ºå¼‚å¸¸ã€‚è¿™å¯¹äºæŸäº›ç‰¹å®šçš„å¹¶å‘åº”ç”¨åœºæ™¯å¯èƒ½æ›´åˆé€‚ã€‚**

**é€‰æ‹©å¿«é€Ÿå¤±è´¥æˆ–å®‰å…¨å¤±è´¥ç­–ç•¥å–å†³äºåº”ç”¨ç¨‹åºçš„éœ€æ±‚å’Œæ€§èƒ½è¦æ±‚ã€‚å¦‚æœå¹¶å‘ä¿®æ”¹å¾ˆå°‘å‘ç”Ÿï¼Œæˆ–è€…éœ€è¦å°½æ—©æ£€æµ‹åˆ°é—®é¢˜ï¼Œé‚£ä¹ˆå¿«é€Ÿå¤±è´¥ç­–ç•¥å¯èƒ½æ›´é€‚åˆã€‚å¦‚æœéœ€è¦æ›´é«˜çš„å¹¶å‘æ€§å’Œçµæ´»æ€§ï¼Œå¹¶ä¸”å¯ä»¥å®¹å¿ä¸€äº›ä¸ä¸€è‡´æ€§ï¼Œé‚£ä¹ˆå®‰å…¨å¤±è´¥ç­–ç•¥å¯èƒ½æ›´åˆé€‚ã€‚**

# <font style="color:#ECAA04;">æ€ä¹ˆä¿è¯ ArrayListçº¿ç¨‹å®‰å…¨ï¼Ÿ</font>
**åœ¨ Java ä¸­ï¼Œä¿è¯ ArrayListçº¿ç¨‹å®‰å…¨çš„æ–¹æ³•å¦‚ä¸‹ï¼š**

+ **<font style="color:#DF2A3F;">ä½¿ç”¨ Collections.synchronizedList æ–¹æ³•ï¼š</font>**** é€šè¿‡ Collections å·¥å…·ç±»çš„ ****<font style="color:#74B602;">synchronizedList æ–¹æ³•</font>****ï¼Œå¯ä»¥å°†ä¸€ä¸ªæ™®é€šçš„ ArrayList ****<font style="color:#74B602;">åŒ…è£…æˆçº¿ç¨‹å®‰å…¨</font>****çš„åˆ—è¡¨ã€‚ä¾‹å¦‚ï¼š**

```java
List<String> synchronizedList = Collections.synchronizedList(new ArrayList<>());
```

+ **<font style="color:#DF2A3F;">ä½¿ç”¨ CopyOnWriteArrayListï¼š</font>****CopyOnWriteArrayList æ˜¯ Java å¹¶å‘åŒ…ä¸­çš„ä¸€ç§****<font style="color:#74B602;">çº¿ç¨‹å®‰å…¨</font>****åˆ—è¡¨å®ç°ã€‚å®ƒé€šè¿‡åœ¨å†™å…¥æ—¶****<font style="color:#74B602;">å¤åˆ¶åº•å±‚æ•°ç»„</font>****æ¥å®ç°çº¿ç¨‹å®‰å…¨ï¼Œ****<font style="color:#74B602;">å…è®¸å¤šä¸ªçº¿ç¨‹</font>****åŒæ—¶è®¿é—®åˆ—è¡¨è€Œä¸ä¼šå‡ºç°å¹¶å‘ä¿®æ”¹é—®é¢˜ã€‚ç¤ºä¾‹ï¼š**

```java
List<String> threadSafeList = new CopyOnWriteArrayList<>();
```

+ **<font style="color:#DF2A3F;">ä½¿ç”¨çº¿ç¨‹å®‰å…¨çš„æ›¿ä»£ç±»ï¼š</font>**** é™¤äº† ArrayListï¼ŒJava è¿˜æä¾›äº†****<font style="color:#74B602;">å…¶ä»–çº¿ç¨‹å®‰å…¨çš„åˆ—è¡¨</font>****å®ç°ï¼Œå¦‚****<font style="color:#74B602;"> Vector </font>****å’Œ****<font style="color:#74B602;"> Stack</font>****ã€‚è¿™äº›ç±»æœ¬èº«æ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œä½†æ€§èƒ½å¯èƒ½ä¸å¦‚ CopyOnWriteArrayListã€‚**
+ **<font style="color:#DF2A3F;">ä½¿ç”¨å¹¶å‘é›†åˆï¼š</font>**** Java å¹¶å‘åŒ…æä¾›äº†ä¸€ç³»åˆ—çº¿ç¨‹å®‰å…¨çš„é›†åˆç±»ï¼Œå¦‚ ****<font style="color:#74B602;">ConcurrentHashMap</font>**** å’Œ ****<font style="color:#74B602;">ConcurrentLinkedQueue</font>****ï¼Œè¿™äº›é›†åˆé€‚ç”¨äºå¹¶å‘ç¯å¢ƒï¼Œå¯ä»¥æ›¿ä»£ ArrayListã€‚**
+ **<font style="color:#DF2A3F;">ä½¿ç”¨è‡ªå®šä¹‰åŒæ­¥æœºåˆ¶ï¼š</font>**** ä½¿ç”¨****<font style="color:#74B602;">åŒæ­¥æœºåˆ¶</font>****ï¼Œå¦‚ ****<font style="color:#74B602;">synchronized å—æˆ–é”</font>****ï¼Œæ¥æ‰‹åŠ¨ä¿æŠ¤ ArrayList çš„è®¿é—®ï¼Œä»¥ç¡®ä¿çº¿ç¨‹å®‰å…¨ã€‚è¿™é€šå¸¸éœ€è¦æ›´å¤šçš„ç¼–ç¨‹å·¥ä½œï¼Œä½†å¯ä»¥æä¾›æ›´å¤§çš„çµæ´»æ€§ã€‚**

# <font style="color:#ECAA04;">CopyOnWriteArrayList äº†è§£å¤šå°‘ï¼Ÿ</font>
**CopyOnWriteArrayList æ˜¯ Java å¹¶å‘åŒ…ï¼ˆjava.util.concurrentï¼‰ä¸­çš„ä¸€ç§çº¿ç¨‹å®‰å…¨çš„åˆ—è¡¨å®ç°ã€‚å®ƒçš„ä¸»è¦ç‰¹ç‚¹æ˜¯åœ¨****<font style="color:#74B602;">è¿›è¡Œå†™æ“ä½œ</font>****ï¼ˆæ·»åŠ ã€ä¿®æ”¹ã€åˆ é™¤å…ƒç´ ï¼‰æ—¶ï¼Œ****<font style="color:#74B602;">ä¸</font>****ä¼šç›´æ¥****<font style="color:#74B602;">åœ¨åŸæœ‰æ•°æ®ä¸Š</font>****è¿›è¡Œ****<font style="color:#74B602;">æ“ä½œ</font>****ï¼Œè€Œæ˜¯****<font style="color:#74B602;">åˆ›å»ºä¸€ä¸ªæ–°çš„å‰¯æœ¬</font>****ï¼Œç„¶ååœ¨å‰¯æœ¬ä¸Šæ‰§è¡Œå†™æ“ä½œã€‚è¿™æ„å‘³ç€è¯»æ“ä½œä¸ä¼šè¢«é˜»å¡ï¼Œå¯ä»¥åœ¨****<font style="color:#74B602;">è¯»</font>****æ“ä½œå’Œ****<font style="color:#74B602;">å†™</font>****æ“ä½œ****<font style="color:#74B602;">åŒæ—¶è¿›è¡Œ</font>****ã€‚**

```java
/**
* Appends the specified element to the end of this list.
*
* @param e element to be appended to this list
* @return {@code true} (as specified by {@link Collection#add})
*/
public boolean add(E e) {
    final ReentrantLock lock = this.lock;//é‡å…¥é”
    lock.lock();//åŠ é”å•¦
    try {
        Object[] elements = getArray();
        int len = elements.length;
        Object[] newElements = Arrays.copyOf(elements, len + 1);//æ‹·è´æ–°æ•°ç»„
        newElements[len] = e;
        setArray(newElements);//å°†å¼•ç”¨æŒ‡å‘æ–°æ•°ç»„
        return true;
    } finally {
        lock.unlock();//è§£é”å•¦
    }
}
```

**ä»¥ä¸‹æ˜¯ä¸€äº› ****CopyOnWriteArrayList**** çš„å…³é”®ç‰¹ç‚¹å’Œç”¨æ³•ï¼š**

+ **<font style="color:#DF2A3F;">çº¿ç¨‹å®‰å…¨ï¼š</font>****CopyOnWriteArrayList æ˜¯****<font style="color:#74B602;">çº¿ç¨‹å®‰å…¨</font>****çš„ï¼Œå¯ä»¥å®‰å…¨åœ°åœ¨å¤šä¸ªçº¿ç¨‹ä¸­åŒæ—¶è¯»å–å’Œä¿®æ”¹é›†åˆï¼Œè€Œ****<font style="color:#74B602;">ä¸éœ€è¦é¢å¤–</font>****çš„åŒæ­¥æªæ–½ã€‚è¿™å¯¹äºéœ€è¦é«˜åº¦å¹¶å‘è®¿é—®çš„æƒ…å†µéå¸¸æœ‰ç”¨ã€‚**
+ **<font style="color:#DF2A3F;">å†™æ—¶å¤åˆ¶ï¼š</font>**** å½“è¿›è¡Œå†™æ“ä½œæ—¶ï¼ˆå¦‚æ·»åŠ ã€ä¿®æ”¹ã€åˆ é™¤å…ƒç´ ï¼‰ï¼ŒCopyOnWriteArrayList ä¸ä¼šç›´æ¥ä¿®æ”¹åŸå§‹é›†åˆï¼Œè€Œæ˜¯****<font style="color:#74B602;">åˆ›å»ºä¸€ä¸ªæ–°çš„å‰¯æœ¬</font>****ï¼Œè¿›è¡Œä¿®æ”¹æ“ä½œï¼Œç„¶åå°†æ–°çš„å‰¯æœ¬æ›¿æ¢åŸå§‹é›†åˆã€‚è¿™ç¡®ä¿äº†****<font style="color:#74B602;">è¯»æ“ä½œä¸ä¼šå—åˆ°å†™æ“ä½œçš„å½±å“</font>****ï¼Œå› ä¸ºè¯»æ“ä½œä»ç„¶è®¿é—®åŸå§‹é›†åˆã€‚**
+ **<font style="color:#DF2A3F;">è¿­ä»£å™¨å®‰å…¨ï¼š</font>**** ç”±äºå†™æ“ä½œ****<font style="color:#74B602;">ä¸ä¼šå½±å“</font>****æ­£åœ¨è¿›è¡Œçš„è¿­ä»£å™¨ï¼Œå› æ­¤ CopyOnWriteArrayList æä¾›äº†****<font style="color:#74B602;">å®‰å…¨çš„è¿­ä»£å™¨</font>****ï¼Œä¸ä¼šæŠ›å‡º ConcurrentModificationException å¼‚å¸¸ã€‚**
+ **<font style="color:#DF2A3F;">é€‚ç”¨åœºæ™¯ï¼š</font>****CopyOnWriteArrayList ****<font style="color:#74B602;">é€‚ç”¨äº</font>****è¯»å¤šå†™å°‘çš„åœºæ™¯ï¼Œå› ä¸ºå†™æ“ä½œéœ€è¦å¤åˆ¶æ•´ä¸ªæ•°ç»„ï¼Œå› æ­¤****<font style="color:#74B602;">å†™æ“ä½œ</font>****çš„****<font style="color:#74B602;">æ€§èƒ½å¼€é”€è¾ƒå¤§</font>****ã€‚å¦‚æœåº”ç”¨ç¨‹åºçš„ä¸»è¦æ“ä½œæ˜¯è¯»å–å…ƒç´ ï¼Œè€Œå†™å…¥æ“ä½œç›¸å¯¹è¾ƒå°‘ï¼Œé‚£ä¹ˆ CopyOnWriteArrayList å¯èƒ½æ˜¯ä¸€ä¸ªåˆé€‚çš„é€‰æ‹©ã€‚**
+ **<font style="color:#DF2A3F;">ä¸é€‚ç”¨äºå®æ—¶æ•°æ®ï¼š</font>**** ç”±äºå†™æ“ä½œéœ€è¦****<font style="color:#74B602;">å¤åˆ¶æ•´ä¸ªæ•°ç»„</font>****ï¼Œå› æ­¤ CopyOnWriteArrayList ****<font style="color:#74B602;">ä¸é€‚ç”¨äº</font>****éœ€è¦****<font style="color:#74B602;">å®æ—¶æ›´æ–°</font>****å’Œç«‹****<font style="color:#74B602;">å³åæ˜ å†™æ“ä½œçš„åœºæ™¯</font>****ã€‚é€‚ç”¨äºè¯»æ“ä½œé¢‘ç¹ï¼Œå†™æ“ä½œç›¸å¯¹è¾ƒå°‘å¹¶ä¸”ä¸éœ€è¦å®æ—¶æ€§çš„æƒ…å†µã€‚**

**æ€»çš„æ¥è¯´ï¼ŒCopyOnWriteArrayList æä¾›äº†ä¸€ç§çº¿ç¨‹å®‰å…¨çš„åˆ—è¡¨å®ç°ï¼Œé€‚ç”¨äºç‰¹å®šçš„å¹¶å‘è¯»å†™éœ€æ±‚ã€‚åœ¨åˆé€‚çš„åœºæ™¯ä¸‹ï¼Œå®ƒå¯ä»¥æä¾›é«˜åº¦çš„å¹¶å‘æ€§å’Œçº¿ç¨‹å®‰å…¨æ€§ï¼Œä½†éœ€è¦æ³¨æ„å†™æ“ä½œçš„æ€§èƒ½å¼€é”€ã€‚**

# <font style="color:#ECAA04;">è¯´ä¸€ä¸‹HashMapçš„æ•°æ®ç»“æ„</font>
**åœ¨ Java 8 ä¸­ï¼ŒHashMap çš„å†…éƒ¨å®ç°ä½¿ç”¨äº†å“ˆå¸Œè¡¨å’Œé“¾è¡¨ç»“åˆçš„æ–¹å¼ï¼Œç§°ä¸ºâ€œ****<font style="color:#74B602;">é“¾-æ¡¶</font>****â€(separate chaining)æ–¹æ³•æˆ–â€œ****<font style="color:#74B602;">é“¾å¼å“ˆå¸Œ</font>****â€ã€‚**

**å…·ä½“æ¥è¯´ï¼ŒHashMap å†…éƒ¨ç»´æŠ¤äº†ä¸€ä¸ªå­˜å‚¨é“¾è¡¨çš„æ•°ç»„ï¼Œç§°ä¸ºâ€œ****<font style="color:#74B602;">æ¡¶æ•°ç»„</font>****â€ã€‚å½“æ·»åŠ å…ƒç´ æ—¶ï¼ŒHashMap ä¼šæ ¹æ®å…ƒç´ çš„****<font style="color:#74B602;">å“ˆå¸Œå€¼å†³å®šè¯¥å…ƒç´ </font>****åº”è¯¥****<font style="color:#74B602;">æ”¾åœ¨å“ª</font>****ä¸ªæ¡¶é‡Œã€‚å¦‚æœå¤šä¸ªå…ƒç´ çš„****<font style="color:#74B602;">å“ˆå¸Œå€¼ç›¸åŒ</font>****ï¼Œè¿™äº›å…ƒç´ å°±ä¼šè¢«æ”¾åˆ°****<font style="color:#74B602;">åŒä¸€ä¸ªæ¡¶</font>****é‡Œï¼Œå¹¶****<font style="color:#74B602;">å½¢æˆ</font>****ä¸€ä¸ª****<font style="color:#74B602;">é“¾è¡¨</font>****ã€‚**

**ä¸ºäº†æé«˜æŸ¥è¯¢æ•ˆç‡ï¼ŒJava 8 åœ¨ HashMap ä¸­****<font style="color:#74B602;">å¼•å…¥äº†çº¢é»‘æ ‘</font>****ã€‚å½“ä¸€ä¸ªæ¡¶ä¸­çš„é“¾è¡¨é•¿åº¦****<font style="color:#74B602;">è¶…è¿‡äº†é˜ˆå€¼</font>****ï¼Œé»˜è®¤ä¸º 8ï¼Œä¸”å½“å‰ HashMap çš„å¤§å°å¤§äºç­‰äº 64(å³å…ƒç´ ä¸ªæ•°å¤§äºç­‰äº 64 * 0.75 = 48)æ—¶ï¼Œè¯¥é“¾è¡¨å°†****<font style="color:#74B602;">è¢«è½¬åŒ–ä¸ºçº¢é»‘æ ‘</font>****ã€‚çº¢é»‘æ ‘èŠ‚ç‚¹ä¸ªæ•°****<font style="color:#74B602;">å°äº 6</font>**** ****<font style="color:#74B602;">è½¬ä¸ºé“¾è¡¨</font>****ã€‚**

![1697030002397-5cc153cd-a4f5-438e-bd5b-69d9214eb87c.jpeg](./img/hATw4O-knQXenPBo/1697030002397-5cc153cd-a4f5-438e-bd5b-69d9214eb87c-804966.jpeg)

+ **<font style="color:#DF2A3F;">å“ˆå¸Œå€¼è®¡ç®—ï¼š</font>****HashMap ä½¿ç”¨é”®çš„å“ˆå¸Œç æ¥è®¡ç®—å“ˆå¸Œå€¼ï¼Œä»¥ç¡®å®šåœ¨å“ªä¸ªæ¡¶ä¸­å­˜å‚¨å…ƒç´ ã€‚**
+ **<font style="color:#DF2A3F;">å­˜å‚¨æ¡¶ï¼š</font>**** å“ˆå¸Œå€¼ç”¨äºç¡®å®šé”®-å€¼å¯¹åœ¨æ•°ç»„çš„å“ªä¸ªä½ç½®ï¼ˆæ¡¶ï¼‰å­˜å‚¨ã€‚****<font style="color:#74B602;">æ¯ä¸ªæ¡¶å¯ä»¥åŒ…å«å¤šä¸ªé”®-å€¼å¯¹</font>****ã€‚**
+ **<font style="color:#DF2A3F;">é“¾è¡¨å’Œçº¢é»‘æ ‘ï¼š</font>**** å½“å¤šä¸ªé”®å…·æœ‰ç›¸åŒçš„å“ˆå¸Œå€¼æ—¶ï¼Œå®ƒä»¬è¢«å­˜å‚¨åœ¨åŒä¸€ä¸ªæ¡¶ä¸­çš„é“¾è¡¨æˆ–çº¢é»‘æ ‘ä¸­ã€‚åœ¨ Java 8 ä¸­ï¼Œå¦‚æœé“¾è¡¨é•¿åº¦è¶…è¿‡äº†é˜ˆå€¼ï¼Œä¸”å½“å‰ HashMap çš„å¤§å°å¤§äºç­‰äº 64ï¼Œé“¾è¡¨ä¼šè¢«è½¬åŒ–ä¸ºçº¢é»‘æ ‘ä»¥æé«˜æ€§èƒ½ã€‚**

# <font style="color:#ECAA04;">è¯´ä¸‹ä½ å¯¹çº¢é»‘æ ‘çš„ç†è§£ï¼Ÿä¸ºä»€ä¹ˆä¸ç”¨äºŒå‰æ ‘/å¹³è¡¡æ ‘å‘¢ï¼Ÿ</font>
**çº¢é»‘æ ‘æœ¬è´¨ä¸Šæ˜¯ä¸€ç§****<font style="color:#74B602;">äºŒå‰æŸ¥æ‰¾æ ‘</font>****ï¼Œåœ¨äºŒå‰æŸ¥æ‰¾æ ‘çš„åŸºç¡€ä¸Š****<font style="color:#74B602;">å¼•å…¥äº†é¢å¤–çš„è§„åˆ™</font>****ï¼Œä»¥ä¿æŒå¹³è¡¡ã€‚è¿™äº›è§„åˆ™åŒ…æ‹¬ï¼š**

+ **æ¯ä¸ªèŠ‚ç‚¹****<font style="color:#74B602;">è¦ä¹ˆæ˜¯çº¢è‰²</font>****ï¼Œ****<font style="color:#74B602;">è¦ä¹ˆæ˜¯é»‘è‰²</font>****ã€‚**
+ **æ ¹èŠ‚ç‚¹****<font style="color:#74B602;">æ°¸è¿œ</font>****æ˜¯é»‘è‰²çš„ã€‚**
+ **<font style="color:#74B602;">æ‰€æœ‰å¶å­èŠ‚ç‚¹</font>****éƒ½æ˜¯****<font style="color:#74B602;">é»‘è‰²</font>****çš„ã€‚**
+ **æ¯ä¸ª****<font style="color:#74B602;">çº¢è‰²èŠ‚ç‚¹</font>****çš„ä¸¤ä¸ª****<font style="color:#74B602;">å­èŠ‚ç‚¹</font>****ä¸€å®šéƒ½æ˜¯****<font style="color:#74B602;">é»‘è‰²</font>****ã€‚**
+ **ä»****<font style="color:#74B602;">ä»»ä¸€èŠ‚ç‚¹åˆ°</font>****å…¶****<font style="color:#74B602;">å­æ ‘ä¸­æ¯ä¸ªå¶å­èŠ‚ç‚¹</font>****çš„è·¯å¾„éƒ½åŒ…å«****<font style="color:#74B602;">ç›¸åŒæ•°é‡</font>****çš„é»‘è‰²èŠ‚ç‚¹ã€‚**

![1697032028817-af21986b-7705-49bf-91e2-0836d0a9d59b.png](./img/hATw4O-knQXenPBo/1697032028817-af21986b-7705-49bf-91e2-0836d0a9d59b-541192.png)

**è¿™äº›è§„åˆ™ç¡®ä¿äº†****<font style="color:#74B602;">æ ‘çš„å¹³è¡¡æ€§</font>****ï¼Œä»è€Œä¿æŒäº†æŸ¥æ‰¾ã€æ’å…¥å’Œåˆ é™¤æ“ä½œçš„****<font style="color:#74B602;">å¯é¢„æµ‹æ€§</font>****å’Œ****<font style="color:#74B602;">é«˜æ•ˆæ€§</font>****ã€‚**

+ **<font style="color:#DF2A3F;">ä¸ºä»€ä¹ˆä¸ä½¿ç”¨æ™®é€šçš„äºŒå‰æ ‘ï¼Ÿ</font>**

**<font style="color:#74B602;">çº¢é»‘æ ‘</font>****å…·æœ‰****<font style="color:#74B602;">å¹³è¡¡æ€§</font>****ï¼Œä½¿å¾—****<font style="color:#74B602;">æœ€å</font>****æƒ…å†µä¸‹çš„æ—¶é—´å¤æ‚åº¦ä¸º****<font style="color:#74B602;"> O(log n)</font>****ï¼Œç›¸è¾ƒäº****<font style="color:#74B602;">æ™®é€šäºŒå‰æ ‘</font>****çš„****<font style="color:#74B602;">æœ€å</font>****æƒ…å†µä¸‹çš„****<font style="color:#74B602;"> O(n)</font>****ï¼Œæ€§èƒ½æ›´å¯é ã€‚**

+ **<font style="color:#DF2A3F;">ä¸ºä»€ä¹ˆä¸ä½¿ç”¨å¹³è¡¡äºŒå‰æ ‘ï¼Ÿ</font>**

**å¹³è¡¡äºŒå‰æ ‘æ˜¯æ›´ä¸¥æ ¼çš„å¹³è¡¡æ ‘ï¼Œ****<font style="color:#74B602;">ç»´æŠ¤å¹³è¡¡çš„ä»£ä»·æ›´é«˜</font>****ï¼Œå› ä¸ºå®ƒéœ€è¦æ›´å¤šçš„æ—‹è½¬æ“ä½œæ¥ç¡®ä¿å¹³è¡¡ã€‚ç›¸å¯¹è€Œè¨€ï¼Œçº¢é»‘æ ‘åœ¨****<font style="color:#74B602;">ä¿æŒå¹³è¡¡</font>****æ–¹é¢****<font style="color:#74B602;">æ•ˆç‡æ›´é«˜</font>****ï¼Œå› æ­¤æ’å…¥å’Œåˆ é™¤æ“ä½œçš„æ€§èƒ½æ›´å¥½ã€‚**

**<font style="color:#74B602;"></font>****ç»¼ä¸Šæ‰€è¿°ï¼Œçº¢é»‘æ ‘åœ¨å¹³è¡¡æ€§å’Œæ€§èƒ½ä¹‹é—´å–å¾—äº†è‰¯å¥½çš„å¹³è¡¡ï¼Œå› æ­¤å®ƒè¢«å¹¿æ³›ç”¨äºå®é™…ç¼–ç¨‹ä¸­ï¼Œç‰¹åˆ«é€‚ç”¨äºéœ€è¦é«˜æ•ˆæŸ¥æ‰¾ã€æ’å…¥å’Œåˆ é™¤æ“ä½œçš„åº”ç”¨ã€‚**

# <font style="color:#ECAA04;">çº¢é»‘æ ‘æ€ä¹ˆä¿æŒå¹³è¡¡çš„ï¼Ÿ</font>
**çº¢é»‘æ ‘****<font style="color:#74B602;">é€šè¿‡æ—‹è½¬å’ŒèŠ‚ç‚¹æŸ“è‰²</font>****è¿™ä¸¤ç§æ–¹å¼æ¥****<font style="color:#74B602;">ä¿æŒå¹³è¡¡</font>****ï¼Œè¿™äº›æ“ä½œæ˜¯çº¢é»‘æ ‘ç»´æŠ¤å¹³è¡¡çš„å…³é”®éƒ¨åˆ†ã€‚**

+ **<font style="color:#DF2A3F;">æ—‹è½¬æ“ä½œï¼š</font>**** æ—‹è½¬æ“ä½œæ˜¯çº¢é»‘æ ‘ç»´æŒå¹³è¡¡çš„ä¸»è¦æ‰‹æ®µä¹‹ä¸€ã€‚å®ƒåŒ…æ‹¬****<font style="color:#74B602;">å·¦æ—‹å’Œå³æ—‹</font>****ä¸¤ç§åŸºæœ¬æ“ä½œã€‚æ—‹è½¬æ“ä½œé€šå¸¸åœ¨æ’å…¥å’Œåˆ é™¤æ“ä½œä¸­ä½¿ç”¨ï¼Œä»¥ç¡®ä¿æ ‘çš„æ€§è´¨å¾—ä»¥ç»´æŠ¤ã€‚**
    - **<font style="color:#74B602;">å·¦æ—‹</font>****å°†ä¸€ä¸ªèŠ‚ç‚¹çš„****<font style="color:#74B602;">å³å­æ ‘æå‡</font>****ä¸ºå…¶****<font style="color:#74B602;">çˆ¶èŠ‚ç‚¹</font>****ï¼Œ**
    - **<font style="color:#74B602;">å³æ—‹</font>****åˆ™å°†ä¸€ä¸ªèŠ‚ç‚¹çš„****<font style="color:#74B602;">å·¦å­æ ‘</font>****æå‡ä¸º****<font style="color:#74B602;">å…¶çˆ¶èŠ‚ç‚¹</font>****ï¼Œä»¥ä¿æŒæ ‘çš„å¹³è¡¡ã€‚**

![1697094920291-5c17b600-768c-434d-80a8-927aa3138932.png](./img/hATw4O-knQXenPBo/1697094920291-5c17b600-768c-434d-80a8-927aa3138932-936875.png)

![1697094929017-ebbaa202-5fc4-436c-9c1b-c5a9a404b4f9.png](./img/hATw4O-knQXenPBo/1697094929017-ebbaa202-5fc4-436c-9c1b-c5a9a404b4f9-513872.png)

+ **<font style="color:#DF2A3F;">èŠ‚ç‚¹æŸ“è‰²æ“ä½œï¼š</font>**** çº¢é»‘æ ‘ä¸­çš„èŠ‚ç‚¹é¢œè‰²æœ‰****<font style="color:#74B602;">çº¢è‰²å’Œé»‘è‰²</font>****ä¸¤ç§ã€‚**
    - **èŠ‚ç‚¹æŸ“è‰²æ“ä½œåŒ…æ‹¬****<font style="color:#74B602;">å°†èŠ‚ç‚¹ç€ä¸ºçº¢è‰²</font>****æˆ–****<font style="color:#74B602;">é»‘è‰²</font>****ï¼Œé€šå¸¸æ ¹æ®****<font style="color:#74B602;">æ’å…¥å’Œåˆ é™¤æ“ä½œ</font>****çš„éœ€è¦æ¥****<font style="color:#74B602;">æ”¹å˜èŠ‚ç‚¹</font>****çš„****<font style="color:#74B602;">é¢œè‰²</font>****ã€‚**
    - **æŸ“è‰²æ“ä½œç”¨äºæ»¡è¶³çº¢é»‘æ ‘çš„è§„åˆ™ï¼Œä¾‹å¦‚ï¼Œä¿è¯ç›¸é‚»èŠ‚ç‚¹ä¸åŒæ—¶ä¸ºçº¢è‰²ï¼Œä»¥ç»´æŒå¹³è¡¡ã€‚**

![1697094942268-c653dd1d-1dcc-4cac-bb92-a293294107b4.png](./img/hATw4O-knQXenPBo/1697094942268-c653dd1d-1dcc-4cac-bb92-a293294107b4-582843.png)

**è¿™ä¸¤ç§æ“ä½œç›¸äº’é…åˆï¼Œä»¥ä¿æŒæ ‘çš„å¹³è¡¡ã€‚**

**å½“è¿›è¡Œæ’å…¥å’Œåˆ é™¤æ“ä½œæ—¶ï¼Œçº¢é»‘æ ‘ä¼šæ ¹æ®è§„åˆ™è¿›è¡Œæ—‹è½¬å’ŒæŸ“è‰²ï¼Œä»¥ç¡®ä¿æ ‘çš„é«˜åº¦ä¿æŒç›¸å¯¹è¾ƒå°ï¼Œä¸”æ‰€æœ‰çº¢é»‘æ ‘çš„æ€§è´¨å¾—ä»¥æ»¡è¶³ã€‚**

**è¿™äº›æ“ä½œä½¿å¾—çº¢é»‘æ ‘èƒ½å¤Ÿé«˜æ•ˆåœ°å¤„ç†æ’å…¥ã€åˆ é™¤å’ŒæŸ¥æ‰¾ç­‰æ“ä½œï¼Œä¿æŒæ€§èƒ½ç¨³å®šã€‚**

# <font style="color:#ECAA04;">HashMapçš„put å®ç°æ˜¯æ€æ ·çš„ï¼Ÿ</font>
**HashMap çš„ put æ–¹æ³•å®ç°äº†å‘å“ˆå¸Œè¡¨ä¸­æ·»åŠ é”®å€¼å¯¹çš„åŠŸèƒ½ã€‚ä»¥ä¸‹æ˜¯ HashMap çš„ put æ–¹æ³•çš„ä¸»è¦å®ç°æ­¥éª¤ï¼š**

```java
public V put(K key, V value) {
    return putVal(hash(key), key, value, false, true);
}

// ç¬¬å››ä¸ªå‚æ•° onlyIfAbsent å¦‚æœæ˜¯ trueï¼Œé‚£ä¹ˆåªæœ‰åœ¨ä¸å­˜åœ¨è¯¥ key æ—¶æ‰ä¼šè¿›è¡Œ put æ“ä½œ
// ç¬¬äº”ä¸ªå‚æ•° evict æˆ‘ä»¬è¿™é‡Œä¸å…³å¿ƒ
final V putVal(int hash, K key, V value, boolean onlyIfAbsent,
               boolean evict) {
    Node<K,V>[] tab; Node<K,V> p; int n, i;

    // å¦‚æœå“ˆå¸Œè¡¨ä¸ºç©ºæˆ–é•¿åº¦ä¸º0ï¼Œè¿›è¡Œåˆå§‹åŒ–æˆ–æ‰©å®¹
    if ((tab = table) == null || (n = tab.length) == 0)
        n = (tab = resize()).length;

    // æ ¹æ®å“ˆå¸Œå€¼è®¡ç®—ç´¢å¼•
    if ((p = tab[i = (n - 1) & hash]) == null)
        // å¦‚æœæ¡¶ä¸ºç©ºï¼Œç›´æ¥å°†æ–°èŠ‚ç‚¹æ”¾å…¥æ¡¶ä¸­
        tab[i] = newNode(hash, key, value, null);
    else {
        Node<K,V> e; K k;

        // å¦‚æœå½“å‰èŠ‚ç‚¹çš„å“ˆå¸Œå€¼å’Œé”®ä¸è¦æ’å…¥çš„ç›¸ç­‰ï¼Œæ‰¾åˆ°åŒ¹é…çš„èŠ‚ç‚¹
        if (p.hash == hash &&
            ((k = p.key) == key || (key != null && key.equals(k)))
            e = p;
        else if (p instanceof TreeNode)
            // å¦‚æœå½“å‰èŠ‚ç‚¹æ˜¯æ ‘èŠ‚ç‚¹ï¼Œè°ƒç”¨æ ‘èŠ‚ç‚¹çš„ putTreeVal æ–¹æ³•
            e = ((TreeNode<K,V>)p).putTreeVal(this, tab, hash, key, value);
        else {
            for (int binCount = 0; ; ++binCount) {
                if ((e = p.next) == null) {
                    // éå†é“¾è¡¨ï¼Œå¦‚æœåˆ°è¾¾é“¾è¡¨æœ«å°¾ï¼Œåˆ›å»ºæ–°èŠ‚ç‚¹å¹¶æ·»åŠ åˆ°é“¾è¡¨ä¸­
                    p.next = newNode(hash, key, value, null);
                    if (binCount >= TREEIFY_THRESHOLD - 1) // -1 for 1st
                        treeifyBin(tab, hash);
                    break;
                }
                if (e.hash == hash &&
                    ((k = e.key) == key || (key != null && key.equals(k)))
                    // å¦‚æœæ‰¾åˆ°åŒ¹é…çš„èŠ‚ç‚¹ï¼Œè·³å‡ºå¾ªç¯
                    break;
                p = e; // ç»§ç»­éå†é“¾è¡¨
            }
        }
        if (e != null) { // å­˜åœ¨ç›¸åŒé”®çš„æ˜ å°„
            V oldValue = e.value;
            if (!onlyIfAbsent || oldValue == null)
                // å¦‚æœä¸ä»…ä»…æ˜¯æ’å…¥æˆ–æ—§å€¼ä¸ºnullï¼Œæ›´æ–°èŠ‚ç‚¹çš„å€¼
                e.value = value;
            afterNodeAccess(e);
            return oldValue;
        }
    }
    ++modCount; // æ›´æ–°ä¿®æ”¹è®¡æ•°å™¨
    if (++size > threshold)
        // å¦‚æœå…ƒç´ æ•°é‡è¶…è¿‡é˜ˆå€¼ï¼Œè¿›è¡Œæ‰©å®¹
        resize();
    afterNodeInsertion(evict);
    return null; // è¿”å› null è¡¨ç¤ºæ²¡æœ‰æ—§å€¼
}
```

![1697547078178-2fe3e924-e562-4fa7-9bf8-a94b42f1eb4f.jpeg](./img/hATw4O-knQXenPBo/1697547078178-2fe3e924-e562-4fa7-9bf8-a94b42f1eb4f-369534.jpeg)

**è¿™æ®µä»£ç å±•ç¤ºäº† HashMap çš„ put æ–¹æ³•çš„å®ç°ï¼ŒåŒ…æ‹¬è®¡ç®—å“ˆå¸Œå€¼ã€å®šä½æ¡¶ã€å¤„ç†å“ˆå¸Œå†²çªã€æ’å…¥èŠ‚ç‚¹ã€æ‰©å®¹ç­‰å…³é”®æ­¥éª¤ã€‚è¯¥æ–¹æ³•ç¡®ä¿äº†é”®å€¼å¯¹èƒ½å¤Ÿæ­£ç¡®æ’å…¥åˆ°å“ˆå¸Œè¡¨ä¸­ï¼Œå¹¶åœ¨éœ€è¦æ—¶è¿›è¡Œæ‰©å®¹ä»¥ç»´æŠ¤æ€§èƒ½ã€‚**

# <font style="color:#ECAA04;">ä¸ºä»€ä¹ˆå“ˆå¸Œ/æ‰°åŠ¨å‡½æ•°èƒ½é™ä½ hashç¢°æ’?</font>
**<font style="color:#74B602;">æ‰°åŠ¨å‡½æ•°</font>****æœ¬è´¨ä¸Šæ˜¯ä¸€ç§ç”¨äº****<font style="color:#74B602;">é™ä½å“ˆå¸Œç¢°æ’</font>****çš„æŠ€æœ¯ã€‚æ‰°åŠ¨å‡½æ•°é€šå¸¸å°†åŸå§‹å“ˆå¸Œå€¼****<font style="color:#74B602;">è¿›è¡ŒäºŒæ¬¡å“ˆå¸Œæˆ–å…¶ä»–å˜æ¢</font>****ï¼Œä½¿å¾—ç›¸åŒçš„åŸå§‹å“ˆå¸Œå€¼åœ¨****<font style="color:#74B602;">ç»è¿‡æ‰°åŠ¨å‡½æ•°å¤„ç†</font>****åå¾—åˆ°çš„****<font style="color:#74B602;">å“ˆå¸Œå€¼å°½å¯èƒ½åœ°ä¸åŒ</font>****ã€‚è¿™æ ·ï¼Œå³ä½¿æœ‰ä¸åŒçš„é”®å€¼äº§ç”Ÿäº†ç›¸åŒçš„åŸå§‹å“ˆå¸Œå€¼ï¼Œç»è¿‡æ‰°åŠ¨å‡½æ•°å¤„ç†åä»ç„¶èƒ½å¤Ÿå¾—åˆ°ä¸åŒçš„å“ˆå¸Œå€¼ï¼Œä»è€Œ****<font style="color:#74B602;">å‡å°‘å“ˆå¸Œç¢°æ’çš„æ¦‚ç‡ã€‚</font>**

**å‡å¦‚ HashMap æ•°ç»„çš„åˆå§‹å¤§å°æ‰ 16ï¼Œå°±éœ€è¦ç”¨ä¹‹å‰éœ€è¦å¯¹æ•°ç»„çš„é•¿åº¦å–æ¨¡è¿ç®—ï¼Œå¾—åˆ°çš„ä½™æ•°æ‰èƒ½ç”¨æ¥è®¿é—®æ•°ç»„ä¸‹æ ‡ã€‚**

**æºç ä¸­æ¨¡è¿ç®—å°±æ˜¯æŠŠæ•£åˆ—å€¼å’Œæ•°ç»„é•¿åº¦ - 1 åšä¸€ä¸ª "ä¸&" æ“ä½œï¼Œ****<font style="color:#74B602;">ä½è¿ç®—æ¯”å–ä½™ % è¿ç®—è¦å¿«</font>****ã€‚**

```java
& å…¨ä¸º1æ‰ä¸º1
^ ç›¸åŒä¸º0ï¼Œä¸åŒä¸º1

i = (n - 1) & hash
hash = ((h = key.hashCode()) ^ (h >>> 16))
                       
16    0000 0000 0000 0000 0000 0000 0001 0000
15    0000 0000 0000 0000 0000 0000 0000 1111
hash  0000 0000 0000 0000 0000 0000 0000 0110
&     0000 0000 0000 0000 0000 0000 0000 0110
                                    0000-1111

32    0000 0000 0000 0000 0000 0000 0010 0000
31    0000 0000 0000 0000 0000 0000 0001 1111
hash  0000 0000 0000 0000 0000 0000 0001 0110
&     0000 0000 0000 0000 0000 0000 0001 0110

31    0000 0000 0000 0000 0000 0000 0001 1111
hash  0000 0000 0000 0000 0000 0000 0000 0110
&     0000 0000 0000 0000 0000 0000 0000 0110
									00000-11111
```

# <font style="color:#ECAA04;">HashMap çš„ get å®ç°ï¼Ÿ</font>
**ç›¸å¯¹äº put æ¥è¯´ï¼Œget æ¯”è¾ƒç®€å•ï¼š**

+ **è®¡ç®— ****<font style="color:#74B602;">key çš„ hash å€¼</font>****ï¼Œæ ¹æ® hash å€¼æ‰¾åˆ°å¯¹åº”****<font style="color:#74B602;">æ•°ç»„ä¸‹æ ‡</font>****: hash & (length-1)**
+ **<font style="color:#74B602;">åˆ¤æ–­</font>****æ•°ç»„****<font style="color:#74B602;">è¯¥ä½ç½®</font>****å¤„çš„****<font style="color:#74B602;">å…ƒç´ </font>****æ˜¯å¦åˆšå¥½å°±æ˜¯æˆ‘ä»¬è¦æ‰¾çš„ï¼Œå¦‚æœä¸æ˜¯ï¼Œèµ°ç¬¬ä¸‰æ­¥**
+ **åˆ¤æ–­è¯¥å…ƒç´ ç±»å‹****<font style="color:#74B602;">æ˜¯å¦æ˜¯ TreeNod</font>****eï¼Œå¦‚æœæ˜¯ï¼Œç”¨çº¢é»‘æ ‘çš„æ–¹æ³•å–æ•°æ®ï¼Œå¦‚æœä¸æ˜¯ï¼Œèµ°ç¬¬å››æ­¥**
+ **éå†é“¾è¡¨ï¼Œç›´åˆ°****<font style="color:#74B602;">æ‰¾åˆ°ç›¸ç­‰</font>****(==æˆ–equals)çš„ key**

```java
public V get(Object key) {
    Node<K,V> e;
    return (e = getNode(hash(key), key)) == null ? null : e.value;
}

final Node<K,V> getNode(int hash, Object key) {
    Node<K,V>[] tab; // å“ˆå¸Œè¡¨æ•°ç»„
    Node<K,V> first, e; // first è¡¨ç¤ºæ¡¶ä¸­çš„ç¬¬ä¸€ä¸ªèŠ‚ç‚¹ï¼Œe ç”¨äºéå†é“¾è¡¨æˆ–æ ‘ä¸­çš„èŠ‚ç‚¹
    int n; // å“ˆå¸Œè¡¨å®¹é‡
    K k; // é”®å¯¹è±¡

    // æ£€æŸ¥å“ˆå¸Œè¡¨éç©ºï¼Œå®¹é‡å¤§äº0ï¼Œä»¥åŠå“ˆå¸Œå€¼æ‰€åœ¨æ¡¶ä¸ä¸ºç©º
    if ((tab = table) != null && (n = tab.length) > 0 &&
        (first = tab[(n - 1) & hash]) != null) {
        // æ£€æŸ¥ç¬¬ä¸€ä¸ªèŠ‚ç‚¹æ˜¯å¦åŒ¹é…ï¼Œä¸€èˆ¬åœ¨æ¡¶çš„ç¬¬ä¸€ä¸ªèŠ‚ç‚¹å¼€å§‹æŸ¥æ‰¾
        if (first.hash == hash && // å§‹ç»ˆæ£€æŸ¥ç¬¬ä¸€ä¸ªèŠ‚ç‚¹
            ((k = first.key) == key || (key != null && key.equals(k))))
            return first;

        // å¦‚æœæœ‰å¤šä¸ªèŠ‚ç‚¹åœ¨åŒä¸€ä¸ªæ¡¶ä¸­ï¼Œéœ€è¦éå†é“¾è¡¨æˆ–æ ‘
        if ((e = first.next) != null) {
            // å¦‚æœç¬¬ä¸€ä¸ªèŠ‚ç‚¹æ˜¯æ ‘èŠ‚ç‚¹ï¼Œä½¿ç”¨æ ‘èŠ‚ç‚¹çš„æŸ¥æ‰¾æ–¹æ³•
            if (first instanceof TreeNode)
                return ((TreeNode<K,V>)first).getTreeNode(hash, key);

            // éå†é“¾è¡¨ä¸­çš„èŠ‚ç‚¹
            do {
                if (e.hash == hash &&
                    ((k = e.key) == key || (key != null && key.equals(k))))
                    return e;
            } while ((e = e.next) != null);
        }
    }
    
    // å¦‚æœæœªæ‰¾åˆ°åŒ¹é…çš„é”®å€¼å¯¹ï¼Œè¿”å› null
    return null;
}
```

# <font style="color:#ECAA04;">è§£å†³å“ˆå¸Œå†²çªæœ‰å“ªäº›æ–¹æ³•å‘¢ï¼Ÿ</font>
**<font style="color:#DF2A3F;">ä»€ä¹ˆæ˜¯å“ˆå¸Œå†²çªï¼Ÿ</font>**

**å½“****<font style="color:#74B602;">ä¸¤ä¸ªä¸åŒçš„æ•°</font>****ç»è¿‡å“ˆå¸Œå‡½æ•°****<font style="color:#74B602;">è®¡ç®—å</font>****å¾—åˆ°äº†****<font style="color:#74B602;">åŒä¸€ä¸ªç»“æœ</font>****ï¼Œå³ä»–ä»¬ä¼šè¢«æ˜ å°„åˆ°å“ˆå¸Œè¡¨çš„****<font style="color:#74B602;">åŒä¸€ä¸ªä½ç½®</font>****æ—¶ï¼Œå³ç§°ä¸ºå‘ç”Ÿäº†****<font style="color:#74B602;">å“ˆå¸Œå†²çª</font>****ã€‚ç®€å•æ¥è¯´å°±æ˜¯å“ˆå¸Œå‡½æ•°ç®—å‡ºæ¥çš„åœ°å€è¢«åˆ«çš„å…ƒç´ å ç”¨äº†ã€‚**

**<font style="color:#DF2A3F;">å¦‚ä½•è§£å†³å“ˆå¸Œå†²çªï¼Ÿ</font>**

+ **<font style="color:#117CEE;">é“¾åœ°å€æ³•ï¼š</font>****è¿™æ˜¯ä¸€ç§å¸¸è§çš„è§£å†³å“ˆå¸Œå†²çªçš„æ–¹æ³•ï¼Œå®ƒä½¿ç”¨ä¸€ä¸ª****<font style="color:#74B602;">æ•°ç»„æ¥å­˜å‚¨é“¾è¡¨</font>****ï¼Œæ¯ä¸ªå“ˆå¸Œå€¼çš„****<font style="color:#74B602;">å†²çªå…ƒç´ </font>****éƒ½****<font style="color:#74B602;">å­˜å‚¨åœ¨é“¾è¡¨</font>****ä¸­ã€‚é“¾åœ°å€æ³•ä¸éœ€è¦é¢å¤–çš„ç©ºé—´æ¥å¤„ç†å†²çªï¼Œä½†éœ€è¦éå†é“¾è¡¨æ¥æŸ¥æ‰¾å…ƒç´ ã€‚**
+ **<font style="color:#117CEE;">çº¿æ€§æ¢æµ‹ï¼š</font>****åœ¨çº¿æ€§æ¢æµ‹ä¸­ï¼Œå½“å‘ç”Ÿå“ˆå¸Œå†²çªæ—¶ï¼Œé€šè¿‡****<font style="color:#74B602;">é¡ºåºæŸ¥æ‰¾</font>****å“ˆå¸Œè¡¨ä¸­çš„****<font style="color:#74B602;">ä¸‹ä¸€ä¸ªæ§½ä½</font>****ï¼Œç›´åˆ°æ‰¾åˆ°ä¸€ä¸ªç©ºé—²çš„æ§½ä½æ¥å­˜å‚¨æ•°æ®ã€‚è¿™ç§æ–¹æ³•å¯ä»¥å½¢æˆä¸€ä¸ªçº¿æ€§æ¢æµ‹åºåˆ—ã€‚**

![1684156756942-50757abd-7245-4033-b544-e8df1ccda19e.png](./img/hATw4O-knQXenPBo/1684156756942-50757abd-7245-4033-b544-e8df1ccda19e-734099.png)

+ **<font style="color:#117CEE;">åŒé‡å“ˆå¸Œï¼š</font>****åŒé‡æ•£åˆ—æ˜¯ä¸€ç§ä½¿ç”¨****<font style="color:#74B602;">ä¸¤ä¸ªå“ˆå¸Œå‡½æ•°</font>****çš„æ–¹æ³•ã€‚å½“å‘ç”Ÿå“ˆå¸Œå†²çªæ—¶ï¼Œé¦–å…ˆä½¿ç”¨****<font style="color:#74B602;">ç¬¬ä¸€ä¸ªå“ˆå¸Œ</font>****å‡½æ•°æ‰¾åˆ°ä¸€ä¸ªä½ç½®ï¼Œå¦‚æœè¯¥ä½ç½®å·²è¢«å ç”¨ï¼Œå°±****<font style="color:#74B602;">ä½¿ç”¨ç¬¬äºŒä¸ªå“ˆå¸Œå‡½æ•°</font>****æ¥æŸ¥æ‰¾ä¸‹ä¸€ä¸ªä½ç½®ã€‚è¿™ç§æ–¹æ³•é€šå¸¸èƒ½å¤Ÿæ›´å¥½åœ°åˆ†æ•£æ•°æ®ã€‚**
+ **<font style="color:#117CEE;">å»ºç«‹å…¬å…±æº¢å‡ºåŒºï¼š</font>****å»ºç«‹å…¬å…±æº¢å‡ºåŒºæ˜¯ä¸€ç§ç®€å•çš„è§£å†³å“ˆå¸Œå†²çªçš„æ–¹æ³•ã€‚å½“å‘ç”Ÿå“ˆå¸Œ****<font style="color:#74B602;">å†²çªæ—¶</font>****ï¼Œå°†****<font style="color:#74B602;">å†²çªçš„å…ƒç´ å­˜å‚¨</font>****åœ¨ä¸€ä¸ª****<font style="color:#74B602;">å…¬å…±æº¢å‡ºåŒº</font>****ä¸­ï¼Œæ¯ä¸ªæ¡¶åªå­˜æ”¾ä¸€ä¸ªå…ƒç´ ã€‚åœ¨æŸ¥æ‰¾æ—¶ï¼Œå¦‚æœ****<font style="color:#74B602;">å¯¹åº”çš„æ¡¶ä¸ºç©º</font>****ï¼Œ****<font style="color:#74B602;">åˆ™</font>****è¯´æ˜è¦æŸ¥æ‰¾çš„****<font style="color:#74B602;">å…ƒç´ ä¸å­˜åœ¨</font>****ï¼›å¦‚æœå¯¹åº”çš„æ¡¶ä¸­****<font style="color:#74B602;">å­˜æ”¾äº†å…ƒç´ </font>****ï¼Œ****<font style="color:#74B602;">åˆ™</font>****åœ¨å…¬å…±æº¢å‡ºåŒºä¸­****<font style="color:#74B602;">æŸ¥æ‰¾å¯¹åº”</font>****çš„å…ƒç´ ã€‚**

# <font style="color:#ECAA04;">HashMap æ˜¯çº¿ç¨‹å®‰å…¨çš„å—ï¼Ÿå¤šçº¿ç¨‹ä¸‹ä¼šæœ‰ä»€ä¹ˆé—®é¢˜ï¼Ÿ</font>
**HashMap ****<font style="color:#74B602;">ä¸æ˜¯çº¿ç¨‹å®‰å…¨çš„</font>****ï¼Œå®ƒæ˜¯éåŒæ­¥çš„æ•°æ®ç»“æ„ã€‚åœ¨å¤šçº¿ç¨‹ç¯å¢ƒä¸‹ï¼Œä½¿ç”¨ HashMap å¯èƒ½ä¼šå‡ºç°ä»¥ä¸‹é—®é¢˜ï¼š**

+ **<font style="color:#DF2A3F;">æ‰©å®¹æ­»å¾ªç¯ï¼š</font>****åœ¨ JDK 1.7 ä¸­ï¼ŒHashMap ä½¿ç”¨****<font style="color:#74B602;">å¤´æ’æ³•æ’å…¥å…ƒç´ </font>****ï¼Œå½“å¤šä¸ªçº¿ç¨‹åŒæ—¶è¿›è¡Œæ‰©å®¹æ“ä½œæ—¶ï¼Œå¯èƒ½ä¼š****<font style="color:#74B602;">å¯¼è‡´ç¯å½¢é“¾è¡¨</font>****çš„å½¢æˆï¼Œä»è€Œ****<font style="color:#74B602;">é™·å…¥æ­»å¾ªç¯</font>****ã€‚ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œåœ¨ JDK 1.8 ä¸­é‡‡ç”¨äº†å°¾æ’æ³•æ’å…¥å…ƒç´ ï¼Œä¿æŒäº†é“¾è¡¨å…ƒç´ çš„é¡ºåºï¼Œé¿å…äº†æ­»å¾ªç¯çš„é—®é¢˜ã€‚**
+ **<font style="color:#DF2A3F;">å…ƒç´ ä¸¢å¤±ï¼š</font>****å½“å¤šä¸ªçº¿ç¨‹åŒæ—¶æ‰§è¡Œ put æ“ä½œæ—¶ï¼Œå¦‚æœå®ƒä»¬è®¡ç®—å‡ºçš„****<font style="color:#74B602;">ç´¢å¼•ä½ç½®ç›¸åŒ</font>****ï¼Œå°±ä¼šé€ æˆå‰ä¸€ä¸ª key ****<font style="color:#74B602;">è¢«åä¸€ä¸ª key è¦†ç›–</font>****çš„æƒ…å†µï¼Œä»è€Œ****<font style="color:#74B602;">å¯¼è‡´å…ƒç´ çš„ä¸¢å¤±</font>****ã€‚**
+ **<font style="color:#DF2A3F;">get ä¸º nullï¼š</font>****å½“****<font style="color:#74B602;">ä¸€ä¸ª</font>****çº¿ç¨‹æ‰§è¡Œ ****<font style="color:#74B602;">put æ“ä½œå¯¼è‡´æ‰©å®¹</font>****æ—¶ï¼Œè€Œ****<font style="color:#74B602;">å¦ä¸€ä¸ª</font>****çº¿ç¨‹åŒæ—¶****<font style="color:#74B602;">æ‰§è¡Œ get æ“ä½œ</font>****ï¼Œæœ‰å¯èƒ½ä¼šå¯¼è‡´ ****<font style="color:#74B602;">get è¿”å› null </font>****çš„æƒ…å†µã€‚è¿™æ˜¯å› ä¸ºåœ¨****<font style="color:#74B602;">æ‰©å®¹è¿‡ç¨‹</font>****ä¸­ï¼ŒHashMap çš„****<font style="color:#74B602;">ç»“æ„å‘ç”Ÿäº†å˜åŒ–</font>****ï¼Œget æ“ä½œå¯èƒ½ä¼šåœ¨æ—§çš„ç»“æ„ä¸­æŸ¥æ‰¾å…ƒç´ è€Œå¯¼è‡´æ‰¾ä¸åˆ°ã€‚**

**ä¸ºäº†åœ¨å¤šçº¿ç¨‹ç¯å¢ƒä¸‹ä½¿ç”¨å®‰å…¨çš„ HashMapï¼Œå¯ä»¥é‡‡å–ä»¥ä¸‹æªæ–½ï¼š**

1. **<font style="color:#117CEE;">ä½¿ç”¨çº¿ç¨‹å®‰å…¨çš„æ›¿ä»£å“ï¼š</font>****ä½¿ç”¨çº¿ç¨‹å®‰å…¨çš„é›†åˆç±»ï¼Œå¦‚ ****<font style="color:#74B602;">ConcurrentHashMap</font>****ï¼Œå®ƒæ˜¯ä¸“é—¨è®¾è®¡ç”¨äºå¤šçº¿ç¨‹ç¯å¢ƒçš„å“ˆå¸Œè¡¨ï¼Œæä¾›äº†é«˜æ•ˆçš„å¹¶å‘æ€§èƒ½ã€‚**

```java
import java.util.concurrent.ConcurrentHashMap;

public class ConcurrentHashMapExample {
    public static void main(String[] args) {
        ConcurrentHashMap<String, Integer> concurrentMap = new ConcurrentHashMap<>();

        concurrentMap.put("A", 1);
        concurrentMap.put("B", 2);

        // å¤šä¸ªçº¿ç¨‹åŒæ—¶è®¿é—® ConcurrentHashMap æ˜¯å®‰å…¨çš„
        Runnable runnable = () -> {
            String key = "A";
            int value = concurrentMap.get(key);
            System.out.println("Thread: " + Thread.currentThread().getId() + " - Value: " + value);
        };

        Thread thread1 = new Thread(runnable);
        Thread thread2 = new Thread(runnable);

        thread1.start();
        thread2.start();
    }
}
```

2. **<font style="color:#117CEE;">æ˜¾å¼åŒæ­¥ï¼š</font>****å¦‚æœå¿…é¡»ä½¿ç”¨æ™®é€šçš„ HashMapï¼Œç¡®ä¿åœ¨è®¿é—®å’Œä¿®æ”¹ HashMap æ—¶è¿›è¡Œé€‚å½“çš„åŒæ­¥ï¼Œä½¿ç”¨ ****<font style="color:#74B602;">synchronized</font>**** å…³é”®å­—æˆ–å…¶ä»–åŒæ­¥æœºåˆ¶æ¥ä¿æŠ¤å…±äº«èµ„æºã€‚**

```java
import java.util.HashMap;
import java.util.Map;

public class SynchronizedHashMapExample {
    public static void main(String[] args) {
        Map<String, Integer> synchronizedMap = new HashMap<>();

        synchronizedMap.put("A", 1);
        synchronizedMap.put("B", 2);

        // å¤šä¸ªçº¿ç¨‹ä½¿ç”¨æ˜¾å¼åŒæ­¥ç¡®ä¿çº¿ç¨‹å®‰å…¨
        Runnable runnable = () -> {
            synchronized (synchronizedMap) {
                String key = "A";
                int value = synchronizedMap.get(key);
                System.out.println("Thread: " + Thread.currentThread().getId() + " - Value: " + value);
            }
        };

        Thread thread1 = new Thread(runnable);
        Thread thread2 = new Thread(runnable);

        thread1.start();
        thread2.start();
    }
}
```

3. **<font style="color:#117CEE;">ä½¿ç”¨çº¿ç¨‹å±€éƒ¨å˜é‡ï¼š</font>****ä¸ºæ¯ä¸ªçº¿ç¨‹ç»´æŠ¤ä¸€ä¸ªç‹¬ç«‹çš„ HashMap å®ä¾‹ï¼Œä»¥é¿å…çº¿ç¨‹é—´ç«äº‰ã€‚**

```java
import java.util.HashMap;
import java.util.Map;

public class ThreadLocalHashMapExample {
    public static void main(String[] args) {
        // ä½¿ç”¨çº¿ç¨‹å±€éƒ¨å˜é‡æ¥ç»´æŠ¤ç‹¬ç«‹çš„ HashMap å®ä¾‹
        ThreadLocal<Map<String, Integer>> threadLocalMap = ThreadLocal.withInitial(HashMap::new);

        // åˆ›å»ºå¤šä¸ªçº¿ç¨‹ï¼Œæ¯ä¸ªçº¿ç¨‹éƒ½æœ‰ç‹¬ç«‹çš„ HashMap å®ä¾‹
        Runnable runnable = () -> {
            Map<String, Integer> localMap = threadLocalMap.get();
            localMap.put("A", 1);
            localMap.put("B", 2);

            String key = "A";
            int value = localMap.get(key);
            System.out.println("Thread: " + Thread.currentThread().getId() + " - Value: " + value);
        };

        Thread thread1 = new Thread(runnable);
        Thread thread2 = new Thread(runnable);

        thread1.start();
        thread2.start();
    }
}
```

**æ€»ä¹‹ï¼Œåœ¨å¤šçº¿ç¨‹ç¯å¢ƒä¸‹ï¼Œåº”è°¨æ…ä½¿ç”¨ HashMapï¼Œå¹¶æ ¹æ®å…·ä½“æƒ…å†µé€‰æ‹©åˆé€‚çš„çº¿ç¨‹å®‰å…¨æœºåˆ¶ï¼Œä»¥ç¡®ä¿æ•°æ®çš„ä¸€è‡´æ€§å’Œçº¿ç¨‹å®‰å…¨ã€‚**

# <font style="color:#ECAA04;">Java æ³›å‹ä¸­çš„é€šé…ç¬¦ Tï¼ŒEï¼ŒKï¼ŒVï¼Œï¼Ÿæœ‰å»ææ¸…æ¥šå—ï¼Ÿ</font>
<font style="color:rgb(36, 41, 47);background-color:#FFFFFF;">åœ¨Javaæ³›å‹ä¸­ï¼Œé€šé…ç¬¦ </font>`<font style="color:rgb(36, 41, 47);background-color:#FFFFFF;">T</font>`<font style="color:rgb(36, 41, 47);background-color:#FFFFFF;">ã€</font>`<font style="color:rgb(36, 41, 47);background-color:#FFFFFF;">E</font>`<font style="color:rgb(36, 41, 47);background-color:#FFFFFF;">ã€</font>`<font style="color:rgb(36, 41, 47);background-color:#FFFFFF;">K</font>`<font style="color:rgb(36, 41, 47);background-color:#FFFFFF;">ã€</font>`<font style="color:rgb(36, 41, 47);background-color:#FFFFFF;">V</font>`<font style="color:rgb(36, 41, 47);background-color:#FFFFFF;">ã€</font>`<font style="color:rgb(36, 41, 47);background-color:#FFFFFF;">?</font>`<font style="color:rgb(36, 41, 47);background-color:#FFFFFF;"> æ˜¯å¸¸è§çš„ç¬¦å·ï¼Œå®ƒä»¬æœ¬è´¨ä¸Šéƒ½æ˜¯é€šé…ç¬¦ï¼Œä½†æ ¹æ®çº¦å®šä¿—æˆçš„å‘½åä¹ æƒ¯ï¼Œå®ƒä»¬åœ¨ä¸åŒçš„ä¸Šä¸‹æ–‡ä¸­å…·æœ‰ç‰¹å®šçš„å«ä¹‰ã€‚åœ¨å¼„æ¸…æ¥šè¿™äº›ç¬¦å·ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆçœ‹ä¸‹æ³›å‹çš„å¥½å¤„ã€‚</font>

**<font style="color:#117CEE;">æ³›å‹å¸¦æ¥çš„å¥½å¤„</font>**

<font style="color:rgba(6, 8, 31, 0.88);">åœ¨æ²¡æœ‰æ³›å‹çš„æƒ…å†µä¸‹ï¼Œå¦‚æœå¸Œæœ›å®ç°å‚æ•°ç±»å‹çš„â€œä»»æ„åŒ–â€ï¼Œé€šå¸¸ä¼šé€šè¿‡ä½¿ç”¨ </font>`<font style="color:rgba(6, 8, 31, 0.88);background-color:#FFFFFF;">Object</font>`<font style="color:rgba(6, 8, 31, 0.88);background-color:#FFFFFF;"> </font><font style="color:rgba(6, 8, 31, 0.88);">ç±»å‹æ¥å¼•ç”¨å„ç§å¯¹è±¡ã€‚</font>

<font style="color:rgba(6, 8, 31, 0.88);">è¿™æ ·åšçš„å¼Šç«¯æ˜¯ï¼šæ¯å½“éœ€è¦ä½¿ç”¨å®é™…ç±»å‹æ—¶ï¼Œå¼€å‘è€…å¿…é¡»æ˜¾å¼è¿›è¡Œç±»å‹å¼ºåˆ¶è½¬æ¢ã€‚å¦‚æœç±»å‹è½¬æ¢å‡ºç°é”™è¯¯ï¼Œç¼–è¯‘å™¨å¾€å¾€æ— æ³•æ£€æµ‹å‡ºæ¥ï¼Œåªæœ‰åœ¨è¿è¡Œæ—¶æ‰ä¼šæŠ›å‡ºå¼‚å¸¸ï¼Œè¿™ç»™ç¨‹åºçš„å®‰å…¨æ€§å¸¦æ¥äº†éšæ‚£ã€‚</font>

<font style="color:rgba(6, 8, 31, 0.88);">è€Œæ³›å‹çš„å‡ºç°ï¼Œåˆ™ä»æ ¹æœ¬ä¸Šè§£å†³äº†è¿™ä¸€é—®é¢˜ã€‚å®ƒèƒ½å¤Ÿåœ¨ç¼–è¯‘é˜¶æ®µå¯¹ç±»å‹è¿›è¡Œæ£€æŸ¥ï¼Œç¡®ä¿ç±»å‹å®‰å…¨ï¼Œé¿å…äº†å› ç±»å‹ä¸åŒ¹é…è€Œå¯¼è‡´çš„è¿è¡Œæ—¶å¼‚å¸¸ã€‚åŒæ—¶ï¼Œæ³›å‹è®©å¼ºåˆ¶ç±»å‹è½¬æ¢å˜å¾—è‡ªåŠ¨å’Œéšå¼ï¼Œç®€åŒ–äº†ä»£ç ï¼Œæé«˜äº†å¯è¯»æ€§å’Œå¯ç»´æŠ¤æ€§ã€‚</font>

```java
public class GlmapperGeneric<T> {
    private T t;
    public void set(T t) { this.t = t; }
    public T get() { return t; }
}

/**
* ä¸æŒ‡å®šç±»å‹
*/
public void noSpecifyType(){
    GlmapperGeneric glmapperGeneric = new GlmapperGeneric();
    glmapperGeneric.set("test");
    // éœ€è¦å¼ºåˆ¶ç±»å‹è½¬æ¢
    String test = (String) glmapperGeneric.get();
    System.out.println(test);
}

/**
* æŒ‡å®šç±»å‹
*/
public void specifyType(){
    GlmapperGeneric<String> glmapperGeneric = new GlmapperGeneric<>();
    glmapperGeneric.set("test");
    // ä¸éœ€è¦å¼ºåˆ¶ç±»å‹è½¬æ¢
    String test = glmapperGeneric.get();
    System.out.println(test);
}
```



`**<font style="color:#117CEE;background-color:#FFFFFF;">T</font>**`**<font style="color:#117CEE;background-color:#FFFFFF;">ï¼ˆTypeï¼‰</font>**<font style="color:rgb(36, 41, 47);background-color:#FFFFFF;">  
</font>`<font style="color:rgb(36, 41, 47);background-color:#FFFFFF;">T</font>`<font style="color:rgb(36, 41, 47);background-color:#FFFFFF;"> é€šå¸¸è¡¨ç¤ºä¸€ä¸ªå…·ä½“çš„Javaç±»å‹ï¼Œç”¨äºæ³›å‹ç±»ã€æ³›å‹æ–¹æ³•æˆ–æ³›å‹æ¥å£çš„å®šä¹‰ã€‚ä¾‹å¦‚ï¼Œåœ¨å®šä¹‰ä¸€ä¸ªæ³›å‹ç±»æ—¶ï¼Œå¯ä»¥ä½¿ç”¨ </font>`<font style="color:rgb(36, 41, 47);background-color:#FFFFFF;">T</font>`<font style="color:rgb(36, 41, 47);background-color:#FFFFFF;"> æ¥è¡¨ç¤ºè¯¥ç±»çš„æ“ä½œç±»å‹ã€‚</font>

```java
public class Box<T> {
    private T item;
    public void setItem(T item) { this.item = item; }
    public T getItem() { return item; }
}
```

`<font style="color:rgb(36, 41, 47);background-color:#FFFFFF;">T</font>`<font style="color:rgb(36, 41, 47);background-color:#FFFFFF;"> æ˜¯ä¸€ä¸ªå ä½ç¬¦ï¼Œä»£è¡¨åœ¨ä½¿ç”¨æ³›å‹æ—¶éœ€è¦æŒ‡å®šçš„å…·ä½“ç±»å‹ã€‚	</font>

<font style="color:rgb(36, 41, 47);background-color:#FFFFFF;"></font>

`**<font style="color:#117CEE;background-color:#FFFFFF;">E</font>**`**<font style="color:#117CEE;background-color:#FFFFFF;">ï¼ˆElementï¼‰</font>**<font style="color:rgb(36, 41, 47);background-color:#FFFFFF;">  
</font>`<font style="color:rgb(36, 41, 47);background-color:#FFFFFF;">E</font>`<font style="color:rgb(36, 41, 47);background-color:#FFFFFF;"> é€šå¸¸ç”¨äºè¡¨ç¤ºé›†åˆä¸­çš„å…ƒç´ ç±»å‹ã€‚ä¾‹å¦‚ï¼Œåœ¨ </font>`<font style="color:rgb(36, 41, 47);background-color:#FFFFFF;">List<E></font>`<font style="color:rgb(36, 41, 47);background-color:#FFFFFF;"> ä¸­ï¼Œ</font>`<font style="color:rgb(36, 41, 47);background-color:#FFFFFF;">E</font>`<font style="color:rgb(36, 41, 47);background-color:#FFFFFF;"> è¡¨ç¤ºåˆ—è¡¨ä¸­å­˜å‚¨çš„å…ƒç´ ç±»å‹ã€‚</font>

```java
List<String> list = new ArrayList<>();
```

<font style="color:rgb(36, 41, 47);background-color:#FFFFFF;">è¿™é‡Œ</font><font style="color:rgb(36, 41, 47);background-color:#FFFFFF;"> </font>`<font style="color:rgb(36, 41, 47);background-color:#FFFFFF;">E</font>`<font style="color:rgb(36, 41, 47);background-color:#FFFFFF;"> </font><font style="color:rgb(36, 41, 47);background-color:#FFFFFF;">è¢«æ›¿æ¢ä¸º</font><font style="color:rgb(36, 41, 47);background-color:#FFFFFF;"> </font>`<font style="color:rgb(36, 41, 47);background-color:#FFFFFF;">String</font>`<font style="color:rgb(36, 41, 47);background-color:#FFFFFF;">ï¼Œè¡¨ç¤ºåˆ—è¡¨ä¸­å­˜å‚¨çš„æ˜¯å­—ç¬¦ä¸²ç±»å‹</font><font style="color:rgb(36, 41, 47);background-color:#FFFFFF;">ã€‚</font>

<font style="color:rgb(36, 41, 47);background-color:#FFFFFF;"></font>

`**<font style="color:#117CEE;background-color:#FFFFFF;">K</font>**`**<font style="color:#117CEE;background-color:#FFFFFF;">ï¼ˆKeyï¼‰å’Œ </font>**`**<font style="color:#117CEE;background-color:#FFFFFF;">V</font>**`**<font style="color:#117CEE;background-color:#FFFFFF;">ï¼ˆValueï¼‰</font>**<font style="color:rgb(36, 41, 47);background-color:#FFFFFF;">  
</font>`<font style="color:rgb(36, 41, 47);background-color:#FFFFFF;">K</font>`<font style="color:rgb(36, 41, 47);background-color:#FFFFFF;"> å’Œ </font>`<font style="color:rgb(36, 41, 47);background-color:#FFFFFF;">V</font>`<font style="color:rgb(36, 41, 47);background-color:#FFFFFF;"> é€šå¸¸ç”¨äºè¡¨ç¤ºé”®å€¼å¯¹ä¸­çš„é”®å’Œå€¼ç±»å‹ã€‚ä¾‹å¦‚ï¼Œåœ¨ </font>`<font style="color:rgb(36, 41, 47);background-color:#FFFFFF;">Map<K, V></font>`<font style="color:rgb(36, 41, 47);background-color:#FFFFFF;"> ä¸­ï¼Œ</font>`<font style="color:rgb(36, 41, 47);background-color:#FFFFFF;">K</font>`<font style="color:rgb(36, 41, 47);background-color:#FFFFFF;"> è¡¨ç¤ºé”®çš„ç±»å‹ï¼Œ</font>`<font style="color:rgb(36, 41, 47);background-color:#FFFFFF;">V</font>`<font style="color:rgb(36, 41, 47);background-color:#FFFFFF;"> è¡¨ç¤ºå€¼çš„ç±»å‹ã€‚</font>

```java
Map<String, Integer> map = new HashMap<>();
```

<font style="color:rgb(36, 41, 47);background-color:#FFFFFF;">è¿™é‡Œ</font><font style="color:rgb(36, 41, 47);background-color:#FFFFFF;"> </font>`<font style="color:rgb(36, 41, 47);background-color:#FFFFFF;">K</font>`<font style="color:rgb(36, 41, 47);background-color:#FFFFFF;"> </font><font style="color:rgb(36, 41, 47);background-color:#FFFFFF;">è¢«æ›¿æ¢ä¸º</font><font style="color:rgb(36, 41, 47);background-color:#FFFFFF;"> </font>`<font style="color:rgb(36, 41, 47);background-color:#FFFFFF;">String</font>`<font style="color:rgb(36, 41, 47);background-color:#FFFFFF;">ï¼Œ</font>`<font style="color:rgb(36, 41, 47);background-color:#FFFFFF;">V</font>`<font style="color:rgb(36, 41, 47);background-color:#FFFFFF;"> </font><font style="color:rgb(36, 41, 47);background-color:#FFFFFF;">è¢«æ›¿æ¢ä¸º</font><font style="color:rgb(36, 41, 47);background-color:#FFFFFF;"> </font>`<font style="color:rgb(36, 41, 47);background-color:#FFFFFF;">Integer</font>`<font style="color:rgb(36, 41, 47);background-color:#FFFFFF;">ï¼Œè¡¨ç¤ºé”®æ˜¯å­—ç¬¦ä¸²ç±»å‹ï¼Œå€¼æ˜¯æ•´æ•°ç±»å‹</font><font style="color:rgb(36, 41, 47);background-color:#FFFFFF;">ã€‚</font>

<font style="color:rgb(36, 41, 47);background-color:#FFFFFF;"></font>

`**<font style="color:#117CEE;background-color:#FFFFFF;">?</font>**`**<font style="color:#117CEE;background-color:#FFFFFF;">ï¼ˆWildcardï¼‰</font>**<font style="color:rgb(36, 41, 47);background-color:#FFFFFF;">  
</font>`<font style="color:rgb(36, 41, 47);background-color:#FFFFFF;">?</font>`<font style="color:rgb(36, 41, 47);background-color:#FFFFFF;"> è¡¨ç¤ºä¸ç¡®å®šçš„Javaç±»å‹ï¼Œé€šå¸¸ç”¨äºè¡¨ç¤ºå¯ä»¥æ˜¯ä»»ä½•ç±»å‹çš„å‚æ•°ã€‚ä¾‹å¦‚ï¼Œåœ¨æ–¹æ³•å‚æ•°ä¸­ä½¿ç”¨ </font>`<font style="color:rgb(36, 41, 47);background-color:#FFFFFF;">?</font>`<font style="color:rgb(36, 41, 47);background-color:#FFFFFF;"> å¯ä»¥è¡¨ç¤ºè¯¥æ–¹æ³•å¯ä»¥æ¥å—ä»»ä½•ç±»å‹çš„å‚æ•°ã€‚</font>

```java
public static int countLegs(List<? extends Animal> animals) {
    int retVal = 0;
    for (Animal animal : animals) {
        retVal += animal.countLegs();
    }
    return retVal;
}
```

<font style="color:rgb(36, 41, 47);background-color:#FFFFFF;">è¿™é‡Œ</font><font style="color:rgb(36, 41, 47);background-color:#FFFFFF;"> </font>`<font style="color:rgb(36, 41, 47);background-color:#FFFFFF;">?</font>`<font style="color:rgb(36, 41, 47);background-color:#FFFFFF;"> </font><font style="color:rgb(36, 41, 47);background-color:#FFFFFF;">è¡¨ç¤ºå¯ä»¥æ˜¯</font><font style="color:rgb(36, 41, 47);background-color:#FFFFFF;"> </font>`<font style="color:rgb(36, 41, 47);background-color:#FFFFFF;">Animal</font>`<font style="color:rgb(36, 41, 47);background-color:#FFFFFF;"> </font><font style="color:rgb(36, 41, 47);background-color:#FFFFFF;">æˆ–å…¶å­ç±»çš„ç±»å‹</font><font style="color:rgb(36, 41, 47);background-color:#FFFFFF;">ã€‚</font>

<font style="color:rgb(36, 41, 47);background-color:#FFFFFF;"></font>

`**<font style="color:#117CEE;background-color:#FFFFFF;">?</font>**`**<font style="color:#117CEE;background-color:#FFFFFF;"> ä¸ </font>**`**<font style="color:#117CEE;background-color:#FFFFFF;">T</font>**`**<font style="color:#117CEE;background-color:#FFFFFF;"> çš„åŒºåˆ«</font>**<font style="color:rgb(36, 41, 47);background-color:#FFFFFF;">  
</font>`<font style="color:rgb(36, 41, 47);background-color:#FFFFFF;">T</font>`<font style="color:rgb(36, 41, 47);background-color:#FFFFFF;"> å’Œ </font>`<font style="color:rgb(36, 41, 47);background-color:#FFFFFF;">?</font>`<font style="color:rgb(36, 41, 47);background-color:#FFFFFF;"> éƒ½æ˜¯é€šé…ç¬¦ï¼Œä½†å®ƒä»¬çš„ç”¨é€”ä¸åŒã€‚</font>`<font style="color:rgb(36, 41, 47);background-color:#FFFFFF;">T</font>`<font style="color:rgb(36, 41, 47);background-color:#FFFFFF;"> ç”¨äºå®šä¹‰æ³›å‹ç±»ã€æ³›å‹æ–¹æ³•æˆ–æ³›å‹æ¥å£çš„ç±»å‹å‚æ•°ï¼Œè€Œ </font>`<font style="color:rgb(36, 41, 47);background-color:#FFFFFF;">?</font>`<font style="color:rgb(36, 41, 47);background-color:#FFFFFF;"> ç”¨äºè¡¨ç¤ºä¸ç¡®å®šçš„ç±»å‹ï¼Œé€šå¸¸ç”¨äºæ–¹æ³•çš„å‚æ•°æˆ–è¿”å›å€¼ã€‚</font>

    - `<font style="color:rgb(36, 41, 47);background-color:#FFFFFF;">T</font>`<font style="color:rgb(36, 41, 47);background-color:#FFFFFF;"> </font><font style="color:rgb(36, 41, 47);background-color:#FFFFFF;">æ˜¯ä¸€ä¸ªç¡®å®šçš„ç±»å‹ï¼Œå¯ä»¥è¿›è¡Œæ“ä½œã€‚</font>
    - `<font style="color:rgb(36, 41, 47);background-color:#FFFFFF;">?</font>`<font style="color:rgb(36, 41, 47);background-color:#FFFFFF;"> æ˜¯ä¸€ä¸ªä¸ç¡®å®šçš„ç±»å‹ï¼Œä¸èƒ½è¿›è¡Œæ“ä½œã€‚</font>



`**<font style="color:#117CEE;background-color:#FFFFFF;">?</font>**`**<font style="color:#117CEE;background-color:#FFFFFF;"> çš„é™å®š</font>**<font style="color:rgb(36, 41, 47);background-color:#FFFFFF;">  
</font>`<font style="color:rgb(36, 41, 47);background-color:#FFFFFF;">?</font>`<font style="color:rgb(36, 41, 47);background-color:#FFFFFF;"> å¯ä»¥é€šè¿‡ </font>`<font style="color:rgb(36, 41, 47);background-color:#FFFFFF;">extends</font>`<font style="color:rgb(36, 41, 47);background-color:#FFFFFF;"> å’Œ </font>`<font style="color:rgb(36, 41, 47);background-color:#FFFFFF;">super</font>`<font style="color:rgb(36, 41, 47);background-color:#FFFFFF;"> è¿›è¡Œé™å®šï¼Œä»¥ç¡®ä¿ç±»å‹çš„å®‰å…¨æ€§ã€‚</font>

    - **<font style="color:rgb(36, 41, 47);background-color:#FFFFFF;">ä¸Šç•Œé€šé…ç¬¦</font>**<font style="color:rgb(36, 41, 47);background-color:#FFFFFF;">ï¼š</font>`<font style="color:rgb(36, 41, 47);background-color:#FFFFFF;">? extends E</font>`<font style="color:rgb(36, 41, 47);background-color:#FFFFFF;"> </font><font style="color:rgb(36, 41, 47);background-color:#FFFFFF;">è¡¨ç¤ºå‚æ•°åŒ–çš„ç±»å‹å¯èƒ½æ˜¯</font><font style="color:rgb(36, 41, 47);background-color:#FFFFFF;"> </font>`<font style="color:rgb(36, 41, 47);background-color:#FFFFFF;">E</font>`<font style="color:rgb(36, 41, 47);background-color:#FFFFFF;"> </font><font style="color:rgb(36, 41, 47);background-color:#FFFFFF;">æˆ–å…¶å­ç±»ã€‚</font>
    - **<font style="color:rgb(36, 41, 47);background-color:#FFFFFF;">ä¸‹ç•Œé€šé…ç¬¦</font>**<font style="color:rgb(36, 41, 47);background-color:#FFFFFF;">ï¼š</font>`<font style="color:rgb(36, 41, 47);background-color:#FFFFFF;">? super E</font>`<font style="color:rgb(36, 41, 47);background-color:#FFFFFF;"> </font><font style="color:rgb(36, 41, 47);background-color:#FFFFFF;">è¡¨ç¤ºå‚æ•°åŒ–çš„ç±»å‹å¯èƒ½æ˜¯</font><font style="color:rgb(36, 41, 47);background-color:#FFFFFF;"> </font>`<font style="color:rgb(36, 41, 47);background-color:#FFFFFF;">E</font>`<font style="color:rgb(36, 41, 47);background-color:#FFFFFF;"> </font><font style="color:rgb(36, 41, 47);background-color:#FFFFFF;">æˆ–å…¶çˆ¶ç±»ã€‚</font>

```java
public static void test(List<? super T> dst, List<T> src) {
    for (T t : src) {
        dst.add(t);
    }
}
```

<font style="color:rgb(36, 41, 47);background-color:#FFFFFF;">è¿™é‡Œ</font><font style="color:rgb(36, 41, 47);background-color:#FFFFFF;"> </font>`<font style="color:rgb(36, 41, 47);background-color:#FFFFFF;">? super T</font>`<font style="color:rgb(36, 41, 47);background-color:#FFFFFF;"> </font><font style="color:rgb(36, 41, 47);background-color:#FFFFFF;">è¡¨ç¤º</font><font style="color:rgb(36, 41, 47);background-color:#FFFFFF;"> </font>`<font style="color:rgb(36, 41, 47);background-color:#FFFFFF;">dst</font>`<font style="color:rgb(36, 41, 47);background-color:#FFFFFF;"> </font><font style="color:rgb(36, 41, 47);background-color:#FFFFFF;">å¯ä»¥æ˜¯</font><font style="color:rgb(36, 41, 47);background-color:#FFFFFF;"> </font>`<font style="color:rgb(36, 41, 47);background-color:#FFFFFF;">T</font>`<font style="color:rgb(36, 41, 47);background-color:#FFFFFF;"> </font><font style="color:rgb(36, 41, 47);background-color:#FFFFFF;">æˆ–å…¶çˆ¶ç±»çš„ç±»å‹</font><font style="color:rgb(36, 41, 47);background-color:#FFFFFF;">ã€‚</font>

<font style="color:rgb(36, 41, 47);background-color:#FFFFFF;"></font>

`**<font style="color:#117CEE;background-color:#FFFFFF;">Class<T></font>**`**<font style="color:#117CEE;background-color:#FFFFFF;"> ä¸ </font>**`**<font style="color:#117CEE;background-color:#FFFFFF;">Class<?></font>**`**<font style="color:#117CEE;background-color:#FFFFFF;"> çš„åŒºåˆ«</font>**<font style="color:rgb(36, 41, 47);background-color:#FFFFFF;">  
</font>`<font style="color:rgb(36, 41, 47);background-color:#FFFFFF;">Class<T></font>`<font style="color:rgb(36, 41, 47);background-color:#FFFFFF;"> å’Œ </font>`<font style="color:rgb(36, 41, 47);background-color:#FFFFFF;">Class<?></font>`<font style="color:rgb(36, 41, 47);background-color:#FFFFFF;"> éƒ½æ˜¯ç”¨äºåå°„çš„ç±»ï¼Œä½†å®ƒä»¬çš„ç”¨é€”ä¸åŒã€‚</font>

    - `<font style="color:rgb(36, 41, 47);background-color:#FFFFFF;">Class<T></font>`<font style="color:rgb(36, 41, 47);background-color:#FFFFFF;"> </font><font style="color:rgb(36, 41, 47);background-color:#FFFFFF;">éœ€è¦æ›¿æ¢ä¸ºå…·ä½“ç±»ï¼Œä¾‹å¦‚</font><font style="color:rgb(36, 41, 47);background-color:#FFFFFF;"> </font>`<font style="color:rgb(36, 41, 47);background-color:#FFFFFF;">Class<String></font>`<font style="color:rgb(36, 41, 47);background-color:#FFFFFF;">ã€‚</font>
    - `<font style="color:rgb(36, 41, 47);background-color:#FFFFFF;">Class<?></font>`<font style="color:rgb(36, 41, 47);background-color:#FFFFFF;"> </font><font style="color:rgb(36, 41, 47);background-color:#FFFFFF;">å¯ä»¥ä»£è¡¨ä»»ä½•ç±»å‹ï¼Œé€šå¸¸ç”¨äºå£°æ˜æ—¶çš„é™åˆ¶æƒ…å†µã€‚</font>

```java
public Class<? extends Clazz> clazz;
public Class<T> clazzT;
```

<font style="color:rgb(36, 41, 47);background-color:#FFFFFF;">è¿™é‡Œ</font><font style="color:rgb(36, 41, 47);background-color:#FFFFFF;"> </font>`<font style="color:rgb(36, 41, 47);background-color:#FFFFFF;">Class<? extends Clazz></font>`<font style="color:rgb(36, 41, 47);background-color:#FFFFFF;"> </font><font style="color:rgb(36, 41, 47);background-color:#FFFFFF;">è¡¨ç¤º</font><font style="color:rgb(36, 41, 47);background-color:#FFFFFF;"> </font>`<font style="color:rgb(36, 41, 47);background-color:#FFFFFF;">clazz</font>`<font style="color:rgb(36, 41, 47);background-color:#FFFFFF;"> </font><font style="color:rgb(36, 41, 47);background-color:#FFFFFF;">å¯ä»¥æ˜¯</font><font style="color:rgb(36, 41, 47);background-color:#FFFFFF;"> </font>`<font style="color:rgb(36, 41, 47);background-color:#FFFFFF;">Clazz</font>`<font style="color:rgb(36, 41, 47);background-color:#FFFFFF;"> </font><font style="color:rgb(36, 41, 47);background-color:#FFFFFF;">æˆ–å…¶å­ç±»çš„ç±»å‹ï¼Œè€Œ</font><font style="color:rgb(36, 41, 47);background-color:#FFFFFF;"> </font>`<font style="color:rgb(36, 41, 47);background-color:#FFFFFF;">Class&lt;T&gt;</font>`<font style="color:rgb(36, 41, 47);background-color:#FFFFFF;"> </font><font style="color:rgb(36, 41, 47);background-color:#FFFFFF;">éœ€è¦æ›¿æ¢ä¸ºå…·ä½“ç±»</font><font style="color:rgb(36, 41, 47);background-color:#FFFFFF;">ã€‚</font>

<font style="color:rgb(36, 41, 47);background-color:#FFFFFF;">Javaæ³›å‹ä¸­çš„é€šé…ç¬¦ </font>`<font style="color:rgb(36, 41, 47);background-color:#FFFFFF;">T</font>`<font style="color:rgb(36, 41, 47);background-color:#FFFFFF;">ã€</font>`<font style="color:rgb(36, 41, 47);background-color:#FFFFFF;">E</font>`<font style="color:rgb(36, 41, 47);background-color:#FFFFFF;">ã€</font>`<font style="color:rgb(36, 41, 47);background-color:#FFFFFF;">K</font>`<font style="color:rgb(36, 41, 47);background-color:#FFFFFF;">ã€</font>`<font style="color:rgb(36, 41, 47);background-color:#FFFFFF;">V</font>`<font style="color:rgb(36, 41, 47);background-color:#FFFFFF;">ã€</font>`<font style="color:rgb(36, 41, 47);background-color:#FFFFFF;">?</font>`<font style="color:rgb(36, 41, 47);background-color:#FFFFFF;"> æœ¬è´¨ä¸Šéƒ½æ˜¯é€šé…ç¬¦ï¼Œä½†æ ¹æ®çº¦å®šä¿—æˆçš„å‘½åä¹ æƒ¯ï¼Œå®ƒä»¬åœ¨ä¸åŒçš„ä¸Šä¸‹æ–‡ä¸­å…·æœ‰ç‰¹å®šçš„å«ä¹‰ã€‚ç†è§£è¿™äº›é€šé…ç¬¦çš„ç”¨é€”å’ŒåŒºåˆ«ï¼Œæœ‰åŠ©äºç¼–å†™æ›´å®‰å…¨ã€æ›´çµæ´»çš„æ³›å‹ä»£ç ã€‚</font>

# <font style="color:#ECAA04;background-color:#FFFFFF;">ä¸ºä»€ä¹ˆ ArrayList çº¿ç¨‹ä¸å®‰å…¨å´åœ¨å¼€å‘ä¸­è¢«å¹¿æ³›ä½¿ç”¨ï¼Ÿ  </font>
**<font style="background-color:#FFFFFF;">ç­”æ¡ˆå¾ˆç®€å•ã€‚</font>**

**<font style="background-color:#FFFFFF;">å› ä¸ºç»å¤§éƒ¨åˆ†ä¸šåŠ¡åœºæ™¯æ ¹æœ¬ä¸éœ€è¦çº¿ç¨‹å®‰å…¨ï¼Œè€Œ </font>**`**<font style="background-color:#FFFFFF;">ArrayList</font>**`**<font style="background-color:#FFFFFF;"> åœ¨è¿™äº›åœºæ™¯ä¸‹æä¾›äº†æœ€ä½³çš„æ€§èƒ½å’Œç®€æ´æ€§ã€‚</font>**

**<font style="background-color:#FFFFFF;">ä»å‡ ä¸ªæ–¹é¢æ¥è¯¦ç»†æ‹†è§£è¿™ä¸ªåŸå› ï¼š</font>**

**<font style="color:#117CEE;background-color:#FFFFFF;">1. åœºæ™¯å†³å®šéœ€æ±‚ï¼šç»å¤§å¤šæ•° </font>**`**<font style="color:#117CEE;background-color:#FFFFFF;">List</font>**`**<font style="color:#117CEE;background-color:#FFFFFF;"> æ˜¯â€œçº¿ç¨‹ç§æœ‰â€çš„</font>**

**<font style="background-color:#FFFFFF;">åœ¨æ—¥å¸¸å¼€å‘ä¸­ï¼Œ</font>**`**<font style="background-color:#FFFFFF;">ArrayList</font>**`**<font style="background-color:#FFFFFF;"> æœ€å¸¸è§çš„ç”¨é€”æ˜¯ä½œä¸ºæ–¹æ³•å†…çš„å±€éƒ¨å˜é‡ã€æˆ–è€…åœ¨å•ä¸ªçº¿ç¨‹å†…éƒ¨ä¼ é€’æ•°æ®ã€‚</font>**

```java
// åœºæ™¯ä¸€ï¼šæ–¹æ³•å†…çš„å±€éƒ¨å˜é‡
public void processUserData(User user) {
    // è¿™ä¸ªliståªåœ¨å½“å‰æ–¹æ³•å†…æœ‰æ•ˆï¼Œä¸å¯èƒ½è¢«å…¶ä»–çº¿ç¨‹è®¿é—®åˆ°
    List<String> permissions = new ArrayList<>();
    for (Permission p : user.getPermissions()) {
        permissions.add(p.getName());
    }
    // ... å¯¹ permissions è¿›è¡Œæ“ä½œ ...
}

// åœºæ™¯äºŒï¼šä½œä¸ºè¿”å›å€¼ï¼Œåœ¨åŒä¸€ä¸ªçº¿ç¨‹ä¸­ä¼ é€’
public List<Product> getProducts() {
    // liståœ¨æ–¹æ³•å†…åˆ›å»ºå’Œå¡«å……
    List<Product> productList = new ArrayList<>();
    // ... æŸ¥è¯¢æ•°æ®åº“ï¼Œå¡«å…… productList ...
    return productList; // è¿”å›åï¼Œé€šå¸¸ç”±è°ƒç”¨å®ƒçš„é‚£ä¸ªçº¿ç¨‹ç»§ç»­å¤„ç†
}
```

**<font style="background-color:#FFFFFF;">åœ¨è¿™äº›åœºæ™¯ä¸‹ï¼Œ</font>**`**<font style="background-color:#FFFFFF;">List</font>**`**<font style="background-color:#FFFFFF;"> çš„æ•´ä¸ªç”Ÿå‘½å‘¨æœŸéƒ½</font>****<font style="color:#74B602;background-color:#FFFFFF;">å±€é™äºå•ä¸ªçº¿ç¨‹</font>****<font style="background-color:#FFFFFF;">ä¸­ï¼Œæ ¹æœ¬ä¸å­˜åœ¨å¤šä¸ªçº¿ç¨‹åŒæ—¶è¯»å†™å®ƒçš„æƒ…å†µï¼Œå› æ­¤ä¹Ÿå°±</font>****<font style="color:#74B602;background-color:#FFFFFF;">ä¸å­˜åœ¨çº¿ç¨‹å®‰å…¨é—®é¢˜</font>****<font style="background-color:#FFFFFF;">ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œä½¿ç”¨ </font>**`**<font style="background-color:#FFFFFF;">ArrayList</font>**`**<font style="background-color:#FFFFFF;"> æ˜¯å®Œå…¨æ­£ç¡®çš„é€‰æ‹©ã€‚</font>**

**<font style="color:#117CEE;background-color:#FFFFFF;">2. æ€§èƒ½å¼€é”€ï¼šçº¿ç¨‹å®‰å…¨æ˜¯æœ‰ä»£ä»·çš„</font>**

**<font style="background-color:#FFFFFF;">çº¿ç¨‹å®‰å…¨å¹¶éâ€œå…è´¹çš„åˆé¤â€ï¼Œå®ƒéœ€è¦é€šè¿‡åŠ é”ï¼ˆå¦‚ </font>**`**<font style="background-color:#FFFFFF;">synchronized</font>**`**<font style="background-color:#FFFFFF;"> å…³é”®å­—ï¼‰ç­‰æœºåˆ¶æ¥å®ç°ã€‚</font>**

+ **<font style="color:#74B602;background-color:#FFFFFF;">åŠ é”çš„æˆæœ¬ï¼š</font>****<font style="background-color:#FFFFFF;">å½“ä¸€ä¸ªçº¿ç¨‹è®¿é—®çº¿ç¨‹å®‰å…¨é›†åˆï¼ˆå¦‚å¤è€çš„ </font>**`**<font style="background-color:#FFFFFF;">Vector</font>**`**<font style="background-color:#FFFFFF;">ï¼‰æ—¶ï¼Œå®ƒå¿…é¡»å…ˆè·å–é”ã€‚åœ¨æ“ä½œæœŸé—´ï¼Œå…¶ä»–è¯•å›¾è®¿é—®è¯¥é›†åˆçš„çº¿ç¨‹ä¼šè¢«é˜»å¡ï¼Œç›´åˆ°é”è¢«é‡Šæ”¾ã€‚è¿™ä¼šå¯¼è‡´çº¿ç¨‹é—´çš„ç­‰å¾…å’Œä¸Šä¸‹æ–‡åˆ‡æ¢ï¼Œå¸¦æ¥æ˜¾è‘—çš„æ€§èƒ½å¼€é”€ã€‚</font>**
+ `**<font style="color:#74B602;background-color:#FFFFFF;">ArrayList</font>**`**<font style="color:#74B602;background-color:#FFFFFF;"> çš„ä¼˜åŠ¿</font>****<font style="background-color:#FFFFFF;">ï¼š</font>**`**<font style="background-color:#FFFFFF;">ArrayList</font>**`**<font style="background-color:#FFFFFF;"> çš„æ‰€æœ‰æ“ä½œï¼ˆ</font>**`**<font style="background-color:#FFFFFF;">add</font>**`**<font style="background-color:#FFFFFF;">, </font>**`**<font style="background-color:#FFFFFF;">get</font>**`**<font style="background-color:#FFFFFF;">, </font>**`**<font style="background-color:#FFFFFF;">set</font>**`**<font style="background-color:#FFFFFF;">, </font>**`**<font style="background-color:#FFFFFF;">remove</font>**`**<font style="background-color:#FFFFFF;"> ç­‰ï¼‰éƒ½æ²¡æœ‰ä»»ä½•é”çš„å¼€é”€ï¼Œå®ƒçš„æ‰§è¡Œé€Ÿåº¦éå¸¸å¿«ï¼Œå› ä¸ºå®ƒå°±æ˜¯å¯¹åº•å±‚æ•°ç»„çš„ç›´æ¥æ“ä½œã€‚</font>**

<font style="background-color:#FFFFFF;">ä¸€ä¸ªå½¢è±¡çš„æ¯”å–»ï¼š</font>`<font style="background-color:#FFFFFF;">ArrayList</font>`<font style="background-color:#FFFFFF;"> å°±åƒä¸€æ¡å•è¡Œé“ï¼Œåœ¨åªæœ‰ä¸€ä¸ªå¸æœºï¼ˆçº¿ç¨‹ï¼‰æ—¶ï¼Œé€šè¡Œæ•ˆç‡æœ€é«˜ã€‚è€Œçº¿ç¨‹å®‰å…¨çš„é›†åˆï¼ˆå¦‚ </font>`<font style="background-color:#FFFFFF;">Vector</font>`<font style="background-color:#FFFFFF;">ï¼‰å°±åƒä¸€ä¸ªéœ€è¦çº¢ç»¿ç¯ï¼ˆé”ï¼‰æ§åˆ¶çš„åå­—è·¯å£ï¼Œå³ä½¿åœ¨è½¦æµé‡å¾ˆå°ï¼ˆåªæœ‰ä¸€ä¸ªçº¿ç¨‹ï¼‰çš„æƒ…å†µä¸‹ï¼Œå¸æœºä¹Ÿå¿…é¡»éµå®ˆä¿¡å·ç¯çš„è§„åˆ™ï¼Œç­‰å¾…ç»¿ç¯æ‰èƒ½é€šè¡Œï¼Œå‡­ç©ºå¢åŠ äº†ç­‰å¾…æ—¶é—´ã€‚</font>

**<font style="color:#117CEE;background-color:#FFFFFF;">3. è®¾è®¡å“²å­¦ï¼šå°†é€‰æ‹©æƒäº¤ç»™å¼€å‘è€…</font>**

**<font style="background-color:#FFFFFF;">Javaé›†åˆæ¡†æ¶çš„è®¾è®¡è€…è®¤ä¸ºï¼Œä¸åº”è¯¥å¼ºè¿«æ‰€æœ‰å¼€å‘è€…ä¸ºä»–ä»¬å¯èƒ½æ ¹æœ¬ç”¨ä¸åˆ°çš„â€œçº¿ç¨‹å®‰å…¨â€åŠŸèƒ½ä¹°å•ã€‚</font>**

**<font style="background-color:#FFFFFF;">å› æ­¤ï¼Œæ¡†æ¶æä¾›äº†ä¸€å¥—â€œå¿«é€Ÿå¤±è´¥â€ï¼ˆFail-Fastï¼‰çš„éçº¿ç¨‹å®‰å…¨é›†åˆï¼ˆå¦‚ </font>**`**<font style="background-color:#FFFFFF;">ArrayList</font>**`**<font style="background-color:#FFFFFF;">, </font>**`**<font style="background-color:#FFFFFF;">HashMap</font>**`**<font style="background-color:#FFFFFF;">ï¼‰ï¼Œå®ƒä»¬æ˜¯é»˜è®¤å’Œæ¨èçš„é€‰æ‹©ã€‚</font>**

**<font style="background-color:#FFFFFF;">å½“å¼€å‘è€…ç¡®å®éœ€è¦å¤„ç†å¹¶å‘åœºæ™¯æ—¶ï¼Œæ¡†æ¶ä¹Ÿæä¾›äº†å¤šç§å·¥å…·ï¼Œè®©å¼€å‘è€…å¯ä»¥</font>****<font style="background-color:#FFFFFF;">æŒ‰éœ€é€‰æ‹©</font>****<font style="background-color:#FFFFFF;">æœ€é€‚åˆçš„çº¿ç¨‹å®‰å…¨ç­–ç•¥ã€‚</font>**

**<font style="color:#117CEE;background-color:#FFFFFF;">4. å¦‚ä½•åœ¨å¤šçº¿ç¨‹ç¯å¢ƒä¸­æ­£ç¡®ä½¿ç”¨ </font>**`**<font style="color:#117CEE;background-color:#FFFFFF;">List</font>**`**<font style="color:#117CEE;background-color:#FFFFFF;">ï¼Ÿ</font>**

**<font style="background-color:#FFFFFF;">å½“ä½ çš„ </font>**`**<font style="background-color:#FFFFFF;">List</font>**`**<font style="background-color:#FFFFFF;"> ç¡®å®éœ€è¦è¢«å¤šä¸ªçº¿ç¨‹å…±äº«å’Œä¿®æ”¹æ—¶ï¼Œä½ ä¸åº”è¯¥ç›´æ¥ä½¿ç”¨ </font>**`**<font style="background-color:#FFFFFF;">ArrayList</font>**`**<font style="background-color:#FFFFFF;">ï¼Œè€Œæ˜¯æœ‰ä»¥ä¸‹å‡ ç§æ›´å¥½çš„é€‰æ‹©ï¼š</font>**

**<font style="background-color:#FFFFFF;">ä½¿ç”¨ </font>**`**<font style="background-color:#FFFFFF;">Collections.synchronizedList()</font>**`**<font style="background-color:#FFFFFF;"> åŒ…è£…ï¼š è¿™æ˜¯æœ€ç®€å•çš„â€œåŠ å›ºâ€æ–¹å¼ã€‚å®ƒä¼šè¿”å›ä¸€ä¸ªçº¿ç¨‹å®‰å…¨çš„ </font>**`**<font style="background-color:#FFFFFF;">List</font>**`**<font style="background-color:#FFFFFF;"> åŒ…è£…å™¨ï¼Œå…¶æ‰€æœ‰æ–¹æ³•éƒ½ç”± </font>**`**<font style="background-color:#FFFFFF;">synchronized</font>**`**<font style="background-color:#FFFFFF;"> ä¿®é¥°ã€‚</font>**

```java
List<String> list = new ArrayList<>();
List<String> safeList = Collections.synchronizedList(list);
safeList.add("a"); // è¿™ä¸ªæ“ä½œæ˜¯çº¿ç¨‹å®‰å…¨çš„
```

**<font style="background-color:#FFFFFF;">æ³¨æ„</font>****<font style="background-color:#FFFFFF;">ï¼šè™½ç„¶å•ä¸ªæ“ä½œæ˜¯åŸå­çš„ï¼Œä½†å¤åˆæ“ä½œï¼ˆå¦‚è¿­ä»£ï¼‰ä»ç„¶éœ€è¦æ‰‹åŠ¨åŠ é”ï¼Œå¦åˆ™å¯èƒ½æŠ›å‡º </font>**`**<font style="background-color:#FFFFFF;">ConcurrentModificationException</font>**`**<font style="background-color:#FFFFFF;">ã€‚</font>**

1. **<font style="color:#74B602;background-color:#FFFFFF;">ä½¿ç”¨ </font>**`**<font style="color:#74B602;background-color:#FFFFFF;">CopyOnWriteArrayList</font>**`**<font style="color:#74B602;background-color:#FFFFFF;">ï¼š</font>****<font style="background-color:#FFFFFF;"> è¿™æ˜¯ </font>**`**<font style="background-color:#FFFFFF;">java.util.concurrent</font>**`**<font style="background-color:#FFFFFF;"> åŒ…æä¾›çš„å¹¶å‘é›†åˆï¼Œæ˜¯ç°ä»£Javaå¹¶å‘ç¼–ç¨‹ä¸­çš„åˆ©å™¨ã€‚</font>**
    - **<font style="background-color:#FFFFFF;">å·¥ä½œåŸç†</font>****<font style="background-color:#FFFFFF;">ï¼šå®ƒåœ¨æ‰§è¡Œå†™æ“ä½œï¼ˆ</font>**`**<font style="background-color:#FFFFFF;">add</font>**`**<font style="background-color:#FFFFFF;">, </font>**`**<font style="background-color:#FFFFFF;">remove</font>**`**<font style="background-color:#FFFFFF;">ï¼‰æ—¶ï¼Œä¼š</font>****<font style="background-color:#FFFFFF;">å¤åˆ¶</font>****<font style="background-color:#FFFFFF;">ä¸€ä»½åº•å±‚çš„æ•°ç»„ï¼Œåœ¨æ–°æ•°ç»„ä¸Šè¿›è¡Œä¿®æ”¹ï¼Œæœ€åå†å°†å¼•ç”¨æŒ‡å‘æ–°æ•°ç»„ã€‚è¯»æ“ä½œåˆ™åœ¨åŸæ•°ç»„ä¸Šè¿›è¡Œï¼Œå®Œå…¨ä¸åŠ é”ã€‚</font>**
    - **<font style="background-color:#FFFFFF;">é€‚ç”¨åœºæ™¯</font>****<font style="background-color:#FFFFFF;">ï¼šéå¸¸é€‚åˆâ€œ</font>****<font style="background-color:#FFFFFF;">è¯»å¤šå†™å°‘</font>****<font style="background-color:#FFFFFF;">â€çš„å¹¶å‘åœºæ™¯ã€‚ä¾‹å¦‚ï¼Œäº‹ä»¶ç›‘å¬å™¨åˆ—è¡¨ã€é…ç½®ä¿¡æ¯åˆ—è¡¨ç­‰ã€‚è¯»å–æ€§èƒ½æé«˜ï¼Œä¸”è¿­ä»£æ—¶ç»å¯¹ä¸ä¼šæŠ›å‡º </font>**`**<font style="background-color:#FFFFFF;">ConcurrentModificationException</font>**`**<font style="background-color:#FFFFFF;">ã€‚</font>**
    - **<font style="background-color:#FFFFFF;">ç¼ºç‚¹</font>****<font style="background-color:#FFFFFF;">ï¼šå†™æ“ä½œæˆæœ¬é«˜ï¼ˆæ•°ç»„å¤åˆ¶ï¼‰ï¼Œå¹¶ä¸”æ•°æ®ä¸€è‡´æ€§æ˜¯æœ€ç»ˆä¸€è‡´æ€§ï¼ˆå†™æ“ä½œåï¼Œå·²å¼€å§‹è¿­ä»£çš„çº¿ç¨‹çœ‹ä¸åˆ°æœ€æ–°çš„ä¿®æ”¹ï¼‰ã€‚</font>**
2. **<font style="background-color:#FFFFFF;">ä½¿ç”¨ </font>**`**<font style="background-color:#FFFFFF;">Vector</font>**`**<font style="background-color:#FFFFFF;">ï¼ˆ</font>****<font style="color:#74B602;background-color:#FFFFFF;">å·²ä¸æ¨è</font>****<font style="background-color:#FFFFFF;">ï¼‰ï¼š </font>**`**<font style="background-color:#FFFFFF;">Vector</font>**`**<font style="background-color:#FFFFFF;"> æ˜¯ä¸€ä¸ªå¤è€çš„çº¿ç¨‹å®‰å…¨ç±»ï¼Œå®ƒå’Œ </font>**`**<font style="background-color:#FFFFFF;">ArrayList</font>**`**<font style="background-color:#FFFFFF;"> åŠŸèƒ½ç±»ä¼¼ï¼Œä½†æ‰€æœ‰å…¬å¼€æ–¹æ³•éƒ½ç”¨ </font>**`**<font style="background-color:#FFFFFF;">synchronized</font>**`**<font style="background-color:#FFFFFF;"> ä¿®é¥°ï¼Œæ€§èƒ½è¾ƒå·®ï¼Œç°åœ¨åŸºæœ¬è¢« </font>**`**<font style="background-color:#FFFFFF;">Collections.synchronizedList</font>**`**<font style="background-color:#FFFFFF;"> å’Œ </font>**`**<font style="background-color:#FFFFFF;">CopyOnWriteArrayList</font>**`**<font style="background-color:#FFFFFF;"> æ‰€å–ä»£ã€‚</font>**

# <font style="color:#ECAA04;background-color:#FFFFFF;">List å»é‡ï¼Œæˆ‘åªéœ€è¦ä¸€è¡Œä»£ç </font>
```java
package com.baili.springboot3;

import org.junit.jupiter.api.Test;

import java.util.*;
import java.util.stream.Collectors;

/**
 * å»é™¤Listä¸­çš„é‡å¤å…ƒç´ è¿˜åªä¼šfor? æˆ‘ä¸€è¡Œä»£ç å°±æå®šã€‚
 */
public class ArrayListDeduplicationTests {

    public List<String> nameList = Arrays.asList(
        "ç™¾é‡Œ",
        "æå››",
        "ç‹äº”",
        "ç™¾é‡Œ",
        "å¼ ä¸‰",
        "ç‹äº”",
        "å¼ ä¸‰",
        "æå››",
        "ç™¾é‡Œ",
        "ç‹äº”"
    );

    /**
     * å•å±‚ for å¾ªç¯å»é‡
     */
    @Test
    public void test1() {
        List<String> strings = new ArrayList<>(nameList);
        List<String> dpNameList = new ArrayList<>();
        for (String string : strings) {
            if (!dpNameList.contains(string)) {
                dpNameList.add(string);
            }
        }
        System.out.println(dpNameList);
    }

    /**
     * åŒé‡ for å¾ªç¯å»é‡å¤„ç†
     */
    @Test
    public void test2() {
        List<String> strings = new ArrayList<>(nameList);
        for (int i = 0; i < strings.size() - 1; i++) {
            for (int j = strings.size() - 1; j > i; j--) {
                if (strings.get(i).contains(strings.get(j))) {
                    strings.remove(j);
                }
            }
        }
        System.out.println(strings);
    }

    /**
     * å•å±‚ for å¾ªç¯ï¼Œå…ƒç´ åæ ‡å»é‡å¤„ç†
     */
    @Test
    public void test3() {
        List<String> strings = new ArrayList<>(nameList);
        List<String> strings2 = new ArrayList<>(nameList);
        for (String string : strings2) {
            if (strings.indexOf(string) != strings.lastIndexOf(string)) {
                strings.remove(strings.lastIndexOf(string));
            }
        }
        System.out.println(strings);
    }

    /**
     * Set å»é‡
     */
    @Test
    public void test4() {
        List<String> strings = new ArrayList<>(new HashSet<>(nameList));
        System.out.println(strings);
    }

    /**
     * Stream å»é‡
     */
    @Test
    public void test5() {
        List<String> strings = new ArrayList<>(nameList);
        strings = strings.stream().distinct().collect(Collectors.toList());
        System.out.println(strings);
    }
}

```

# <font style="color:#ECAA04;background-color:#FFFFFF;">List åˆ é™¤ç‰¹å®šå…ƒç´ ï¼Œæˆ‘åªéœ€è¦ä¸€è¡Œä»£ç </font>
```java
package com.baili.springboot3;

import org.junit.jupiter.api.Test;

import java.util.ArrayList;
import java.util.Arrays;
import java.util.Iterator;
import java.util.List;
import java.util.stream.Collectors;

/**
 * åˆ é™¤Listä¸­æŸä¸ªç‰¹å®šçš„å…ƒç´ ï¼Œä¸€è¡Œä»£ç å°±æå®šã€‚
 */
public class ArrayListRemoveTests {

    public List<String> nameList = Arrays.asList(
            "shouyue",
            "xuance",
            "baili",
            "bailixi"
    );

    @Test
    public void test1() {
        List<String> strings = new ArrayList<>(nameList);
        for (int i = 0; i < strings.size(); i++) {
            if (strings.get(i).startsWith("baili")) {
                strings.remove(i);
            }
        }
        System.out.println(strings);
    }

    @Test
    public void test2() {
        List<String> strings = new ArrayList<>(nameList);
        for (int i = strings.size() - 1; i >= 0; i--) {
            if (strings.get(i).startsWith("baili")) {
                strings.remove(i);
            }
        }
        System.out.println(strings);
    }

    @Test
    public void test3() {
        List<String> strings = new ArrayList<>(nameList);
        Iterator<String> iterator = strings.iterator();
        while (iterator.hasNext()) {
            if (iterator.next().startsWith("baili")) {
                iterator.remove();
            }
        }
        System.out.println(strings);
    }

    @Test
    public void test4() {
        List<String> strings = new ArrayList<>(nameList);
        strings = strings.stream()
                .filter(s -> !s.startsWith("baili"))
                .collect(Collectors.toList());
        System.out.println(strings);
    }

    @Test
    public void test5() {
        List<String> strings = new ArrayList<>(nameList);
        strings.removeIf(s -> s.startsWith("baili"));
        System.out.println(strings);
    }
}
```

# <font style="color:#ECAA04;background-color:#FFFFFF;">List æ’åºï¼Œæˆ‘åªéœ€è¦ä¸€è¡Œä»£ç </font>
```java
package com.baili.springboot3;

import com.baili.springboot3.entity.User;
import org.junit.jupiter.api.Test;

import java.util.ArrayList;
import java.util.Collections;
import java.util.Comparator;
import java.util.List;

/**
 * List æ’åºï¼Œæˆ‘åªéœ€è¦ä¸€è¡Œä»£ç 
 */
public class ArrayListCompareTests {

    /**
     * ç®€å•çš„æ’åºæ–¹æ³•
     */
    @Test
    public void test01() {
        List<Integer> list = new ArrayList<>();
        list.add(5);
        list.add(17);
        list.add(9);
        list.add(12);
        // ç®€å•çš„intç±»ä¼¼æ•°æ®ï¼Œå¯ä»¥ä½¿ç”¨Collectionsçš„sortæ–¹æ³•å³å¯å®Œæˆæ’åº
        Collections.sort(list);
        System.out.println(list);
    }

    /**
     * å¯¹è±¡æ’åº
     */
    @Test
    public void test02() {
        List<User> list = new ArrayList<User>();
        list.add(new User("å¼ ä¸‰", 25));
        list.add(new User("æå››", 37));
        list.add(new User("ç‹äº”", 29));
        list.add(new User("èµµå…­", 32));
        // æŒ‰å¹´é¾„æ’åº
        Collections.sort(list);
        System.out.println(list);
    }

    /**
     * ä½¿ç”¨åŒ¿åå†…éƒ¨ç±»å®ç°æ’åº
     */
    @Test
    public void test03() {
        List<User> list = new ArrayList<User>();
        list.add(new User("å¼ ä¸‰", 25));
        list.add(new User("æå››", 37));
        list.add(new User("ç‹äº”", 29));
        list.add(new User("èµµå…­", 32));
        // æŒ‰å¹´é¾„æ’åº
        list.sort((u1, u2) -> {
            int diff = u1.getAge() - u2.getAge();
            if (diff > 0) {
                return 1;
            } else if (diff < 0) {
                return -1;
            }
            return 0; //ç›¸ç­‰ä¸º0
        });
        System.out.println(list);
    }

    /**
     * ä¸€è¡Œä»£ç æå®š
     */
    @Test
    public void test04() {
        List<User> list = new ArrayList<User>();
        list.add(new User("å¼ ä¸‰", 25));
        list.add(new User("æå››", 37));
        list.add(new User("ç‹äº”", 29));
        list.add(new User("èµµå…­", 32));
        // ä¸€è¡Œä»£ç æå®š
        list.sort(Comparator.comparing(User::getAge));
        System.out.println(list);
    }
}
```

# <font style="color:#ECAA04;background-color:#FFFFFF;">List äº¤é›†ã€å¹¶é›†ã€å·®é›†ã€å»é‡å¹¶é›†ï¼Œæˆ‘åªéœ€è¦ä¸€è¡Œä»£ç </font>
```java
package com.baili.springboot3;

import com.baili.springboot3.entity.User;
import org.junit.jupiter.api.Test;

import java.util.ArrayList;
import java.util.Collections;
import java.util.Comparator;
import java.util.List;

/**
 * List æ’åºï¼Œæˆ‘åªéœ€è¦ä¸€è¡Œä»£ç 
 */
public class ArrayListCompareTests {

    /**
     * ç®€å•çš„æ’åºæ–¹æ³•
     */
    @Test
    public void test01() {
        List<Integer> list = new ArrayList<>();
        list.add(5);
        list.add(17);
        list.add(9);
        list.add(12);
        // ç®€å•çš„intç±»ä¼¼æ•°æ®ï¼Œå¯ä»¥ä½¿ç”¨Collectionsçš„sortæ–¹æ³•å³å¯å®Œæˆæ’åº
        Collections.sort(list);
        System.out.println(list);
    }

    /**
     * å¯¹è±¡æ’åº
     */
    @Test
    public void test02() {
        List<User> list = new ArrayList<User>();
        list.add(new User("å¼ ä¸‰", 25));
        list.add(new User("æå››", 37));
        list.add(new User("ç‹äº”", 29));
        list.add(new User("èµµå…­", 32));
        // æŒ‰å¹´é¾„æ’åº
        Collections.sort(list);
        System.out.println(list);
    }

    /**
     * ä½¿ç”¨åŒ¿åå†…éƒ¨ç±»å®ç°æ’åº
     */
    @Test
    public void test03() {
        List<User> list = new ArrayList<User>();
        list.add(new User("å¼ ä¸‰", 25));
        list.add(new User("æå››", 37));
        list.add(new User("ç‹äº”", 29));
        list.add(new User("èµµå…­", 32));
        // æŒ‰å¹´é¾„æ’åº
        list.sort((u1, u2) -> {
            int diff = u1.getAge() - u2.getAge();
            if (diff > 0) {
                return 1;
            } else if (diff < 0) {
                return -1;
            }
            return 0; //ç›¸ç­‰ä¸º0
        });
        System.out.println(list);
    }

    /**
     * ä¸€è¡Œä»£ç æå®š
     */
    @Test
    public void test04() {
        List<User> list = new ArrayList<User>();
        list.add(new User("å¼ ä¸‰", 25));
        list.add(new User("æå››", 37));
        list.add(new User("ç‹äº”", 29));
        list.add(new User("èµµå…­", 32));
        // ä¸€è¡Œä»£ç æå®š
        list.sort(Comparator.comparing(User::getAge));
        System.out.println(list);
    }
}
```

# <font style="color:#ECAA04;background-color:#FFFFFF;">Java å¦‚ä½•ä¼˜é›…çš„è·å–ä¸¤ä¸ªListçš„äº¤é›†å…ƒç´ </font>
<font style="color:rgba(0, 0, 0, 0.9);background-color:#FFFFFF;">åœ¨Javaä¸­ï¼Œä¼˜é›…åœ°è·å–ä¸¤ä¸ªListçš„äº¤é›†å¯ä»¥é€šè¿‡ä»¥ä¸‹å‡ ç§æ–¹å¼å®ç°ï¼Œæ¨èä½¿ç”¨</font>**<font style="color:rgba(0, 0, 0, 0.9);background-color:#FFFFFF;">Java 8çš„Stream API</font>**<font style="color:rgba(0, 0, 0, 0.9);background-color:#FFFFFF;">æˆ–</font>**<font style="color:rgba(0, 0, 0, 0.9);background-color:#FFFFFF;">Apache Commons Collections</font>**<font style="color:rgba(0, 0, 0, 0.9);background-color:#FFFFFF;">å·¥å…·åº“ï¼š</font>

---

### <font style="color:rgba(0, 0, 0, 0.9);background-color:#FFFFFF;">æ–¹æ³•1ï¼šä½¿ç”¨Stream APIï¼ˆæ¨èï¼‰</font>
```java
import java.util.*;
import java.util.stream.Collectors;

public class ListIntersection {
    public static void main(String[] args) {
        List<Integer> list1 = Arrays.asList(1, 2, 3, 4, 5);
        List<Integer> list2 = Arrays.asList(3, 4, 5, 6, 7);

        // æ ¸å¿ƒä»£ç ï¼šé€šè¿‡Setå¿«é€Ÿæ£€æŸ¥å­˜åœ¨æ€§
        Set<Integer> set = new HashSet<>(list2);
        List<Integer> intersection = list1.stream()
        .filter(set::contains) // ç­‰æ•ˆäº list2::containsï¼Œä½†HashSetæ•ˆç‡æ›´é«˜
        .collect(Collectors.toList());

        System.out.println("äº¤é›†: " + intersection); // è¾“å‡º: [3, 4, 5]
    }
}
```

**<font style="color:rgba(0, 0, 0, 0.9);background-color:#FFFFFF;">ä¼˜ç‚¹</font>**<font style="color:rgba(0, 0, 0, 0.9);background-color:#FFFFFF;">ï¼š</font>

+ <font style="color:rgba(0, 0, 0, 0.9);background-color:#FFFFFF;">ä»£ç ç®€æ´é«˜æ•ˆï¼ˆå€ŸåŠ©</font>`<font style="color:rgba(0, 0, 0, 0.9);background-color:#FFFFFF;">HashSet</font>`<font style="color:rgba(0, 0, 0, 0.9);background-color:#FFFFFF;">å°†</font>`<font style="color:rgba(0, 0, 0, 0.9);background-color:#FFFFFF;">contains</font>`<font style="color:rgba(0, 0, 0, 0.9);background-color:#FFFFFF;">æ“ä½œå¤æ‚åº¦é™åˆ°O(1)ï¼‰</font>
+ <font style="color:rgba(0, 0, 0, 0.9);background-color:#FFFFFF;">ä¸ä¿®æ”¹åŸå§‹åˆ—è¡¨</font>
+ <font style="color:rgba(0, 0, 0, 0.9);background-color:#FFFFFF;">ä¿ç•™åŸå§‹åˆ—è¡¨é¡ºåºï¼ˆå¦‚æœè¦æ±‚é¡ºåºï¼‰</font>

---

### <font style="color:rgba(0, 0, 0, 0.9);background-color:#FFFFFF;">æ–¹æ³•2ï¼šä½¿ç”¨</font>`<font style="color:rgba(0, 0, 0, 0.9);background-color:#FFFFFF;">retainAll()</font>`<font style="color:rgba(0, 0, 0, 0.9);background-color:#FFFFFF;">æ–¹æ³•</font>
```java
List<Integer> list1 = new ArrayList<>(Arrays.asList(1, 2, 3, 4, 5));
List<Integer> list2 = Arrays.asList(3, 4, 5, 6, 7);

list1.retainAll(list2); // ç›´æ¥ä¿®æ”¹list1ï¼Œåªä¿ç•™äº¤é›†
System.out.println("äº¤é›†: " + list1); // [3, 4, 5]
```

**<font style="color:rgba(0, 0, 0, 0.9);background-color:#FFFFFF;">æ³¨æ„</font>**<font style="color:rgba(0, 0, 0, 0.9);background-color:#FFFFFF;">ï¼š</font>

+ **<font style="color:rgba(0, 0, 0, 0.9);background-color:#FFFFFF;">ä¼šä¿®æ”¹åŸå§‹åˆ—è¡¨</font>**<font style="color:rgba(0, 0, 0, 0.9);background-color:#FFFFFF;">ï¼ˆè‹¥ä¸å¸Œæœ›ä¿®æ”¹ï¼Œéœ€å…ˆåˆ›å»ºå‰¯æœ¬ï¼‰</font>
+ <font style="color:rgba(0, 0, 0, 0.9);background-color:#FFFFFF;">ArrayListçš„</font>`<font style="color:rgba(0, 0, 0, 0.9);background-color:#FFFFFF;">retainAll()</font>`<font style="color:rgba(0, 0, 0, 0.9);background-color:#FFFFFF;">æ—¶é—´å¤æ‚åº¦ä¸ºO(n*m)ï¼Œæ•°æ®é‡å¤§æ—¶æ€§èƒ½è¾ƒå·®</font>

---

### <font style="color:rgba(0, 0, 0, 0.9);background-color:#FFFFFF;">æ–¹æ³•3ï¼šä½¿ç”¨Apache Commons Collections</font>
<font style="color:rgba(0, 0, 0, 0.9);background-color:#FFFFFF;">æ·»åŠ ä¾èµ–ï¼š</font>

```xml
<dependency>
  <groupId>org.apache.commons</groupId>
  <artifactId>commons-collections4</artifactId>
  <version>4.4</version>
</dependency>
```

<font style="color:rgba(0, 0, 0, 0.9);background-color:#FFFFFF;">ä»£ç ï¼š</font>

```java
import org.apache.commons.collections4.CollectionUtils;

List<Integer> list1 = Arrays.asList(1, 2, 3, 4, 5);
List<Integer> list2 = Arrays.asList(3, 4, 5, 6, 7);

// è¿”å›Collectionç±»å‹äº¤é›†ï¼ˆæ— åºï¼‰
Collection<Integer> intersection = CollectionUtils.intersection(list1, list2);

// è½¬Listï¼ˆéœ€æ‰‹åŠ¨å¤„ç†é¡ºåºï¼‰
List<Integer> result = new ArrayList<>(intersection);
```

---

### <font style="color:rgba(0, 0, 0, 0.9);background-color:#FFFFFF;">å¯¹æ¯”æ€»ç»“</font>
| <font style="color:rgba(0, 0, 0, 0.9);background-color:#FFFFFF;">æ–¹æ³•</font> | <font style="color:rgba(0, 0, 0, 0.9);background-color:#FFFFFF;">æ˜¯å¦ä¿®æ”¹åŸåˆ—è¡¨</font> | <font style="color:rgba(0, 0, 0, 0.9);background-color:#FFFFFF;">æ€§èƒ½</font> | <font style="color:rgba(0, 0, 0, 0.9);background-color:#FFFFFF;">ä¿ç•™é¡ºåº</font> | <font style="color:rgba(0, 0, 0, 0.9);background-color:#FFFFFF;">ä»£ç ç®€æ´æ€§</font> |
| :---: | :---: | :---: | :---: | :---: |
| <font style="color:rgba(0, 0, 0, 0.9);background-color:#FFFFFF;">Stream API + Set</font> | <font style="color:rgba(0, 0, 0, 0.9);background-color:#FFFFFF;">âŒ</font> | **<font style="color:rgba(0, 0, 0, 0.9);background-color:#FFFFFF;">O(n)</font>** | <font style="color:rgba(0, 0, 0, 0.9);background-color:#FFFFFF;">âœ…</font> | <font style="color:rgba(0, 0, 0, 0.9);background-color:#FFFFFF;">âœ…</font> |
| `<font style="color:rgba(0, 0, 0, 0.9);background-color:#FFFFFF;">retainAll()</font>` | <font style="color:rgba(0, 0, 0, 0.9);background-color:#FFFFFF;">âœ…</font> | <font style="color:rgba(0, 0, 0, 0.9);background-color:#FFFFFF;">O(n*m)</font> | <font style="color:rgba(0, 0, 0, 0.9);background-color:#FFFFFF;">âœ…</font> | <font style="color:rgba(0, 0, 0, 0.9);background-color:#FFFFFF;">âœ…</font> |
| <font style="color:rgba(0, 0, 0, 0.9);background-color:#FFFFFF;">Apache Commons</font> | <font style="color:rgba(0, 0, 0, 0.9);background-color:#FFFFFF;">âŒ</font> | <font style="color:rgba(0, 0, 0, 0.9);background-color:#FFFFFF;">O(n)</font> | <font style="color:rgba(0, 0, 0, 0.9);background-color:#FFFFFF;">âŒ</font> | <font style="color:rgba(0, 0, 0, 0.9);background-color:#FFFFFF;">âœ…</font> |


---

### <font style="color:rgba(0, 0, 0, 0.9);background-color:#FFFFFF;">æœ€ä½³å®è·µ</font>
1. **<font style="color:rgba(0, 0, 0, 0.9);background-color:#FFFFFF;">æ¨èä½¿ç”¨Stream API +</font>****<font style="color:rgba(0, 0, 0, 0.9);background-color:#FFFFFF;"> </font>**`**<font style="color:rgba(0, 0, 0, 0.9);background-color:#FFFFFF;">HashSet</font>**`<font style="color:rgba(0, 0, 0, 0.9);background-color:#FFFFFF;">ï¼š</font>

```java
Set<T> set = new HashSet<>(list2);
List<T> result = list1.stream()
                    .filter(set::contains)
                    .collect(Collectors.toList());
```

2. **<font style="color:rgba(0, 0, 0, 0.9);background-color:#FFFFFF;">éœ€è¦å»é‡çš„åœºæ™¯</font>**<font style="color:rgba(0, 0, 0, 0.9);background-color:#FFFFFF;">ï¼š</font>

```java
List<T> result = list1.stream()
                .distinct() // å»é‡
                .filter(new HashSet<>(list2)::contains)
                .collect(Collectors.toList());
```

3. **<font style="color:rgba(0, 0, 0, 0.9);background-color:#FFFFFF;">è¶…å¤§åˆ—è¡¨ä¼˜åŒ–</font>**<font style="color:rgba(0, 0, 0, 0.9);background-color:#FFFFFF;">ï¼šå¦‚æœä¸¤ä¸ªåˆ—è¡¨éƒ½æå¤§ï¼Œå¯ç”¨Guavaçš„</font>`<font style="color:rgba(0, 0, 0, 0.9);background-color:#FFFFFF;">Sets.intersection()</font>`<font style="color:rgba(0, 0, 0, 0.9);background-color:#FFFFFF;">å…ˆå°†ä¸¤ä¸ªListè½¬ä¸ºSetå†æ“ä½œã€‚</font>

# <font style="color:#ECAA04;background-color:#FFFFFF;">SpringBoot ç”ŸæˆäºŒç»´ç ï¼Œè°·æ­Œ Zxing+æºç </font>
```properties
<!-- è°·æ­Œ zxing ä¾èµ–-->
<dependency>
    <groupId>com.google.zxing</groupId>
    <artifactId>core</artifactId>
    <version>3.5.3</version>
</dependency>

<dependency>
    <groupId>com.google.zxing</groupId>
    <artifactId>javase</artifactId>
    <version>3.5.3</version>
</dependency>
```

```properties
package com.baili.springboot3.controller;

import com.baili.springboot3.utools.QRCodeGenerator;
import com.google.zxing.WriterException;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.http.MediaType;
import org.springframework.web.bind.annotation.GetMapping;
import org.springframework.web.bind.annotation.PathVariable;
import org.springframework.web.bind.annotation.RestController;

import java.awt.*;
import java.io.IOException;

@RestController
public class QRCodeController {

    @Autowired
    private QRCodeGenerator qrCodeGenerator;

    /**
     * ç”Ÿæˆæ™®é€šäºŒç»´ç 
     *
     * @param text äºŒç»´ç ä¸­è¦ç¼–ç çš„æ–‡æœ¬ä¿¡æ¯ã€‚
     * @return äºŒç»´ç å›¾åƒçš„å­—èŠ‚æ•°ç»„ã€‚
     * @throws IOException å¯èƒ½ç”±å›¾åƒI/Oæ“ä½œæŠ›å‡ºçš„å¼‚å¸¸ã€‚
     * @throws WriterException å¯èƒ½ç”±äºŒç»´ç å†™å…¥å™¨æŠ›å‡ºçš„å¼‚å¸¸ã€‚
     */
    @GetMapping(value = "/qr-code/{text}", produces = MediaType.IMAGE_PNG_VALUE)
    public byte[] createQRCode(@PathVariable String text) throws IOException, WriterException {
        int width = 300;
        int height = 300;
        Color qrColor = Color.BLACK;
        Color bgColor = Color.WHITE;
        return qrCodeGenerator.generateQRCode(text, width, height, qrColor, bgColor);
    }

    /**
     * ç”Ÿæˆå¸¦æœ‰Logoçš„äºŒç»´ç 
     *
     * @param text äºŒç»´ç ä¸­è¦ç¼–ç çš„æ–‡æœ¬ä¿¡æ¯ã€‚
     * @return å¸¦Logoçš„äºŒç»´ç å›¾åƒçš„å­—èŠ‚æ•°ç»„ã€‚
     * @throws IOException å¯èƒ½ç”±å›¾åƒI/Oæ“ä½œæŠ›å‡ºçš„å¼‚å¸¸ã€‚
     * @throws WriterException å¯èƒ½ç”±äºŒç»´ç å†™å…¥å™¨æŠ›å‡ºçš„å¼‚å¸¸ã€‚
     */
    @GetMapping(value = "/qr-code-with-logo/{text}", produces = MediaType.IMAGE_PNG_VALUE)
    public byte[] createQRCodeWithLogo(@PathVariable String text) throws IOException, WriterException {
        int width = 300;
        int height = 300;
        Color qrColor = Color.RED;
        Color bgColor = Color.WHITE;
        String logoPath = "your path"; // æ›¿æ¢ä¸ºä½ çš„Logoå›¾ç‰‡è·¯å¾„
        return qrCodeGenerator.generateQRCodeWithLogo(text, width, height, logoPath, qrColor, bgColor);
    }

    /**
     * ç”Ÿæˆå¸¦èƒŒæ™¯å›¾çš„äºŒç»´ç 
     * @param text äºŒç»´ç ä¸­è¦åŒ…å«çš„æ–‡æœ¬ä¿¡æ¯
     * @return å¸¦èƒŒæ™¯å›¾çš„äºŒç»´ç å›¾ç‰‡çš„byteæ•°ç»„
     */
    @GetMapping(value = "/qr-code-background-image/{text}", produces = MediaType.IMAGE_PNG_VALUE)
    public byte[] createQRCodeWithBackgroundImage(@PathVariable String text) throws WriterException, IOException {
        int width = 300; // äºŒç»´ç å®½åº¦
        int height = 300; // äºŒç»´ç é«˜åº¦
        String backgroundImagePath = "your path";
        return qrCodeGenerator.generateQRCodeWithBackgroundImage(text, width, height, backgroundImagePath);
    }
}

```

```properties
package com.baili.springboot3.utools;

import com.google.zxing.BarcodeFormat;
import com.google.zxing.EncodeHintType;
import com.google.zxing.WriterException;
import com.google.zxing.client.j2se.MatrixToImageWriter;
import com.google.zxing.common.BitMatrix;
import com.google.zxing.qrcode.QRCodeWriter;
import com.google.zxing.qrcode.decoder.ErrorCorrectionLevel;
import org.springframework.stereotype.Component;

import javax.imageio.ImageIO;
import java.awt.*;
import java.awt.image.BufferedImage;
import java.io.ByteArrayInputStream;
import java.io.ByteArrayOutputStream;
import java.io.File;
import java.io.IOException;
import java.util.EnumMap;
import java.util.HashMap;
import java.util.Map;

@Component
public class QRCodeGenerator {

    /**
     * ç”ŸæˆäºŒç»´ç çš„å­—èŠ‚æ•°ç»„ã€‚
     *
     * @param text äºŒç»´ç ä¸­è¦ç¼–ç çš„æ–‡æœ¬ä¿¡æ¯ã€‚
     * @param width äºŒç»´ç å›¾åƒçš„å®½åº¦ã€‚
     * @param height äºŒç»´ç å›¾åƒçš„é«˜åº¦ã€‚
     * @param qrColor äºŒç»´ç ä¸­é»‘è‰²æ¨¡å—çš„é¢œè‰²ã€‚
     * @param bgColor äºŒç»´ç èƒŒæ™¯é¢œè‰²ã€‚
     * @return äºŒç»´ç å›¾åƒçš„å­—èŠ‚æ•°ç»„ã€‚
     * @throws IOException å¯èƒ½ç”±å›¾åƒI/Oæ“ä½œæŠ›å‡ºçš„å¼‚å¸¸ã€‚
     * @throws WriterException å¯èƒ½ç”±äºŒç»´ç å†™å…¥å™¨æŠ›å‡ºçš„å¼‚å¸¸ã€‚
     */
    public byte[] generateQRCode(String text, int width, int height, Color qrColor, Color bgColor) throws IOException, WriterException {
        // åˆ›å»ºä¸€ä¸ªåŒ…å«ç¼–ç æç¤ºçš„æ˜ å°„ï¼Œè¿™äº›æç¤ºå°†ç”¨äºäºŒç»´ç çš„ç¼–ç è¿‡ç¨‹
        Map<EncodeHintType, Object> hintMap = new HashMap<>();
        hintMap.put(EncodeHintType.CHARACTER_SET, "UTF-8"); // è®¾ç½®ç¼–ç å­—ç¬¦é›†ä¸ºUTF-8
        hintMap.put(EncodeHintType.ERROR_CORRECTION, ErrorCorrectionLevel.H); // è®¾ç½®é”™è¯¯æ ¡æ­£çº§åˆ«ä¸ºé«˜
        hintMap.put(EncodeHintType.MARGIN, 1); // è®¾ç½®äºŒç»´ç è¾¹æ¡†çš„è¾¹è·ä¸º1ä¸ªæ¨¡å—

        // åˆ›å»ºäºŒç»´ç å†™å…¥å™¨å®ä¾‹å¹¶ä½¿ç”¨encodeæ–¹æ³•ç”ŸæˆBitMatrixå¯¹è±¡
        QRCodeWriter qrCodeWriter = new QRCodeWriter();
        BitMatrix bitMatrix = qrCodeWriter.encode(text, BarcodeFormat.QR_CODE, width, height, hintMap);

        // åˆ›å»ºä¸€ä¸ªBufferedImageå¯¹è±¡ï¼Œç”¨äºå­˜å‚¨æœ€ç»ˆçš„äºŒç»´ç å›¾åƒ
        BufferedImage bufferedImagebufferedImage = new BufferedImage(width, height, BufferedImage.TYPE_INT_RGB);
        bufferedImage.createGraphics(); // åˆå§‹åŒ–å›¾åƒçš„Graphicså¯¹è±¡

        Graphics2D graphics = (Graphics2D) bufferedImage.getGraphics(); // å¼ºåˆ¶ç±»å‹è½¬æ¢ä¸ºGraphics2D
        graphics.setColor(bgColor); // è®¾ç½®èƒŒæ™¯é¢œè‰²å¹¶å¡«å……æ•´ä¸ªå›¾åƒ
        graphics.fillRect(0, 0, width, height); // å¡«å……èƒŒæ™¯è‰²
        graphics.setColor(qrColor); // è®¾ç½®äºŒç»´ç é¢œè‰²

        // éå†BitMatrixçš„æ¯ä¸ªæ¨¡å—ï¼Œå¹¶ä½¿ç”¨å½“å‰çš„qrColorç»˜åˆ¶é»‘è‰²æ¨¡å—
        for (int i = 0; i < width; i++) {
            for (int j = 0; j < height; j++) {
                if (bitMatrix.get(i, j)) {
                    graphics.fillRect(i, j, 1, 1); // ç»˜åˆ¶å•ä¸ªé»‘è‰²æ¨¡å—
                }
            }
        }

        // å°†ç»˜åˆ¶å®Œæˆçš„BufferedImageå¯¹è±¡è½¬æ¢ä¸ºå­—èŠ‚æ•°ç»„ï¼Œä»¥ä¾¿å¯ä»¥å°†å…¶å†™å…¥æ–‡ä»¶æˆ–ä½œä¸ºå“åº”å‘é€
        ByteArrayOutputStream byteArrayOutputStream = new ByteArrayOutputStream();
        ImageIO.write(bufferedImage, "png", byteArrayOutputStream); // å°†å›¾åƒå†™å…¥åˆ°è¾“å‡ºæµ
        return byteArrayOutputStream.toByteArray(); // è¿”å›å›¾åƒçš„å­—èŠ‚æ•°ç»„
    }

    /**
     * ç”Ÿæˆå¸¦æœ‰Logoçš„äºŒç»´ç çš„å­—èŠ‚æ•°ç»„ã€‚
     *
     * @param text äºŒç»´ç ä¸­è¦ç¼–ç çš„æ–‡æœ¬ä¿¡æ¯ã€‚
     * @param width äºŒç»´ç å›¾åƒçš„å®½åº¦ã€‚
     * @param height äºŒç»´ç å›¾åƒçš„é«˜åº¦ã€‚
     * @param logoPath Logoå›¾ç‰‡çš„æ–‡ä»¶è·¯å¾„ã€‚
     * @param qrColor äºŒç»´ç ä¸­é»‘è‰²æ¨¡å—çš„é¢œè‰²ã€‚
     * @param bgColor äºŒç»´ç èƒŒæ™¯é¢œè‰²ã€‚
     * @return å¸¦Logoçš„äºŒç»´ç å›¾åƒçš„å­—èŠ‚æ•°ç»„ã€‚
     * @throws IOException å¯èƒ½ç”±å›¾åƒI/Oæ“ä½œæŠ›å‡ºçš„å¼‚å¸¸ã€‚
     * @throws WriterException å¯èƒ½ç”±äºŒç»´ç å†™å…¥å™¨æŠ›å‡ºçš„å¼‚å¸¸ã€‚
     */
    public byte[] generateQRCodeWithLogo(String text, int width, int height, String logoPath, Color qrColor, Color bgColor) throws IOException, WriterException {
        // ç”Ÿæˆæ™®é€šäºŒç»´ç çš„å­—èŠ‚æ•°ç»„
        byte[] qrCodeBytes = generateQRCode(text, width, height, qrColor, bgColor);

        // ä»ç”Ÿæˆçš„å­—èŠ‚æ•°ç»„ä¸­è¯»å–BufferedImageå¯¹è±¡ï¼Œè¡¨ç¤ºæ™®é€šäºŒç»´ç å›¾åƒ
        BufferedImage qrImage = ImageIO.read(new ByteArrayInputStream(qrCodeBytes));

        // è¯»å–Logoå›¾ç‰‡æ–‡ä»¶å¹¶åˆ›å»ºBufferedImageå¯¹è±¡
        BufferedImage logoImage = ImageIO.read(new File(logoPath));

        // åˆ›å»ºç”¨äºåœ¨äºŒç»´ç ä¸Šç»˜åˆ¶Logoçš„Graphics2Då¯¹è±¡
        Graphics2D graphics = qrImage.createGraphics();
        try {
            // è®¡ç®—Logoå›¾ç‰‡çš„å®½åº¦å’Œé«˜åº¦ï¼Œè¿™é‡Œè®¾ç½®ä¸ºäºŒç»´ç å›¾åƒå°ºå¯¸çš„1/5
            int logoWidth = qrImage.getWidth() / 5;
            int logoHeight = qrImage.getHeight() / 5;
            // è®¡ç®—Logoå›¾ç‰‡çš„ç»˜åˆ¶ä½ç½®ï¼Œå±…ä¸­æ”¾ç½®
            int logoX = (qrImage.getWidth() - logoWidth) / 2;
            int logoY = (qrImage.getHeight() - logoHeight) / 2;

            // åœ¨äºŒç»´ç å›¾åƒä¸Šç»˜åˆ¶Logoå›¾ç‰‡
            graphics.drawImage(logoImage, logoX, logoY, logoWidth, logoHeight, null);
        } finally {
            // é‡Šæ”¾Graphics2Då¯¹è±¡å ç”¨çš„èµ„æº
            graphics.dispose();
        }

        // å°†æœ€ç»ˆçš„å¸¦Logoçš„äºŒç»´ç å›¾åƒè½¬æ¢ä¸ºå­—èŠ‚æ•°ç»„
        ByteArrayOutputStream byteArrayOutputStream = new ByteArrayOutputStream();
        ImageIO.write(qrImage, "png", byteArrayOutputStream);
        return byteArrayOutputStream.toByteArray();
    }

    /**
     * ç”Ÿæˆå¸¦æœ‰èƒŒæ™¯å›¾ç‰‡çš„äºŒç»´ç çš„å­—èŠ‚æ•°ç»„ã€‚
     *
     * @param text äºŒç»´ç ä¸­è¦ç¼–ç çš„æ–‡æœ¬ä¿¡æ¯ã€‚
     * @param width äºŒç»´ç å›¾åƒçš„å®½åº¦ã€‚
     * @param height äºŒç»´ç å›¾åƒçš„é«˜åº¦ã€‚
     * @param backgroundImagePath èƒŒæ™¯å›¾ç‰‡çš„æ–‡ä»¶è·¯å¾„ã€‚
     * @return å¸¦èƒŒæ™¯å›¾ç‰‡çš„äºŒç»´ç å›¾åƒçš„å­—èŠ‚æ•°ç»„ã€‚
     * @throws WriterException å¯èƒ½ç”±äºŒç»´ç å†™å…¥å™¨æŠ›å‡ºçš„å¼‚å¸¸ã€‚
     * @throws IOException å¯èƒ½ç”±å›¾åƒI/Oæ“ä½œæŠ›å‡ºçš„å¼‚å¸¸ã€‚
     */
    public byte[] generateQRCodeWithBackgroundImage(String text, int width, int height, String backgroundImagePath) throws WriterException, IOException {
        // åˆ›å»ºäºŒç»´ç å†™å…¥å™¨å®ä¾‹
        QRCodeWriter qrCodeWriter = new QRCodeWriter();
        // åˆ›å»ºç¼–ç æ—¶ä½¿ç”¨çš„å‚æ•°æ˜ å°„
        Map<EncodeHintType, Object> hints = new EnumMap<>(EncodeHintType.class);
        // è®¾ç½®é”™è¯¯æ ¡æ­£çº§åˆ«ä¸ºé«˜ï¼Œå­—ç¬¦ç¼–ç ä¸ºUTF-8ï¼Œè¾¹æ¡†è¾¹è·ä¸º1ä¸ªæ¨¡å—
        hints.put(EncodeHintType.ERROR_CORRECTION, ErrorCorrectionLevel.H);
        hints.put(EncodeHintType.CHARACTER_SET, "UTF-8");
        hints.put(EncodeHintType.MARGIN, 1);

        // ä½¿ç”¨å†™å…¥å™¨å’Œå‚æ•°ç¼–ç æ–‡æœ¬ï¼Œç”ŸæˆBitMatrixå¯¹è±¡
        BitMatrix bitMatrix = qrCodeWriter.encode(text, BarcodeFormat.QR_CODE, width, height, hints);

        // ä»æ–‡ä»¶è·¯å¾„åŠ è½½èƒŒæ™¯å›¾ç‰‡
        BufferedImage backgroundImage = ImageIO.read(new File(backgroundImagePath));

        // åˆ›å»ºä¸€ä¸ªæ–°çš„BufferedImageå¯¹è±¡ï¼Œç”¨äºå­˜æ”¾è°ƒæ•´å¤§å°åçš„èƒŒæ™¯å›¾ç‰‡
        BufferedImage resizedBackground = new BufferedImage(width, height, BufferedImage.TYPE_INT_ARGB);
        Graphics2D graphics = resizedBackground.createGraphics();
        try {
            // å°†èƒŒæ™¯å›¾ç‰‡ç»˜åˆ¶åˆ°æ–°çš„BufferedImageä¸Šï¼Œå¹¶è°ƒæ•´å¤§å°ä»¥é€‚åº”äºŒç»´ç å°ºå¯¸
            graphics.drawImage(backgroundImage, 0, 0, width, height, null);
        } finally {
            // é‡Šæ”¾å›¾å½¢ä¸Šä¸‹æ–‡èµ„æº
            graphics.dispose();
        }

        // ä¸ºè°ƒæ•´å¤§å°åçš„èƒŒæ™¯å›¾ç‰‡åˆ›å»ºæ–°çš„Graphics2Då¯¹è±¡
        graphics = resizedBackground.createGraphics();
        try {
            // è®¾ç½®ç»˜åˆ¶æ—¶çš„é€æ˜åº¦åˆæˆè§„åˆ™
            graphics.setComposite(AlphaComposite.getInstance(AlphaComposite.SRC_OVER));
            // éå†BitMatrixçš„æ¯ä¸ªæ¨¡å—ï¼Œå°†é»‘è‰²æ¨¡å—ç»˜åˆ¶åˆ°èƒŒæ™¯å›¾ä¸Š
            for (int i = 0; i < width; i++) {
                for (int j = 0; j < height; j++) {
                    if (bitMatrix.get(i, j)) {
                        graphics.setColor(Color.BLACK);
                        graphics.fillRect(i, j, 1, 1);
                    }
                }
            }
        } finally {
            // å†æ¬¡é‡Šæ”¾å›¾å½¢ä¸Šä¸‹æ–‡èµ„æº
            graphics.dispose();
        }

        // å°†æœ€ç»ˆçš„å¸¦èƒŒæ™¯å›¾ç‰‡çš„äºŒç»´ç å›¾åƒè½¬æ¢ä¸ºå­—èŠ‚æ•°ç»„
        ByteArrayOutputStream byteArrayOutputStream = new ByteArrayOutputStream();
        ImageIO.write(resizedBackground, "png", byteArrayOutputStream);
        return byteArrayOutputStream.toByteArray();
    }

}

```

# <font style="color:#ECAA04;background-color:#FFFFFF;">è‡ªå®šä¹‰æ³¨è§£+AOP å®ç°é˜²é‡å¤æäº¤</font>
<font style="background-color:#FFFFFF;">è‡ªå®šä¹‰æ³¨è§£+AOP é˜²é‡å¤æäº¤ï¼Œä¸»è¦æ˜¯åˆ©ç”¨ AOP åˆ‡ç‚¹ï¼Œè§¦å‘é€šçŸ¥ï¼Œåœ¨é€šçŸ¥é‡Œé¢è¿›è¡Œæ£€æµ‹é€»è¾‘ï¼Œå› æ­¤å…³é”®ç‚¹å°±æ˜¯è‡ªå®šä¹‰æ³¨è§£çš„å®ç°ä¸åˆ‡é¢ç±»çš„å®ç°ã€‚</font>

<font style="background-color:#FFFFFF;">ç›´æ¥ä¸Šä»£ç ï¼š</font>

```xml
<dependency>
    <groupId>org.springframework.boot</groupId>
    <artifactId>spring-boot-starter-web</artifactId>
</dependency>
<dependency>
    <groupId>org.springframework.boot</groupId>
    <artifactId>spring-boot-starter-aop</artifactId>
</dependency>
<dependency>
    <groupId>org.springframework.boot</groupId>
    <artifactId>spring-boot-starter-test</artifactId>
    <scope>test</scope>
</dependency>
<dependency>
    <groupId>org.projectlombok</groupId>
    <artifactId>lombok</artifactId>
    <optional>true</optional>
</dependency>
<dependency>
    <groupId>org.springframework.boot</groupId>
    <artifactId>spring-boot-starter-data-redis</artifactId>
</dependency>
```

```java
package com.baili.antiduplicate.annotation;

import java.lang.annotation.*;

@Target(ElementType.METHOD)
@Retention(RetentionPolicy.RUNTIME)
@Documented
public @interface RepeatSubmit {
    // é‡å¤æ£€æµ‹æ–¹å¼æšä¸¾
    enum Type { PARAM, TOKEN }
    // ä»¥å“ªç§æ–¹å¼æ£€æµ‹æ˜¯å¦é‡å¤æäº¤
    Type limitType() default Type.PARAM;
    // æ—¶é—´èŒƒå›´å†…æ£€æµ‹æ˜¯å¦ä¸ºé‡å¤æäº¤
    long lockTime() default 5;
}
```

```java
package com.baili.antiduplicate.aspect;

import com.baili.antiduplicate.annotation.RepeatSubmit;
import io.micrometer.common.util.StringUtils;
import jakarta.annotation.Resource;
import jakarta.servlet.http.HttpServletRequest;
import lombok.extern.slf4j.Slf4j;
import org.aspectj.lang.ProceedingJoinPoint;
import org.aspectj.lang.annotation.Around;
import org.aspectj.lang.annotation.Aspect;
import org.aspectj.lang.annotation.Pointcut;
import org.aspectj.lang.reflect.MethodSignature;
import org.springframework.data.redis.core.StringRedisTemplate;
import org.springframework.stereotype.Component;
import org.springframework.util.DigestUtils;
import org.springframework.web.context.request.RequestContextHolder;
import org.springframework.web.context.request.ServletRequestAttributes;

import java.lang.reflect.Method;
import java.nio.charset.StandardCharsets;
import java.util.concurrent.TimeUnit;

@Aspect
@Slf4j
@Component
public class RepeatSubmitAspect {
    @Resource
    private StringRedisTemplate stringRedisTemplate;

    // åˆ‡ç‚¹
    @Pointcut(value = "@annotation(repeatSubmit)")
    public void pointCutNoRepeatSubmit(RepeatSubmit repeatSubmit) {

    }

    /**
     * ç¯ç»•é€šçŸ¥, å›´ç»•ç€æ–¹æ³•æ‰§è¡Œ
     * ä¸¤ç§æ–¹å¼
     * æ–¹å¼ä¸€ï¼šIP + å‚æ•° + ç±»å + æ–¹æ³•åé˜²é‡æäº¤
     * æ–¹å¼äºŒï¼štoken + url æ£€æµ‹æ˜¯å¦é‡å¤æäº¤
     */
    @Around(value = "pointCutNoRepeatSubmit(repeatSubmit)", argNames = "joinPoint,repeatSubmit")
    public Object around(ProceedingJoinPoint joinPoint, RepeatSubmit repeatSubmit) throws Throwable {

        HttpServletRequest request = ((ServletRequestAttributes) RequestContextHolder.getRequestAttributes()).getRequest();
        //é˜²é‡æäº¤ç±»å‹
        String type = repeatSubmit.limitType().name();
        String key = ":repeat_submit:";
        String url = request.getRequestURI();
        String ipAddress  = request.getRemoteAddr();
        if (type.equalsIgnoreCase(RepeatSubmit.Type.PARAM.name())) {
            //æ–¹å¼ä¸€ï¼Œå‚æ•° é˜²é‡æäº¤
            //åŸºäºIP ã€ç±»åã€æ–¹æ³•å å’Œ URL ç”Ÿæˆå”¯ä¸€key
            MethodSignature methodSignature = (MethodSignature) joinPoint.getSignature();
            Method method = methodSignature.getMethod();
            String className = method.getDeclaringClass().getName();
            key = key + String.format("%s-%s-%s-%s", ipAddress, url, className, method);
        } else {
            //æ–¹å¼äºŒï¼Œä»¤ç‰Œå½¢å¼é˜²é‡æäº¤
            //ä»è¯·æ±‚å¤´ä¸­è·å– tokenï¼Œå¦‚æœä¸å­˜åœ¨ï¼Œåˆ™æŠ›å‡ºå¼‚å¸¸
            String requestToken = request.getHeader("token");
            if (StringUtils.isBlank(requestToken)) {
                log.error("tokenä¸å­˜åœ¨ï¼Œéæ³•è¯·æ±‚");
                return "tokenä¸å­˜åœ¨ï¼Œéæ³•è¯·æ±‚";
            }
            key = key + String.format("%s-%s", requestToken, url);
        }
        key = DigestUtils.md5DigestAsHex(key.getBytes(StandardCharsets.UTF_8));
        if (Boolean.FALSE.equals(stringRedisTemplate.hasKey(key))) {
            stringRedisTemplate.opsForValue().setIfAbsent(key, "", repeatSubmit.lockTime(), TimeUnit.SECONDS);
            try {
                //æ­£å¸¸æ‰§è¡Œæ–¹æ³•å¹¶è¿”å›
                return joinPoint.proceed();
            } catch (Throwable throwable) {
                stringRedisTemplate.delete(key);
                log.error("å¤„ç†å¼‚å¸¸ï¼Œè¯·é‡è¯•ï¼");
                return "å¤„ç†å¼‚å¸¸ï¼Œè¯·é‡è¯•ï¼";
            }
        } else {
            // æŠ›å‡ºå¼‚å¸¸
            log.error("è¯·å‹¿é‡å¤æäº¤");
            return "è¯·å‹¿é‡å¤æäº¤";
        }
    }
}
```

```java
package com.baili.antiduplicate.config;

import org.springframework.context.annotation.Bean;
import org.springframework.context.annotation.Configuration;
import org.springframework.data.redis.connection.RedisConnectionFactory;
import org.springframework.data.redis.core.RedisTemplate;
import org.springframework.data.redis.serializer.GenericJackson2JsonRedisSerializer;
import org.springframework.data.redis.serializer.StringRedisSerializer;


/**
 * Redisç›¸å…³Beané…ç½®
 */
@Configuration
public class RedisConfig {
    @Bean
    public RedisTemplate<String, Object> redisTemplate(RedisConnectionFactory redisConnectionFactory) {
        RedisTemplate<String, Object> redisTemplate = new RedisTemplate<>();
        redisTemplate.setConnectionFactory(redisConnectionFactory);
        // è®¾ç½®é”®åºåˆ—åŒ–å™¨ä¸º StringRedisSerializerï¼Œæ‰€æœ‰çš„é”®éƒ½ä¼šè¢«åºåˆ—åŒ–ä¸ºå­—ç¬¦ä¸²
        redisTemplate.setKeySerializer(new StringRedisSerializer());
        // è®¾ç½®å€¼åºåˆ—åŒ–å™¨ä¸º GenericJackson2JsonRedisSerializerï¼Œæ‰€æœ‰çš„å€¼éƒ½ä¼šè¢«åºåˆ—åŒ–ä¸º JSON æ ¼å¼
        redisTemplate.setValueSerializer(new GenericJackson2JsonRedisSerializer());
        redisTemplate.afterPropertiesSet();
        return redisTemplate;
    }
}
```

```java
package com.baili.antiduplicate.controller;

import com.baili.antiduplicate.annotation.RepeatSubmit;
import org.springframework.web.bind.annotation.PostMapping;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RestController;

@RestController
@RequestMapping("/test")
public class TestController {

    @RepeatSubmit(limitType = RepeatSubmit.Type.TOKEN,lockTime = 10)
    @PostMapping("/saveCountInfo")
    public String saveCountInfo(String accountNo) {
        return "æµ‹è¯•OK" + accountNo;
    }
}
```

```yaml
spring:
  application:
    name: Anti-duplicate
  data:
    redis:
      host: 192.168.75.129
      port: 6379
      password:
```

# <font style="color:#ECAA04;background-color:#FFFFFF;">æ¥å£æ€§èƒ½ä¼˜åŒ–ç­–ç•¥</font>
![1726709386448-01c45850-44d2-422f-ae8b-89be7f2e01bb.png](./img/hATw4O-knQXenPBo/1726709386448-01c45850-44d2-422f-ae8b-89be7f2e01bb-243232.png)

# <font style="color:#ECAA04;background-color:#FFFFFF;">æ‰«ç ç™»å½•ç©¶ç«Ÿæ˜¯æ€ä¹ˆå›äº‹</font>
<font style="background-color:#FFFFFF;">æ‰«ç ç™»å½•è¯´åˆ°åº•å°±æ˜¯ä½¿ç”¨æ‰‹æœºç«¯çš„ token å…å»è¾“å…¥è´¦å·å¯†ç çš„è¿‡ç¨‹ã€‚å› æ­¤æˆ‘ä»¬æƒ³è¦äº†è§£æ‰«ç ç™»å½•å°±éœ€è¦ä»æ‰‹æœºç™»å½•å¼€å§‹ã€‚</font>

## <font style="color:black;background-color:#FFFFFF;">æ‰‹æœºç«¯å®Œæˆç™»å½•</font>
<font style="background-color:#FFFFFF;">æ‰‹æœºç«¯å¾ˆå®¹æ˜“ï¼Œæˆ‘ä»¬æœ€å¸¸å¹²çš„æ“ä½œã€‚</font>

## ![1730355789492-531b0fdd-3b33-42f5-afd7-c0f533f83b06.png](./img/hATw4O-knQXenPBo/1730355789492-531b0fdd-3b33-42f5-afd7-c0f533f83b06-928395.png)
## <font style="color:black;background-color:#FFFFFF;">PCç«¯å®Œæˆç™»å½•</font>
<font style="background-color:#FFFFFF;">ç±»ä¼¼æ‰‹æœºç«¯ï¼Œéƒ½æ˜¯è´¦å·å¯†ç ï¼Œåªæ˜¯å‡å°‘äº†è®¾å¤‡ä¿¡æ¯éƒ¨åˆ†ã€‚ï¼ˆæœ‰çš„ä¼šå¸¦ä¸Š mac åœ°å€ï¼Œæ”¶è´¹è½¯ä»¶ä¹‹ç±»çš„ï¼‰</font>

![1730355824526-edd1e507-9c4e-4df2-8dba-663daa872477.png](./img/hATw4O-knQXenPBo/1730355824526-edd1e507-9c4e-4df2-8dba-663daa872477-087223.png)

## <font style="color:black;background-color:#FFFFFF;">ç”ŸæˆäºŒç»´ç </font>
<font style="background-color:#FFFFFF;">æƒ³è¦æ‰«ç ç™»å½•å°±å…ˆéœ€è¦ç”Ÿæˆå¸¦æœ‰å½“å‰è®¾å¤‡ä¿¡æ¯çš„äºŒç»´ç ï¼Œä¸ç„¶æ— æ³•åŒºåˆ†è®¾å¤‡ã€‚åŒæ—¶ä¹Ÿéœ€è¦åšå¥½çŠ¶æ€å¤„ç†ï¼Œè¿‡æœŸå¤„ç†ï¼Œä¸èƒ½ä¸€ç›´å ç”¨å†…å­˜ã€‚</font>

![1730355844508-2358144d-4904-4404-84de-19cfb243c5c2.png](./img/hATw4O-knQXenPBo/1730355844508-2358144d-4904-4404-84de-19cfb243c5c2-356791.png)

## <font style="color:black;background-color:#FFFFFF;">æ‰‹æœºç«¯æ‰«ç ç™»å½•</font>
<font style="background-color:#FFFFFF;">äºŒç»´ç ç”Ÿæˆä¹‹åï¼Œå°±åˆ©ç”¨æ‰‹æœºç«¯çš„ token éªŒè¯ä¿¡æ¯ï¼Œå…¶å®å°±æ˜¯ç­‰åŒäºè¾“å…¥äº†è´¦å·å¯†ç ï¼Œç„¶åç”Ÿæˆä¸´æ—¶ Tokenï¼ˆä¿è¯ç¡®è®¤ç™»å½•æ—¶æ˜¯åŒä¸€ä¸ªè®¾å¤‡ï¼‰</font>

![1730355858330-7d3fd361-7111-45bb-8a02-b77ed455b0dc.png](./img/hATw4O-knQXenPBo/1730355858330-7d3fd361-7111-45bb-8a02-b77ed455b0dc-667380.png)

## <font style="color:black;background-color:#FFFFFF;">PCç«¯æ‰«ç ç™»å½•</font>
<font style="background-color:#FFFFFF;">æ‹¿ç€ä¸´æ—¶ Token åœ¨ç¡®è®¤ç™»å½•ï¼Œè¿™æ—¶å€™æ‰ä¼šç”Ÿæˆ Pc Tokenã€‚</font>

![1730355875557-8508b185-1e29-410e-9694-6a499ee4af2d.png](./img/hATw4O-knQXenPBo/1730355875557-8508b185-1e29-410e-9694-6a499ee4af2d-626452.png)

## <font style="color:black;background-color:#FFFFFF;">æ‰«ç ç™»å½•å®Œæ•´æµç¨‹</font>
![1730355891750-a8304e6c-2852-4f64-a31d-638d86c32e43.png](./img/hATw4O-knQXenPBo/1730355891750-a8304e6c-2852-4f64-a31d-638d86c32e43-046870.png)

## <font style="color:black;background-color:#FFFFFF;">PCç«¯è·å–äºŒç»´ç çŠ¶æ€</font>
![1730355906101-7382d36a-6d18-4a34-8130-0662767d0110.png](./img/hATw4O-knQXenPBo/1730355906101-7382d36a-6d18-4a34-8130-0662767d0110-566150.png)

## <font style="color:black;background-color:#FFFFFF;">äºŒç»´ç çŠ¶æ€</font>
+ <font style="color:black;background-color:#FFFFFF;">æœªæ‰«æï¼šæ— æ“ä½œ</font>
+ <font style="color:black;background-color:#FFFFFF;">å·²å¤±æ•ˆï¼šæç¤ºåˆ·æ–°äºŒç»´ç </font>
+ <font style="color:black;background-color:#FFFFFF;">å·²æˆåŠŸï¼šä»æœåŠ¡ç«¯è·å–PC token</font>

<font style="background-color:#FFFFFF;"></font>

# <font style="color:#ECAA04;background-color:#FFFFFF;">æ•°æ®åº“è¡¨çš„è¿æ¥æ–¹å¼ï¼Ÿ</font>
**<font style="background-color:#FFFFFF;">åœ¨å…³ç³»å‹æ•°æ®åº“ä¸­ï¼Œè¡¨ä¹‹é—´å¯ä»¥é€šè¿‡è¿æ¥ï¼ˆJOINï¼‰æ¥è¿›è¡Œå…³è”æŸ¥è¯¢ã€‚å¸¸è§çš„è¿æ¥æ–¹å¼æœ‰ä»¥ä¸‹å‡ ç§ï¼š</font>**

1. **<font style="color:#DF2A3F;background-color:#FFFFFF;">å†…è¿æ¥ï¼ˆINNER JOINï¼‰ï¼š</font>****<font style="color:#74B602;background-color:#FFFFFF;">å†…è¿æ¥</font>****<font style="background-color:#FFFFFF;">æ˜¯</font>****<font style="color:#117CEE;background-color:#FFFFFF;">æœ€å¸¸ç”¨çš„è¿æ¥æ–¹å¼</font>****<font style="background-color:#FFFFFF;">ï¼Œå®ƒè¿”å›ä¸¤ä¸ªè¡¨ä¸­åŒ¹é…çš„è¡Œã€‚åœ¨å†…è¿æ¥ä¸­ï¼Œåªæœ‰å½“</font>****<font style="color:#74B602;background-color:#FFFFFF;">å·¦è¡¨å’Œå³è¡¨</font>****<font style="background-color:#FFFFFF;">ä¸­</font>****<font style="color:#74B602;background-color:#FFFFFF;">éƒ½å­˜åœ¨åŒ¹é…çš„è¡Œ</font>****<font style="background-color:#FFFFFF;">æ—¶æ‰ä¼šè¿”å›ç»“æœã€‚</font>**

```plsql
SELECT *
FROM table1
INNER JOIN table2
ON table1.column = table2.column;
```

2. **<font style="color:#DF2A3F;background-color:#FFFFFF;">å·¦è¿æ¥ï¼ˆLEFT JOINï¼‰ï¼š</font>****<font style="background-color:#FFFFFF;">å·¦è¿æ¥è¿”å›</font>****<font style="color:#74B602;background-color:#FFFFFF;">å·¦è¡¨</font>****<font style="background-color:#FFFFFF;">ä¸­çš„</font>****<font style="color:#74B602;background-color:#FFFFFF;">æ‰€æœ‰è¡Œ</font>****<font style="background-color:#FFFFFF;">ï¼Œ</font>****<font style="color:#74B602;background-color:#FFFFFF;">ä»¥åŠ</font>****<font style="background-color:#FFFFFF;">ä¸å³è¡¨åŒ¹é…çš„è¡Œã€‚å¦‚æœå³è¡¨ä¸­æ²¡æœ‰åŒ¹é…çš„è¡Œï¼Œåˆ™è¿”å› NULL å€¼ã€‚</font>**

```plsql
SELECT *
FROM table1
LEFT JOIN table2
ON table1.column = table2.column;
```

3. **<font style="color:#DF2A3F;background-color:#FFFFFF;">å³è¿æ¥ï¼ˆRIGHT JOINï¼‰ï¼š</font>****<font style="background-color:#FFFFFF;">å³è¿æ¥è¿”å›</font>****<font style="color:#74B602;background-color:#FFFFFF;">å³è¡¨</font>****<font style="background-color:#FFFFFF;">ä¸­çš„</font>****<font style="color:#74B602;background-color:#FFFFFF;">æ‰€æœ‰è¡Œ</font>****<font style="background-color:#FFFFFF;">ï¼Œ</font>****<font style="color:#74B602;background-color:#FFFFFF;">ä»¥åŠ</font>****<font style="background-color:#FFFFFF;">ä¸å·¦è¡¨åŒ¹é…çš„è¡Œã€‚å¦‚æœå·¦è¡¨ä¸­æ²¡æœ‰åŒ¹é…çš„è¡Œï¼Œåˆ™è¿”å› NULL å€¼ã€‚</font>**

```plsql
SELECT *
FROM table1
RIGHT JOIN table2
ON table1.column = table2.column;
```

4. **<font style="color:#DF2A3F;background-color:#FFFFFF;">å…¨è¿æ¥ï¼ˆFULL OUTER JOINï¼‰ï¼š</font>****<font style="background-color:#FFFFFF;">å…¨è¿æ¥è¿”å›</font>****<font style="color:#74B602;background-color:#FFFFFF;">å·¦è¡¨å’Œå³è¡¨</font>****<font style="background-color:#FFFFFF;">ä¸­çš„</font>****<font style="color:#74B602;background-color:#FFFFFF;">æ‰€æœ‰è¡Œ</font>****<font style="background-color:#FFFFFF;">ï¼Œå¦‚æœæŸä¸ªè¡¨ä¸­æ²¡æœ‰åŒ¹é…çš„è¡Œï¼Œåˆ™è¿”å› NULL å€¼ã€‚</font>**

```plsql
SELECT *
FROM table1
FULL OUTER JOIN table2
ON table1.column = table2.column;
```

5. **<font style="color:#DF2A3F;background-color:#FFFFFF;">è‡ªè¿æ¥ï¼ˆSELF JOINï¼‰ï¼š</font>****<font style="background-color:#FFFFFF;">è‡ªè¿æ¥æ˜¯æŒ‡åœ¨</font>****<font style="color:#74B602;background-color:#FFFFFF;">åŒä¸€ä¸ªè¡¨</font>****<font style="background-color:#FFFFFF;">ä¸­</font>****<font style="color:#74B602;background-color:#FFFFFF;">è¿›è¡Œè¿æ¥</font>****<font style="background-color:#FFFFFF;">æ“ä½œï¼Œå¯ä»¥ç”¨äºæŸ¥æ‰¾è¡¨ä¸­æŸäº›æ•°æ®çš„å…³è”ä¿¡æ¯ã€‚</font>**

```plsql
SELECT *
FROM table1 t1
INNER JOIN table1 t2
ON t1.column = t2.column;
```

![1698322220728-53ae9d81-c9a9-4fee-8b48-8683f958d163.jpeg](./img/hATw4O-knQXenPBo/1698322220728-53ae9d81-c9a9-4fee-8b48-8683f958d163-281097.jpeg)

**<font style="background-color:#FFFFFF;">ä»¥ä¸Šæ˜¯å¸¸è§çš„æ•°æ®åº“è¡¨è¿æ¥æ–¹å¼ï¼Œä¸åŒçš„è¿æ¥æ–¹å¼å¯ä»¥æ ¹æ®å®é™…éœ€æ±‚é€‰æ‹©ä½¿ç”¨ã€‚</font>**

# <font style="color:#ECAA04;background-color:#FFFFFF;">æ•°æ®åº“ä¸‰å¤§èŒƒå¼æ˜¯ä»€ä¹ˆï¼Ÿ</font>
**<font style="background-color:#FFFFFF;">ä¸‰å¤§èŒƒå¼æ˜¯ Mysql æ•°æ®åº“</font>****<font style="color:#117CEE;background-color:#FFFFFF;">è®¾è®¡è¡¨ç»“æ„</font>****<font style="background-color:#FFFFFF;">æ‰€</font>****<font style="color:#74B602;background-color:#FFFFFF;">éµå¾ªçš„è§„èŒƒå’ŒæŒ‡å¯¼æ–¹æ³•</font>****<font style="background-color:#FFFFFF;">ï¼Œç›®çš„æ˜¯ä¸ºäº†</font>****<font style="color:#117CEE;background-color:#FFFFFF;">å‡å°‘å†—ä½™</font>****<font style="background-color:#FFFFFF;">ï¼Œå»ºç«‹</font>****<font style="color:#117CEE;background-color:#FFFFFF;">ç»“æ„åˆç†</font>****<font style="background-color:#FFFFFF;">çš„æ•°æ®åº“ï¼Œä»è€Œ</font>****<font style="color:#117CEE;background-color:#FFFFFF;">æé«˜</font>****<font style="background-color:#FFFFFF;">æ•°æ®å­˜å‚¨å’Œä½¿ç”¨çš„æ€§èƒ½ã€‚</font>**

**<font style="background-color:#FFFFFF;">ä¸‰å¤§èŒƒå¼ä¹‹é—´æ˜¯å…·æœ‰</font>****<font style="color:#117CEE;background-color:#FFFFFF;">ä¾èµ–å…³ç³»</font>****<font style="background-color:#FFFFFF;">çš„ï¼Œæ¯”å¦‚ç¬¬äºŒèŒƒå¼æ˜¯åœ¨ç¬¬ä¸€èŒƒå¼çš„åŸºç¡€ä¸Šå»ºè®¾çš„ã€ç¬¬ä¸‰èŒƒå¼æ˜¯åœ¨ç¬¬äºŒèŒƒå¼çš„åŸºç¡€ä¸Šå»ºè®¾çš„ã€‚</font>**

1. **<font style="color:#DF2A3F;background-color:#FFFFFF;">ç¬¬ä¸€èŒƒå¼ï¼ˆ1NFï¼‰ ï¼š</font>****<font style="background-color:#FFFFFF;">ç¬¬ä¸€èŒƒå¼æ˜¯æŒ‡æ•°æ®åº“è¡¨ä¸­çš„</font>****<font style="color:#74B602;background-color:#FFFFFF;">æ¯ä¸ªåˆ—</font>****<font style="background-color:#FFFFFF;">éƒ½</font>****<font style="color:#74B602;background-color:#FFFFFF;">å¿…é¡»æ˜¯åŸå­æ€§</font>****<font style="background-color:#FFFFFF;">çš„ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œæ¯ä¸ªåˆ—ä¸­çš„å€¼éƒ½</font>****<font style="color:#74B602;background-color:#FFFFFF;">ä¸èƒ½å†åˆ†è§£æˆæ›´å°çš„æ•°æ®é¡¹</font>****<font style="background-color:#FFFFFF;">ã€‚åŒæ—¶ï¼Œæ¯ä¸ªè¡¨å¿…é¡»æœ‰ä¸€ä¸ªä¸»é”®ï¼Œç”¨äºå”¯ä¸€æ ‡è¯†æ¯æ¡è®°å½•ã€‚</font>**

![1698221298417-ee8f1b3a-37e3-4037-aefe-8075e7d94b1c.jpeg](./img/hATw4O-knQXenPBo/1698221298417-ee8f1b3a-37e3-4037-aefe-8075e7d94b1c-662570.jpeg)

2. **<font style="color:#DF2A3F;background-color:#FFFFFF;">ç¬¬äºŒèŒƒå¼ï¼ˆ2NFï¼‰ ï¼š</font>****<font style="background-color:#FFFFFF;">ç¬¬äºŒèŒƒå¼æ˜¯æŒ‡è¡¨ä¸­çš„</font>****<font style="color:#74B602;background-color:#FFFFFF;">éä¸»é”®åˆ—</font>****<font style="background-color:#FFFFFF;">å¿…é¡»å®Œå…¨</font>****<font style="color:#74B602;background-color:#FFFFFF;">ä¾èµ–äºä¸»é”®</font>****<font style="background-color:#FFFFFF;">ï¼Œè€Œä¸æ˜¯ä¾èµ–äºä¸»é”®çš„ä¸€éƒ¨åˆ†ã€‚</font>****<font style="color:#74B602;background-color:#FFFFFF;">å¦‚æœæœ‰</font>****<font style="background-color:#FFFFFF;">éä¸»é”®åˆ—ä¾èµ–äºä¸»é”®çš„ä¸€éƒ¨åˆ†ï¼Œé‚£ä¹ˆå°±éœ€è¦å°†è¿™äº›åˆ—æ‹†åˆ†åˆ°å¦ä¸€ä¸ªè¡¨ä¸­ã€‚</font>**

![1698221316606-d638de91-4443-4962-b3b4-879249cc017a.jpeg](./img/hATw4O-knQXenPBo/1698221316606-d638de91-4443-4962-b3b4-879249cc017a-556200.jpeg)

3. **<font style="color:#DF2A3F;background-color:#FFFFFF;">ç¬¬ä¸‰èŒƒå¼ï¼ˆ3NFï¼‰ ï¼š</font>****<font style="background-color:#FFFFFF;">ç¬¬ä¸‰èŒƒå¼æ˜¯æŒ‡è¡¨ä¸­çš„</font>****<font style="color:#74B602;background-color:#FFFFFF;">éä¸»é”®åˆ—</font>****<font style="background-color:#FFFFFF;">ä¹‹é—´</font>****<font style="color:#74B602;background-color:#FFFFFF;">ä¸èƒ½å­˜åœ¨ä¼ é€’ä¾èµ–</font>****<font style="background-color:#FFFFFF;">å…³ç³»ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚æœAåˆ—ä¾èµ–äºBåˆ—ï¼ŒBåˆ—ä¾èµ–äºCåˆ—ï¼Œé‚£ä¹ˆAåˆ—å°±ä¸èƒ½ç›´æ¥ä¾èµ–äºCåˆ—ï¼Œè€Œæ˜¯åº”è¯¥å°†Aåˆ—æ‹†åˆ†åˆ°å¦ä¸€ä¸ªè¡¨ä¸­ã€‚</font>**

![1698221326380-4d9c10b2-de28-4d88-b33e-6b032750e7ce.jpeg](./img/hATw4O-knQXenPBo/1698221326380-4d9c10b2-de28-4d88-b33e-6b032750e7ce-557859.jpeg)

**<font style="background-color:#FFFFFF;">å½“ç„¶ Mysql æ•°æ®åº“çš„èŒƒå¼ä¸æ­¢ä¸‰å¤§èŒƒå¼ï¼Œé™¤äº†ä¸‰å¤§èŒƒå¼ï¼Œè¿˜æœ‰</font>****<font style="color:#DF2A3F;background-color:#FFFFFF;">å·´æ–¯-ç§‘å¾·èŒƒå¼</font>****<font style="background-color:#FFFFFF;">ï¼ˆBCNFï¼‰ã€</font>****<font style="color:#DF2A3F;background-color:#FFFFFF;">ç¬¬å››èŒƒå¼</font>****<font style="background-color:#FFFFFF;">(4NFï¼‰ã€</font>****<font style="color:#DF2A3F;background-color:#FFFFFF;">ç¬¬äº”èŒƒå¼</font>****<font style="background-color:#FFFFFF;">ï¼ˆ5NFï¼Œåˆç§°â€œå®Œç¾èŒƒå¼"ï¼‰ã€‚</font>**

**<font style="background-color:#FFFFFF;">è¿˜éœ€è¦æ³¨æ„å®é™…ä¸Šï¼Œäº’è”ç½‘å…¬å¸çš„è®¾è®¡ä¸€èˆ¬éƒ½æ˜¯åèŒƒå¼çš„ï¼Œé€šè¿‡å†—ä½™ä¸€äº›æ•°æ®ï¼Œé¿å…è·¨è¡¨è·¨åº“ï¼Œåˆ©ç”¨ç©ºé—´æ¢æ—¶é—´ï¼Œæé«˜æ€§èƒ½ã€‚</font>**

# <font style="color:#ECAA04;background-color:#FFFFFF;">varchar ä¸ char çš„åŒºåˆ«ï¼Ÿ</font>
**<font style="background-color:#FFFFFF;">åœ¨å…³ç³»å‹æ•°æ®åº“ä¸­ï¼ŒCHARå’ŒVARCHARæ˜¯</font>****<font style="color:#74B602;background-color:#FFFFFF;">ä¸¤ç§å¸¸ç”¨</font>****<font style="background-color:#FFFFFF;">çš„</font>****<font style="color:#74B602;background-color:#FFFFFF;">å­—ç¬¦ä¸²æ•°æ®ç±»å‹</font>****<font style="background-color:#FFFFFF;">ã€‚å®ƒä»¬çš„åŒºåˆ«ä¸»è¦åœ¨äº</font>****<font style="color:#117CEE;background-color:#FFFFFF;">å­˜å‚¨æ–¹å¼</font>****<font style="background-color:#FFFFFF;">ã€</font>****<font style="color:#117CEE;background-color:#FFFFFF;">å­˜å‚¨æ•ˆç‡</font>****<font style="background-color:#FFFFFF;">å’Œ</font>****<font style="color:#117CEE;background-color:#FFFFFF;">ä½¿ç”¨åœºæ™¯</font>****<font style="background-color:#FFFFFF;">ç­‰æ–¹é¢ã€‚</font>**

1. **<font style="color:#DF2A3F;background-color:#FFFFFF;">å­˜å‚¨æ–¹å¼ï¼š</font>**
    - **<font style="background-color:#FFFFFF;">CHARï¼ˆå®šé•¿å­—ç¬¦å‹ï¼‰ï¼š</font>****<font style="color:#74B602;background-color:#FFFFFF;">CHARç±»å‹</font>****<font style="background-color:#FFFFFF;">çš„åˆ—</font>****<font style="color:#74B602;background-color:#FFFFFF;">å­˜å‚¨å›ºå®šé•¿åº¦</font>****<font style="color:#000000;background-color:#FFFFFF;">çš„å­—ç¬¦ä¸²</font>****<font style="color:#74B602;background-color:#FFFFFF;"></font>****<font style="background-color:#FFFFFF;">ï¼Œ</font>****<font style="color:#74B602;background-color:#FFFFFF;">å¦‚æœ</font>****<font style="background-color:#FFFFFF;">å­˜å‚¨çš„å­—ç¬¦ä¸²é•¿åº¦</font>****<font style="color:#74B602;background-color:#FFFFFF;">å°äº</font>****<font style="background-color:#FFFFFF;">æŒ‡å®šé•¿åº¦ï¼Œåˆ™ä¼š</font>****<font style="color:#74B602;background-color:#FFFFFF;">ä½¿ç”¨ç©ºæ ¼</font>****<font style="background-color:#FFFFFF;">è¿›è¡Œ</font>****<font style="color:#74B602;background-color:#FFFFFF;">å¡«å……</font>****<font style="background-color:#FFFFFF;">ã€‚</font>**
    - **<font style="background-color:#FFFFFF;">VARCHARï¼ˆå¯å˜é•¿åº¦å­—ç¬¦å‹ï¼‰ï¼š</font>****<font style="color:#74B602;background-color:#FFFFFF;">VARCHARç±»å‹</font>****<font style="background-color:#FFFFFF;">çš„åˆ—å¯ä»¥</font>****<font style="color:#74B602;background-color:#FFFFFF;">å­˜å‚¨å¯å˜é•¿åº¦</font>****<font style="background-color:#FFFFFF;">çš„å­—ç¬¦ä¸²ï¼Œå®ƒåªå ç”¨</font>****<font style="color:#74B602;background-color:#FFFFFF;">å®é™…å­˜å‚¨çš„</font>****<font style="background-color:#FFFFFF;">å­—ç¬¦ä¸²</font>****<font style="color:#74B602;background-color:#FFFFFF;">é•¿åº¦åŠ ä¸Šé¢å¤–çš„å­—èŠ‚</font>****<font style="background-color:#FFFFFF;">ç”¨äº</font>****<font style="color:#74B602;background-color:#FFFFFF;">è®°å½•é•¿åº¦</font>****<font style="background-color:#FFFFFF;">ä¿¡æ¯ã€‚</font>**![1698232967418-92774748-ef02-44d2-86c8-ef74b52c92ee.png](./img/hATw4O-knQXenPBo/1698232967418-92774748-ef02-44d2-86c8-ef74b52c92ee-439725.png)
2. **<font style="color:#DF2A3F;background-color:#FFFFFF;">å­˜å‚¨æ•ˆç‡ï¼š</font>****<font style="color:#74B602;background-color:#FFFFFF;"></font>**
    - **<font style="background-color:#FFFFFF;">CHARï¼š</font>****<font style="color:#74B602;background-color:#FFFFFF;">CHARç±»å‹</font>****<font style="background-color:#FFFFFF;">éœ€è¦å ç”¨</font>****<font style="color:#74B602;background-color:#FFFFFF;">å›ºå®šçš„å­˜å‚¨</font>****<font style="background-color:#FFFFFF;">ç©ºé—´ï¼Œæ— è®ºå®é™…å­˜å‚¨çš„å­—ç¬¦ä¸²é•¿åº¦æ˜¯å¤šå°‘ï¼Œå®ƒçš„</font>****<font style="color:#74B602;background-color:#FFFFFF;">å­˜å‚¨æ•ˆç‡ç›¸å¯¹è¾ƒä½</font>****<font style="background-color:#FFFFFF;">ã€‚å½“å­˜å‚¨çš„å­—ç¬¦ä¸²é•¿åº¦å˜åŒ–è¾ƒå°æˆ–åŸºæœ¬ä¿æŒä¸€è‡´æ—¶ï¼ŒCHARç±»å‹å¯èƒ½ä¼šæµªè´¹ä¸€äº›å­˜å‚¨ç©ºé—´ã€‚</font>**
    - **<font style="background-color:#FFFFFF;">VARCHARï¼š</font>****<font style="color:#74B602;background-color:#FFFFFF;">VARCHARç±»å‹</font>****<font style="background-color:#FFFFFF;">åªå ç”¨</font>****<font style="color:#74B602;background-color:#FFFFFF;">å®é™…å­˜å‚¨</font>****<font style="background-color:#FFFFFF;">çš„å­—ç¬¦ä¸²æ‰€éœ€çš„ç©ºé—´ï¼Œå®ƒçš„</font>****<font style="color:#74B602;background-color:#FFFFFF;">å­˜å‚¨æ•ˆç‡ç›¸å¯¹è¾ƒé«˜</font>****<font style="background-color:#FFFFFF;">ã€‚å½“å­˜å‚¨çš„å­—ç¬¦ä¸²é•¿åº¦å˜åŒ–è¾ƒå¤§æˆ–ä¸ç¡®å®šæ—¶ï¼ŒVARCHARç±»å‹å¯ä»¥æ›´æœ‰æ•ˆåœ°åˆ©ç”¨å­˜å‚¨ç©ºé—´ã€‚</font>**
3. **<font style="color:#DF2A3F;background-color:#FFFFFF;">æŸ¥è¯¢æ•ˆç‡ï¼š</font>**
    - **<font style="color:#74B602;background-color:#FFFFFF;">CHAR</font>****<font style="background-color:#FFFFFF;">ç±»å‹çš„åˆ—åœ¨</font>****<font style="color:#74B602;background-color:#FFFFFF;">æœç´¢å’Œæ’åº</font>****<font style="background-color:#FFFFFF;">ç­‰æ“ä½œä¸Šå¯èƒ½</font>****<font style="color:#74B602;background-color:#FFFFFF;">ç•¥å¾®å¿«äºVARCHARç±»å‹</font>****<font style="background-color:#FFFFFF;">çš„åˆ—ï¼Œå› ä¸ºå®ƒæ˜¯å®šé•¿çš„ï¼Œæ— éœ€è€ƒè™‘å˜é•¿çš„æƒ…å†µã€‚</font>**
4. **<font style="color:#DF2A3F;background-color:#FFFFFF;">ä½¿ç”¨åœºæ™¯ï¼š</font>**
    - **<font style="color:#74B602;background-color:#FFFFFF;">CHAR</font>****<font style="background-color:#FFFFFF;">é€‚åˆ</font>****<font style="color:#74B602;background-color:#FFFFFF;">å­˜å‚¨é•¿åº¦å›ºå®š</font>****<font style="background-color:#FFFFFF;">çš„å­—ç¬¦ä¸²ï¼Œå¦‚å›½å®¶ä»£ç ã€æ€§åˆ«ç­‰ã€‚ç”±äºå­˜å‚¨ç©ºé—´æ˜¯å›ºå®šçš„ï¼Œå¯¹äºé•¿åº¦ä¸€è‡´çš„æ•°æ®ï¼ŒCHARå¯èƒ½æ›´é«˜æ•ˆã€‚</font>**
    - **<font style="color:#74B602;background-color:#FFFFFF;">VARCHAR</font>****<font style="background-color:#FFFFFF;">é€‚åˆ</font>****<font style="color:#74B602;background-color:#FFFFFF;">å­˜å‚¨é•¿åº¦å¯å˜</font>****<font style="background-color:#FFFFFF;">çš„å­—ç¬¦ä¸²ï¼Œå¦‚ç”¨æˆ·è¾“å…¥çš„æ–‡æœ¬ã€è¯„è®ºç­‰ã€‚å®ƒå¯ä»¥çµæ´»åœ°æ ¹æ®å®é™…éœ€è¦è°ƒæ•´å­˜å‚¨ç©ºé—´ã€‚</font>**

**<font style="background-color:#FFFFFF;">æ€»ç»“ï¼š</font>**

**<font style="background-color:#FFFFFF;">å¦‚æœå­—ç¬¦ä¸²</font>****<font style="color:#74B602;background-color:#FFFFFF;">é•¿åº¦ä¸ç¡®å®šæˆ–å˜åŒ–è¾ƒ</font>****<font style="background-color:#FFFFFF;">å¤§ï¼Œä¸€èˆ¬å»ºè®®</font>****<font style="color:#74B602;background-color:#FFFFFF;">ä½¿ç”¨VARCHAR</font>****<font style="background-color:#FFFFFF;">ç±»å‹ï¼›</font>**

**<font style="background-color:#FFFFFF;">å¦‚æœå­—ç¬¦ä¸²</font>****<font style="color:#74B602;background-color:#FFFFFF;">é•¿åº¦å›ºå®š</font>****<font style="background-color:#FFFFFF;">ä¸”ä¸€è‡´ï¼Œå¯ä»¥è€ƒè™‘</font>****<font style="color:#74B602;background-color:#FFFFFF;">ä½¿ç”¨CHAR</font>****<font style="background-color:#FFFFFF;">ç±»å‹ä»¥èŠ‚çœå­˜å‚¨ç©ºé—´ã€‚</font>**

**<font style="background-color:#FFFFFF;">åŒæ—¶ï¼Œéœ€è¦æ³¨æ„CHARç±»å‹åœ¨å­˜å‚¨ç©ºé—´ä¸Šçš„æµªè´¹ï¼Œä»¥åŠVARCHARç±»å‹åœ¨æŸ¥è¯¢æ•ˆç‡ä¸Šçš„åŠ£åŠ¿ã€‚</font>**

# <font style="color:#ECAA04;background-color:#FFFFFF;">DATETIME å’Œ TIMESTAMP</font>
**<font style="background-color:#FFFFFF;">MySQL ä¸­</font>****<font style="color:#117CEE;background-color:#FFFFFF;">å¸¸ç”¨çš„ä¸¤ç§æ—¶é—´å‚¨å­˜ç±»å‹</font>****<font style="background-color:#FFFFFF;">åˆ†åˆ«æ˜¯datetimeå’Œ timestampã€‚å¦‚ä½•åœ¨å®ƒä»¬ä¹‹é—´é€‰æ‹©æ˜¯</font>****<font style="color:#74B602;background-color:#FFFFFF;">å»ºè¡¨æ—¶å¿…è¦çš„è€ƒè™‘</font>****<font style="background-color:#FFFFFF;">ã€‚ä¸‹é¢å°±è°ˆè°ˆä»–ä»¬çš„åŒºåˆ«å’Œæ€ä¹ˆé€‰æ‹©ï¼š</font>**

**<font style="color:#DF2A3F;background-color:#FFFFFF;">ç›¸åŒç‚¹ï¼š</font>**

        1. **<font style="background-color:#FFFFFF;">ä¸¤ä¸ªæ•°æ®ç±»å‹å­˜å‚¨</font>****<font style="color:#74B602;background-color:#FFFFFF;">æ—¶é—´</font>****<font style="background-color:#FFFFFF;">çš„è¡¨ç°</font>****<font style="color:#74B602;background-color:#FFFFFF;">æ ¼å¼ä¸€è‡´</font>****<font style="background-color:#FFFFFF;">ã€‚å‡ä¸º </font>****<font style="color:#74B602;background-color:#FFFFFF;">YYYY-MM-DD HH:MM:SS</font>**
        2. **<font style="background-color:#FFFFFF;">ä¸¤ä¸ªæ•°æ®ç±»å‹</font>****<font style="color:#74B602;background-color:#FFFFFF;">éƒ½åŒ…å«ã€Œæ—¥æœŸã€å’Œã€Œæ—¶é—´ã€éƒ¨åˆ†</font>****<font style="background-color:#FFFFFF;">ã€‚</font>**
        3. **<font style="background-color:#FFFFFF;">ä¸¤ä¸ªæ•°æ®ç±»å‹éƒ½å¯ä»¥å­˜å‚¨å¾®ç§’çš„å°æ•°ç§’ï¼ˆç§’å6ä½å°æ•°ç§’ï¼‰</font>**

**<font style="color:#DF2A3F;background-color:#FFFFFF;">ä¸åŒç‚¹ï¼š</font>**

    1. **<font style="color:#117CEE;background-color:#FFFFFF;">æ—¥æœŸè¡¨ç¤ºèŒƒå›´ï¼š</font>**
            + **<font style="color:#74B602;background-color:#FFFFFF;">DATETIME</font>****<font style="background-color:#FFFFFF;"> çš„æ—¥æœŸèŒƒå›´æ˜¯ 1000-01-01 00:00:00.000000 åˆ° 9999-12-31 23:59:59.999999ï¼›</font>**
            + **<font style="color:#BA9BF2;background-color:#FFFFFF;">TIMESTAMP </font>****<font style="background-color:#FFFFFF;">çš„æ—¶é—´èŒƒå›´æ˜¯1970-01-01 00:00:01.000000 UTC åˆ° 2038-01-limit09 03:14:07.999999 UTCï¼Œä¼šé‡åˆ°</font>****<font style="color:#BA9BF2;background-color:#FFFFFF;">åƒç¦§å¹´é—®é¢˜</font>**
    2. **<font style="color:#117CEE;background-color:#FFFFFF;">å­˜å‚¨ç©ºé—´å ç”¨ï¼š</font>****<font style="color:#74B602;background-color:#FFFFFF;">DATETIME</font>****<font style="background-color:#FFFFFF;"> çš„å­˜å‚¨ç©ºé—´ä¸º</font>****<font style="color:#74B602;background-color:#FFFFFF;"> 8 å­—èŠ‚</font>****<font style="background-color:#FFFFFF;">ï¼›</font>****<font style="color:#BA9BF2;background-color:#FFFFFF;">TIMESTAMP</font>****<font style="background-color:#FFFFFF;"> çš„å­˜å‚¨ç©ºé—´ä¸º </font>****<font style="color:#BA9BF2;background-color:#FFFFFF;">4 å­—èŠ‚</font>**
    3. **<font style="color:#117CEE;background-color:#FFFFFF;">æ—¶åŒºç›¸å…³ï¼š</font>****<font style="color:#74B602;background-color:#FFFFFF;">DATETIME</font>****<font style="background-color:#FFFFFF;"> å­˜å‚¨æ—¶é—´</font>****<font style="color:#74B602;background-color:#FFFFFF;">ä¸æ—¶åŒºæ— å…³</font>****<font style="background-color:#FFFFFF;">ï¼›</font>****<font style="color:#BA9BF2;background-color:#FFFFFF;">TIMESTAMP</font>****<font style="background-color:#FFFFFF;"> å­˜å‚¨æ—¶é—´</font>****<font style="color:#BA9BF2;background-color:#FFFFFF;">ä¸æ—¶åŒºæœ‰å…³</font>****<font style="background-color:#FFFFFF;">ï¼Œæ˜¾ç¤ºçš„å€¼ä¹Ÿ</font>****<font style="color:#BA9BF2;background-color:#FFFFFF;">ä¾èµ–äºæ—¶åŒºï¼Œ</font>****<font style="color:#DF2A3F;background-color:#FFFFFF;">ä¼šè‡ªåŠ¨è½¬ä¸º UTC è¿›è¡Œå­˜å‚¨</font>****<font style="color:#BA9BF2;background-color:#FFFFFF;">ï¼Œ</font>****<font style="color:#DF2A3F;background-color:#FFFFFF;">è¿™ä¸ªè¿‡ç¨‹ä¼šè°ƒç”¨åº•å±‚å‡½æ•°åŠ é”è¿›è¡Œè½¬æ¢</font>**
    4. **<font style="color:#117CEE;background-color:#FFFFFF;">é»˜è®¤å€¼ï¼š</font>****<font style="color:#74B602;background-color:#FFFFFF;">DATETIME</font>****<font style="background-color:#FFFFFF;"> çš„</font>****<font style="color:#74B602;background-color:#FFFFFF;">é»˜è®¤å€¼ä¸º null</font>****<font style="background-color:#FFFFFF;">ï¼›</font>****<font style="color:#BA9BF2;background-color:#FFFFFF;">TIMESTAMP</font>****<font style="background-color:#FFFFFF;"> çš„å­—æ®µ</font>****<font style="color:#BA9BF2;background-color:#FFFFFF;">é»˜è®¤ä¸ä¸ºç©º</font>****<font style="background-color:#FFFFFF;">(not null)ï¼Œé»˜è®¤å€¼</font>****<font style="color:#BA9BF2;background-color:#FFFFFF;">ä¸ºå½“å‰æ—¶é—´</font>****<font style="background-color:#FFFFFF;">(CURRENT_TIMESTAMP/now())</font>**

**<font style="background-color:#FFFFFF;">é€‰æ‹©DATETIMEè¿˜æ˜¯TIMESTAMPæ—¶ï¼Œå¯ä»¥è€ƒè™‘ä»¥ä¸‹å› ç´ ï¼š</font>**

+ **<font style="color:#117CEE;background-color:#FFFFFF;">åŠŸèƒ½éœ€æ±‚ï¼š</font>****<font style="background-color:#FFFFFF;">å¦‚æœä½ éœ€è¦å­˜å‚¨</font>****<font style="color:#74B602;background-color:#FFFFFF;">ä¸å—æ—¶åŒºå½±å“</font>****<font style="background-color:#FFFFFF;">çš„æ—¥æœŸå’Œæ—¶é—´ä¿¡æ¯ï¼Œ</font>****<font style="color:#74B602;background-color:#FFFFFF;">ä½¿ç”¨DATETIME</font>****<font style="background-color:#FFFFFF;">ç±»å‹æ›´ä¸ºåˆé€‚ã€‚</font>**

**<font style="background-color:#FFFFFF;">å¦‚æœéœ€è¦å­˜å‚¨</font>****<font style="color:#74B602;background-color:#FFFFFF;">ä¸æ—¶åŒºç›¸å…³</font>****<font style="background-color:#FFFFFF;">çš„ä¿¡æ¯ï¼Œå¹¶å¸Œæœ›è‡ªåŠ¨è¿›è¡Œæ—¶åŒºè½¬æ¢å’Œæ›´æ–°ï¼Œ</font>****<font style="color:#74B602;background-color:#FFFFFF;">ä½¿ç”¨TIMESTAMP</font>****<font style="background-color:#FFFFFF;">ç±»å‹æ›´ä¸ºé€‚åˆã€‚</font>**

+ **<font style="color:#117CEE;background-color:#FFFFFF;">å­˜å‚¨ç©ºé—´ï¼š</font>****<font style="color:#74B602;background-color:#FFFFFF;">TIMESTAMP</font>****<font style="background-color:#FFFFFF;">ç±»å‹é€šå¸¸å </font>****<font style="color:#74B602;background-color:#FFFFFF;">ç”¨è¾ƒå°‘</font>****<font style="background-color:#FFFFFF;">çš„å­˜å‚¨</font>****<font style="color:#74B602;background-color:#FFFFFF;">ç©ºé—´</font>****<font style="background-color:#FFFFFF;">ï¼Œå› ä¸ºå®ƒåªå­˜å‚¨ä»'1970-01-01 00:00:01'ä»¥æ¥çš„ç§’æ•°ã€‚è€Œ</font>****<font style="color:#74B602;background-color:#FFFFFF;">DATETIME</font>****<font style="background-color:#FFFFFF;">ç±»å‹</font>****<font style="color:#74B602;background-color:#FFFFFF;">å­˜å‚¨</font>****<font style="background-color:#FFFFFF;">äº†ä¸€ä¸ª</font>****<font style="color:#74B602;background-color:#FFFFFF;">å›ºå®šé•¿åº¦</font>****<font style="background-color:#FFFFFF;">çš„æ—¥æœŸå’Œæ—¶é—´å­—ç¬¦ä¸²ã€‚</font>**

# <font style="color:#ECAA04;background-color:#FFFFFF;">MySQL ä¸­ in å’Œ exists çš„åŒºåˆ«ï¼Ÿ</font>
**<font style="background-color:#FFFFFF;">åœ¨ MySQL ä¸­ï¼Œ</font>****<font style="color:#74B602;background-color:#FFFFFF;">INå…³é”®å­—</font>****<font style="background-color:#FFFFFF;">ç”¨äºåœ¨</font>****<font style="color:#74B602;background-color:#FFFFFF;">ä¸€ä¸ªå­—æ®µ</font>****<font style="background-color:#FFFFFF;">ä¸­</font>****<font style="color:#74B602;background-color:#FFFFFF;">åŒ¹é…å¤šä¸ªå€¼</font>****<font style="background-color:#FFFFFF;">ã€‚å®ƒçš„è¯­æ³•å¦‚ä¸‹ï¼š</font>**

```plsql
SELECT column_name(s)
FROM table_name
WHERE column_name IN (value1, value2, ...);
```

**<font style="color:#74B602;background-color:#FFFFFF;">EXISTSå…³é”®å­—</font>****<font style="background-color:#FFFFFF;">ç”¨äº</font>****<font style="color:#74B602;background-color:#FFFFFF;">æ£€æŸ¥å­æŸ¥è¯¢</font>****<font style="background-color:#FFFFFF;">çš„</font>****<font style="color:#74B602;background-color:#FFFFFF;">ç»“æœæ˜¯å¦ä¸ºç©º</font>****<font style="background-color:#FFFFFF;">ã€‚å®ƒçš„è¯­æ³•å¦‚ä¸‹ï¼š</font>**

```plsql
SELECT column_name(s)
FROM table_name
WHERE EXISTS (subquery);
```

**<font style="color:#DF2A3F;background-color:#FFFFFF;">åŒºåˆ«ï¼š</font>**

**<font style="background-color:#FFFFFF;">MySQL ä¸­çš„ </font>****<font style="color:#74B602;background-color:#FFFFFF;">in è¯­å¥</font>****<font style="background-color:#FFFFFF;">æ˜¯æŠŠ</font>****<font style="color:#74B602;background-color:#FFFFFF;">å¤–è¡¨å’Œå†…è¡¨ä½œ hash è¿æ¥</font>****<font style="background-color:#FFFFFF;">ï¼Œè€Œ </font>****<font style="color:#74B602;background-color:#FFFFFF;">exists è¯­å¥</font>****<font style="background-color:#FFFFFF;">æ˜¯</font>****<font style="color:#74B602;background-color:#FFFFFF;">å¯¹å¤–è¡¨ä½œ loop å¾ªç¯</font>****<font style="background-color:#FFFFFF;">ï¼Œæ¯æ¬¡ loop å¾ªç¯å†å¯¹å†…è¡¨è¿›è¡ŒæŸ¥è¯¢ã€‚</font>**

**<font style="background-color:#FFFFFF;">å•çº¯çš„ç†è§£ exists æ¯” in è¯­å¥çš„</font>****<font style="color:#117CEE;background-color:#FFFFFF;">æ•ˆç‡è¦é«˜çš„è¯´æ³•</font>****<font style="color:#000000;background-color:#FFFFFF;">å…¶å®æ˜¯ä¸å‡†ç¡®çš„</font>****<font style="background-color:#FFFFFF;">ï¼Œè¦åŒºåˆ†æƒ…æ™¯ï¼š</font>**

1. **<font style="background-color:#FFFFFF;">å¦‚æœæŸ¥è¯¢çš„</font>****<font style="color:#74B602;background-color:#FFFFFF;">ä¸¤ä¸ªè¡¨å¤§å°ç›¸å½“</font>****<font style="background-color:#FFFFFF;">ï¼Œé‚£ä¹ˆç”¨</font>****<font style="color:#74B602;background-color:#FFFFFF;"> </font>****<font style="color:#000000;background-color:#FFFFFF;">in å’Œ exists </font>****<font style="color:#74B602;background-color:#FFFFFF;">å·®åˆ«ä¸å¤§</font>****<font style="background-color:#FFFFFF;">ã€‚</font>**
2. **<font style="background-color:#FFFFFF;">å¦‚æœä¸¤ä¸ªè¡¨ä¸­ä¸€ä¸ªè¾ƒå°ï¼Œä¸€ä¸ªæ˜¯å¤§è¡¨ï¼Œåˆ™</font>****<font style="color:#74B602;background-color:#FFFFFF;">å­æŸ¥è¯¢è¡¨å¤§</font>****<font style="color:#000000;background-color:#FFFFFF;">çš„</font>****<font style="color:#74B602;background-color:#FFFFFF;">ç”¨ exists</font>****<font style="background-color:#FFFFFF;">ï¼Œ</font>****<font style="color:#74B602;background-color:#FFFFFF;">å­æŸ¥è¯¢è¡¨å°</font>****<font style="color:#000000;background-color:#FFFFFF;">çš„</font>****<font style="color:#74B602;background-color:#FFFFFF;">ç”¨ in</font>****<font style="background-color:#FFFFFF;">ã€‚</font>**
3. **<font style="color:#DF2A3F;background-color:#FFFFFF;">not in å’Œ not existsï¼š</font>****<font style="color:#117CEE;background-color:#FFFFFF;"></font>**
    - **<font style="background-color:#FFFFFF;">å¦‚æœæŸ¥è¯¢è¯­å¥ä½¿ç”¨äº† not inï¼Œé‚£ä¹ˆå†…å¤–è¡¨éƒ½è¿›è¡Œå…¨è¡¨æ‰«æï¼Œæ²¡æœ‰ç”¨åˆ°ç´¢å¼•ï¼›</font>**
    - **<font style="background-color:#FFFFFF;">è€Œ not extsts çš„å­æŸ¥è¯¢ä¾ç„¶èƒ½ç”¨åˆ°è¡¨ä¸Šçš„ç´¢å¼•ã€‚æ‰€ä»¥æ— è®ºé‚£ä¸ªè¡¨å¤§ï¼Œç”¨ not exists éƒ½æ¯” not in è¦å¿«ã€‚</font>**

# <font style="color:#ECAA04;background-color:#FFFFFF;">ç®€è¿°ç´¢å¼•çš„åŸºæœ¬åŸç†</font>
**<font style="color:#74B602;background-color:#FFFFFF;">ç´¢å¼•</font>****<font style="color:#000000;background-color:#FFFFFF;">æ˜¯æ•°æ®åº“ä¸­</font>****<font style="color:#74B602;background-color:#FFFFFF;">ç”¨äºåŠ é€Ÿæ•°æ®è®¿é—®</font>****<font style="color:#000000;background-color:#FFFFFF;">çš„ä¸€ç§æ•°æ®ç»“æ„ï¼Œå…¶åŸºæœ¬åŸç†æ˜¯</font>****<font style="color:#74B602;background-color:#FFFFFF;">é€šè¿‡</font>****<font style="color:#000000;background-color:#FFFFFF;">åˆ›å»º</font>****<font style="color:#74B602;background-color:#FFFFFF;">é¢å¤–çš„æ•°æ®ç»“æ„</font>****<font style="color:#000000;background-color:#FFFFFF;">æ¥ä½¿å¾—å¯¹æ•°æ®çš„è®¿é—®æ›´åŠ å¿«é€Ÿå’Œé«˜æ•ˆã€‚</font>**

**<font style="color:#000000;background-color:#FFFFFF;">åœ¨å…³ç³»å‹æ•°æ®åº“ä¸­ï¼Œé€šå¸¸ä½¿ç”¨B-Treeæˆ–å“ˆå¸Œè¡¨ç­‰ç´¢å¼•ç»“æ„ã€‚</font>**

+ **<font style="color:#117CEE;background-color:#FFFFFF;">B-Treeç´¢å¼•</font>****<font style="color:#000000;background-color:#FFFFFF;">æ˜¯ä¸€ç§</font>****<font style="color:#74B602;background-color:#FFFFFF;">å¹³è¡¡æ ‘</font>****<font style="color:#000000;background-color:#FFFFFF;">ï¼Œå¯ä»¥</font>****<font style="color:#74B602;background-color:#FFFFFF;">é«˜æ•ˆ</font>****<font style="color:#000000;background-color:#FFFFFF;">åœ°æ”¯æŒ</font>****<font style="color:#74B602;background-color:#FFFFFF;">èŒƒå›´æŸ¥æ‰¾å’Œé¡ºåºæŸ¥æ‰¾</font>****<font style="color:#000000;background-color:#FFFFFF;">ï¼Œé€‚åˆäºæœ‰åºæ•°æ®çš„å­˜å‚¨ï¼›</font>**
+ **<font style="color:#000000;background-color:#FFFFFF;">è€Œ</font>****<font style="color:#117CEE;background-color:#FFFFFF;">å“ˆå¸Œè¡¨ç´¢å¼•</font>****<font style="color:#000000;background-color:#FFFFFF;">åˆ™å¯ä»¥å®ç°O(1)çš„æŸ¥æ‰¾æ•ˆç‡ï¼Œä½†å¯¹äºèŒƒå›´æŸ¥è¯¢è¾ƒä¸ºå›°éš¾ã€‚</font>**

**<font style="color:#000000;background-color:#FFFFFF;">åœ¨</font>****<font style="color:#DF2A3F;background-color:#FFFFFF;">å»ºç«‹ç´¢å¼•</font>****<font style="color:#000000;background-color:#FFFFFF;">æ—¶ï¼Œéœ€è¦</font>****<font style="color:#74B602;background-color:#FFFFFF;">è€ƒè™‘</font>****<font style="color:#000000;background-color:#FFFFFF;">ç´¢å¼•çš„</font>****<font style="color:#74B602;background-color:#FFFFFF;">é€‰æ‹©æ€§</font>****<font style="color:#000000;background-color:#FFFFFF;">ï¼Œå³ä¸åŒç´¢å¼•å€¼æ•°é‡ä¸æ€»è®°å½•æ•°ä¹‹æ¯”ã€‚</font>****<font style="color:#74B602;background-color:#FFFFFF;">é€‰æ‹©æ€§é«˜</font>****<font style="color:#000000;background-color:#FFFFFF;">(åŒºåˆ†åº¦é«˜)çš„ç´¢å¼•æ›´æœ‰åˆ©äº</font>****<font style="color:#74B602;background-color:#FFFFFF;">æé«˜æŸ¥è¯¢æ•ˆç‡</font>****<font style="color:#000000;background-color:#FFFFFF;">ï¼Œå› ä¸ºå®ƒå¯ä»¥å‡å°‘éœ€è¦æ‰«æçš„æ•°æ®é‡ã€‚ä½†åŒæ—¶ä¹Ÿéœ€è¦æ³¨æ„ç´¢å¼•çš„å­˜å‚¨ç©ºé—´å’Œæ›´æ–°ä»£ä»·ç­‰é—®é¢˜ï¼Œ</font>****<font style="color:#DF2A3F;background-color:#FFFFFF;">è¿‡å¤šçš„ç´¢å¼•</font>****<font style="color:#000000;background-color:#FFFFFF;">ä¼šå¯¼è‡´</font>****<font style="color:#74B602;background-color:#FFFFFF;">èµ„æºæµªè´¹</font>****<font style="color:#000000;background-color:#FFFFFF;">å’Œç»´æŠ¤</font>****<font style="color:#74B602;background-color:#FFFFFF;">æˆæœ¬å¢åŠ </font>****<font style="color:#000000;background-color:#FFFFFF;">ã€‚</font>**

**<font style="color:#000000;background-color:#FFFFFF;">æ­¤å¤–ï¼Œç´¢å¼•è¿˜éœ€è¦æ³¨æ„åˆç†åœ°</font>****<font style="color:#74B602;background-color:#FFFFFF;">ä½¿ç”¨ç´¢å¼•è¦†ç›–</font>****<font style="color:#000000;background-color:#FFFFFF;">ï¼Œå³å°½å¯èƒ½åœ°ä½¿ç”¨ç´¢å¼•åˆ—æ¥å®ŒæˆæŸ¥è¯¢æ“ä½œï¼Œé¿å…å¯¹åº•å±‚æ•°æ®è¿›è¡Œé¢å¤–çš„è¯»å–ï¼Œä»è€Œæé«˜æŸ¥è¯¢æ•ˆç‡ã€‚</font>**

# <font style="color:#ECAA04;background-color:#FFFFFF;">ä¸ºä»€ä¹ˆMysqlä½¿ç”¨B+æ ‘ç´¢å¼•ï¼Ÿ</font>
**<font style="color:#DF2A3F;background-color:#FFFFFF;">Bæ ‘</font>****<font style="color:#000000;background-color:#FFFFFF;">æ˜¯ä¸€ç§</font>****<font style="color:#DF2A3F;background-color:#FFFFFF;">è‡ªå¹³è¡¡çš„å¤šè·¯æœç´¢æ ‘</font>****<font style="color:#000000;background-color:#FFFFFF;">ã€‚</font>**

+ **<font style="color:#74B602;background-color:#FFFFFF;">æ¯ä¸ªèŠ‚ç‚¹</font>****<font style="color:#000000;background-color:#FFFFFF;">å¯ä»¥åŒ…å«</font>****<font style="color:#74B602;background-color:#FFFFFF;">å¤šä¸ªå…³é”®å­—å’Œå¯¹åº”çš„æŒ‡é’ˆ</font>****<font style="color:#000000;background-color:#FFFFFF;">ï¼Œå³Bæ ‘çš„æ¯ä¸ªèŠ‚ç‚¹éƒ½ä¼šå­˜å‚¨æ•°æ®ã€‚</font>**
+ **<font style="color:#000000;background-color:#FFFFFF;">Bæ ‘çš„å¶å­èŠ‚ç‚¹ä¹‹é—´æ˜¯</font>****<font style="color:#74B602;background-color:#FFFFFF;">æ— æŒ‡é’ˆç›¸è¿æ¥</font>****<font style="color:#000000;background-color:#FFFFFF;">çš„ã€‚</font>**

![1698751850045-cb34af82-8aa5-413b-9c21-d61824936f1f.png](./img/hATw4O-knQXenPBo/1698751850045-cb34af82-8aa5-413b-9c21-d61824936f1f-589125.png)

**<font style="color:#DF2A3F;background-color:#FFFFFF;">B+æ ‘</font>****<font style="color:#000000;background-color:#FFFFFF;">ä¹Ÿæ˜¯ä¸€ç§</font>****<font style="color:#DF2A3F;background-color:#FFFFFF;">è‡ªå¹³è¡¡çš„å¤šè·¯æœç´¢æ ‘</font>****<font style="color:#000000;background-color:#FFFFFF;">ã€‚</font>**

+ **<font style="color:#000000;background-color:#FFFFFF;">ä¸Bæ ‘ç±»ä¼¼ï¼Œä½†åœ¨B+æ ‘ä¸­ï¼Œæ‰€æœ‰å…³é”®å­—éƒ½å­˜å‚¨åœ¨å¶å­èŠ‚ç‚¹ä¸Šï¼Œéå¶å­èŠ‚ç‚¹åªå­˜å‚¨ç´¢å¼•åˆ—å’ŒæŒ‡å‘å­èŠ‚ç‚¹çš„æŒ‡é’ˆã€‚</font>**
+ **<font style="color:#74B602;background-color:#FFFFFF;">å¶å­èŠ‚ç‚¹</font>****<font style="color:#000000;background-color:#FFFFFF;">é€šè¿‡</font>****<font style="color:#74B602;background-color:#FFFFFF;">æŒ‡é’ˆè¿æ¥</font>****<font style="color:#000000;background-color:#FFFFFF;">èµ·æ¥ï¼Œ</font>****<font style="color:#74B602;background-color:#FFFFFF;">å½¢æˆ</font>****<font style="color:#000000;background-color:#FFFFFF;">ä¸€ä¸ª</font>****<font style="color:#74B602;background-color:#FFFFFF;">æœ‰åºçš„é“¾è¡¨</font>****<font style="color:#000000;background-color:#FFFFFF;">ï¼Œå¯ä»¥</font>****<font style="color:#74B602;background-color:#FFFFFF;">æ”¯æŒé¡ºåºè®¿é—®</font>****<font style="color:#000000;background-color:#FFFFFF;">å’Œ</font>****<font style="color:#74B602;background-color:#FFFFFF;">èŒƒå›´æŸ¥è¯¢</font>****<font style="color:#000000;background-color:#FFFFFF;">ã€‚</font>**

![1698751866375-4c90f949-21b5-40e7-bf06-f1ceb42d8928.png](./img/hATw4O-knQXenPBo/1698751866375-4c90f949-21b5-40e7-bf06-f1ceb42d8928-890793.png)

**<font style="color:#DF2A3F;background-color:#FFFFFF;">Mysqlä½¿ç”¨B+æ ‘ä½œä¸ºå…¶ç´¢å¼•ç»“æ„çš„ä¸»è¦åŸå› </font>****<font style="color:#000000;background-color:#FFFFFF;">æœ‰ä»¥ä¸‹å‡ ç‚¹ï¼š</font>**

+ **<font style="color:#117CEE;background-color:#FFFFFF;">èŒƒå›´æŸ¥è¯¢æ•ˆç‡é«˜ï¼š</font>****<font style="color:#000000;background-color:#FFFFFF;">ç”±äºB+æ ‘çš„å¶å­èŠ‚ç‚¹å½¢æˆ</font>****<font style="color:#74B602;background-color:#FFFFFF;">æœ‰åºé“¾è¡¨</font>****<font style="color:#000000;background-color:#FFFFFF;">ï¼Œæ”¯æŒ</font>****<font style="color:#74B602;background-color:#FFFFFF;">èŒƒå›´æŸ¥è¯¢éå¸¸é«˜æ•ˆ</font>****<font style="color:#000000;background-color:#FFFFFF;">ã€‚å¯¹äºæ•°æ®åº“æŸ¥è¯¢æ¥è¯´ï¼ŒèŒƒå›´æŸ¥è¯¢æ˜¯éå¸¸å¸¸è§çš„æ“ä½œï¼Œå› æ­¤B+æ ‘å¯ä»¥æ›´å¥½åœ°æ»¡è¶³è¿™ç§éœ€æ±‚ã€‚</font>**
+ **<font style="color:#117CEE;background-color:#FFFFFF;">é¡ºåºè®¿é—®æ€§èƒ½å¥½ï¼š</font>****<font style="color:#000000;background-color:#FFFFFF;">B+æ ‘çš„å¶å­èŠ‚ç‚¹å½¢æˆ</font>****<font style="color:#74B602;background-color:#FFFFFF;">æœ‰åºé“¾è¡¨</font>****<font style="color:#000000;background-color:#FFFFFF;">ï¼Œåœ¨è¿ç»­çš„æ•°æ®æŸ¥è¯¢ä¸­ï¼ŒB+æ ‘å¯ä»¥</font>****<font style="color:#74B602;background-color:#FFFFFF;">åˆ©ç”¨ç£ç›˜é¢„è¯»</font>****<font style="color:#000000;background-color:#FFFFFF;">ç‰¹æ€§</font>****<font style="color:#74B602;background-color:#FFFFFF;"></font>****<font style="color:#000000;background-color:#FFFFFF;">ï¼Œ</font>****<font style="color:#74B602;background-color:#FFFFFF;">æé«˜</font>****<font style="color:#000000;background-color:#FFFFFF;">æ•°æ®çš„é¡ºåºè®¿é—®æ€§èƒ½ï¼Œ</font>****<font style="color:#74B602;background-color:#FFFFFF;">å‡å°‘</font>****<font style="color:#000000;background-color:#FFFFFF;">ç£ç›˜I/Oæ¬¡æ•°ã€‚</font>**
+ **<font style="color:#117CEE;background-color:#FFFFFF;">æ›´å°‘çš„ç£ç›˜I/Oï¼š</font>****<font style="color:#000000;background-color:#FFFFFF;">B+æ ‘çš„</font>****<font style="color:#74B602;background-color:#FFFFFF;">éå¶å­èŠ‚ç‚¹</font>****<font style="color:#000000;background-color:#FFFFFF;">åª</font>****<font style="color:#74B602;background-color:#FFFFFF;">å­˜å‚¨å…³é”®å­—</font>****<font style="color:#000000;background-color:#FFFFFF;">å’ŒæŒ‡é’ˆï¼Œç›¸æ¯”äºBæ ‘ï¼Œæ¯ä¸ªèŠ‚ç‚¹å¯ä»¥</font>****<font style="color:#74B602;background-color:#FFFFFF;">å­˜å‚¨æ›´å¤šçš„</font>****<font style="color:#000000;background-color:#FFFFFF;">å…³é”®å­—ï¼Œ</font>****<font style="color:#74B602;background-color:#FFFFFF;">å‡å°‘äº†</font>****<font style="color:#000000;background-color:#FFFFFF;">ç£ç›˜I/Oæ¬¡æ•°ï¼Œ</font>****<font style="color:#74B602;background-color:#FFFFFF;">æé«˜äº†</font>****<font style="color:#000000;background-color:#FFFFFF;">æ•°æ®è®¿é—®æ•ˆç‡ã€‚</font>**
+ **<font style="color:#117CEE;background-color:#FFFFFF;">å†…å­˜å‹å¥½ï¼š</font>****<font style="background-color:#FFFFFF;">B+æ ‘ç´¢å¼•çš„å†…éƒ¨èŠ‚ç‚¹</font>****<font style="color:#74B602;background-color:#FFFFFF;">åªåŒ…å«é”®å€¼</font>****<font style="background-color:#FFFFFF;">ï¼Œç›¸å¯¹äºBæ ‘æ¥è¯´</font>****<font style="color:#74B602;background-color:#FFFFFF;">æ›´åŠ ç´§å‡‘</font>****<font style="background-color:#FFFFFF;">ï¼Œå¯ä»¥</font>****<font style="color:#74B602;background-color:#FFFFFF;">èŠ‚çœå†…å­˜ç©ºé—´</font>****<font style="background-color:#FFFFFF;">ã€‚åœ¨æ•°æ®åº“ç³»ç»Ÿä¸­ï¼Œç´¢å¼•é€šå¸¸éœ€è¦ç¼“å­˜åœ¨å†…å­˜ä¸­ä»¥æé«˜æŸ¥è¯¢æ€§èƒ½ï¼Œå› æ­¤B+æ ‘ç´¢å¼•æ›´é€‚åˆã€‚</font>**

# <font style="color:#ECAA04;background-color:#FFFFFF;">æœ€å·¦å‰ç¼€åŸåˆ™æ˜¯ä»€ä¹ˆï¼Ÿ</font>
**<font style="color:#DF2A3F;background-color:#FFFFFF;">æœ€å·¦å‰ç¼€åŸåˆ™</font>****<font style="color:#000000;background-color:#FFFFFF;">æ˜¯æ•°æ®åº“ç´¢å¼•è®¾è®¡ä¸­çš„ä¸€ä¸ªé‡è¦åŸåˆ™ï¼Œå½“</font>****<font style="color:#74B602;background-color:#FFFFFF;">è”åˆç´¢å¼•åŒ…å«å¤šä¸ªåˆ—</font>****<font style="color:#000000;background-color:#FFFFFF;">æ—¶ï¼ŒæŸ¥è¯¢è¯­å¥å¯ä»¥åˆ©ç”¨</font>****<font style="color:#74B602;background-color:#FFFFFF;">ä»å·¦åˆ°å³çš„é¡ºåºä½¿ç”¨ç´¢å¼•</font>****<font style="color:#000000;background-color:#FFFFFF;">ï¼Œä½†åªèƒ½è¿ç»­ä½¿ç”¨æœ€å·¦ä¾§çš„åˆ—æ¥è¿›è¡Œç´¢å¼•æ‰«æã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚æœ</font>****<font style="color:#74B602;background-color:#FFFFFF;">ä¸€ä¸ªæŸ¥è¯¢</font>****<font style="color:#000000;background-color:#FFFFFF;">åªä½¿ç”¨äº†</font>****<font style="color:#74B602;background-color:#FFFFFF;">è”åˆç´¢å¼•</font>****<font style="color:#000000;background-color:#FFFFFF;">ä¸­çš„</font>****<font style="color:#74B602;background-color:#FFFFFF;">éƒ¨åˆ†åˆ—</font>****<font style="color:#000000;background-color:#FFFFFF;">ä½œä¸ºæŸ¥è¯¢æ¡ä»¶ï¼Œé‚£ä¹ˆåªæœ‰ä»ç´¢å¼•çš„</font>****<font style="color:#74B602;background-color:#FFFFFF;">æœ€å·¦ä¾§åˆ—å¼€å§‹</font>****<font style="color:#000000;background-color:#FFFFFF;">è¿ç»­ä½¿ç”¨æ—¶ï¼Œ</font>****<font style="color:#74B602;background-color:#FFFFFF;">ç´¢å¼•æ‰ä¼šæœ‰æ•ˆ</font>****<font style="color:#000000;background-color:#FFFFFF;">ã€‚</font>**

**<font style="color:#000000;background-color:#FFFFFF;">ä¾‹å¦‚ï¼Œå‡è®¾æœ‰ä¸€ä¸ªè”åˆç´¢å¼• (a, b, c)ï¼Œé‚£ä¹ˆæŸ¥è¯¢æ¡ä»¶ä¸­åŒ…å« a å’Œ b çš„æŸ¥è¯¢å¯ä»¥åˆ©ç”¨è¯¥ç´¢å¼•ï¼Œè€ŒåªåŒ…å« b æˆ–è€…åªåŒ…å« c çš„æŸ¥è¯¢åˆ™æ— æ³•ä½¿ç”¨è¯¥ç´¢å¼•ã€‚</font>**

```plsql
select * from test where a = 'a' and b = 'b';  --èµ°ç´¢å¼•
select * from test where b = 'b' and c = 'c';  --ä¸èµ°ç´¢å¼•
select * from test where b = 'b';  --ä¸èµ°ç´¢å¼•
select * from test where c = 'c';  --ä¸èµ°ç´¢å¼•
```

**<font style="color:#000000;background-color:#FFFFFF;">æœ€å·¦å‰ç¼€åŸåˆ™çš„</font>****<font style="color:#DF2A3F;background-color:#FFFFFF;">ç›®çš„</font>****<font style="color:#000000;background-color:#FFFFFF;">æ˜¯ä½¿ç´¢å¼•å…·æœ‰</font>****<font style="color:#117CEE;background-color:#FFFFFF;">æ›´é«˜çš„é€‰æ‹©æ€§</font>****<font style="color:#000000;background-color:#FFFFFF;">ï¼Œ</font>****<font style="color:#74B602;background-color:#FFFFFF;">æé«˜</font>****<font style="color:#000000;background-color:#FFFFFF;">æŸ¥è¯¢æ•ˆç‡ã€‚ç”±äºæ•°æ®åº“ç´¢å¼•æ˜¯</font>****<font style="color:#74B602;background-color:#FFFFFF;">æŒ‰ç…§ç´¢å¼•åˆ—çš„é¡ºåºæ„å»º</font>****<font style="color:#000000;background-color:#FFFFFF;">çš„ï¼Œé€‰æ‹©æ€§é«˜çš„åˆ—æ”¾åœ¨æœ€å·¦ä¾§å¯ä»¥å‡å°‘éœ€è¦æ£€æŸ¥çš„ç´¢å¼•å—æ•°é‡ï¼Œä»è€Œæé«˜æŸ¥è¯¢æ€§èƒ½ã€‚</font>**

**<font style="color:#000000;background-color:#FFFFFF;">éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œæœ€å·¦å‰ç¼€åŸåˆ™</font>****<font style="color:#74B602;background-color:#FFFFFF;">å¹¶ä¸é™åˆ¶</font>****<font style="color:#000000;background-color:#FFFFFF;">æŸ¥è¯¢æ¡ä»¶çš„é¡ºåºï¼Œ</font>****<font style="color:#74B602;background-color:#FFFFFF;">åªè¦æ»¡è¶³</font>****<font style="color:#000000;background-color:#FFFFFF;">ä»å·¦åˆ°å³è¿ç»­ä½¿ç”¨ç´¢å¼•åˆ—å³å¯ã€‚æ­¤å¤–ï¼Œå¦‚æœæŸ¥è¯¢æ¡ä»¶</font>****<font style="color:#74B602;background-color:#FFFFFF;">ä¸ç¬¦åˆæœ€å·¦å‰ç¼€åŸåˆ™</font>****<font style="color:#000000;background-color:#FFFFFF;">ï¼Œæ•°æ®åº“</font>****<font style="color:#74B602;background-color:#FFFFFF;">ä»ç„¶å¯ä»¥</font>****<font style="color:#000000;background-color:#FFFFFF;">é€šè¿‡</font>****<font style="color:#74B602;background-color:#FFFFFF;">å…¨è¡¨æ‰«æ</font>****<font style="color:#000000;background-color:#FFFFFF;">ç­‰æ–¹å¼æ‰§è¡ŒæŸ¥è¯¢ï¼Œä½†è¿™ç§æ–¹å¼é€šå¸¸</font>****<font style="color:#74B602;background-color:#FFFFFF;">æ•ˆç‡è¾ƒä½</font>****<font style="color:#000000;background-color:#FFFFFF;">ã€‚</font>**

**<font style="color:#000000;background-color:#FFFFFF;">ç»¼ä¸Šæ‰€è¿°ï¼Œæœ€å·¦å‰ç¼€åŸåˆ™æ˜¯æŒ‡åœ¨è”åˆç´¢å¼•ä¸­åªæœ‰ä»æœ€å·¦ä¾§åˆ—å¼€å§‹è¿ç»­ä½¿ç”¨æ—¶ï¼Œç´¢å¼•æ‰èƒ½è¢«æœ‰æ•ˆåˆ©ç”¨ï¼Œè¿™æœ‰åŠ©äºæé«˜æŸ¥è¯¢æ€§èƒ½å’Œé€‰æ‹©æ€§ã€‚</font>**

![1698822259762-d5eadd14-f496-426d-b631-af6107f5be5b.jpeg](./img/hATw4O-knQXenPBo/1698822259762-d5eadd14-f496-426d-b631-af6107f5be5b-284496.jpeg)

# <font style="color:#ECAA04;background-color:#FFFFFF;">ç´¢å¼•è¦†ç›–æ˜¯ä»€ä¹ˆ</font>
**<font style="color:#DF2A3F;background-color:#FFFFFF;">ç´¢å¼•è¦†ç›–</font>****<font style="color:#000000;background-color:#FFFFFF;">æ˜¯ä¸€ç§</font>****<font style="color:#117CEE;background-color:#FFFFFF;">æŸ¥è¯¢ä¼˜åŒ–æŠ€æœ¯</font>****<font style="color:#000000;background-color:#FFFFFF;">ï¼Œåœ¨</font>****<font style="color:#74B602;background-color:#FFFFFF;">æŸ¥è¯¢</font>****<font style="color:#000000;background-color:#FFFFFF;">è¿‡ç¨‹ä¸­</font>****<font style="color:#74B602;background-color:#FFFFFF;">åªä½¿ç”¨ç´¢å¼•</font>****<font style="color:#000000;background-color:#FFFFFF;">è€Œ</font>****<font style="color:#74B602;background-color:#FFFFFF;">ä¸éœ€è¦å›è¡¨</font>****<font style="color:#000000;background-color:#FFFFFF;">åˆ°æ•°æ®é¡µæ¥è·å–æŸ¥è¯¢ç»“æœã€‚</font>**

**<font style="color:#000000;background-color:#FFFFFF;">ç®€å•æ¥è¯´ï¼Œå½“ä¸€ä¸ªæŸ¥è¯¢éœ€è¦è¿”å›çš„æ•°æ®åˆ—éƒ½åŒ…å«åœ¨ä¸€ä¸ªæˆ–å¤šä¸ªç´¢å¼•ä¸­æ—¶ï¼Œå°±å¯ä»¥åˆ©ç”¨ç´¢å¼•è¦†ç›–æ¥é¿å…é¢å¤–çš„ç£ç›˜è¯»å–æ“ä½œï¼Œä»è€Œæé«˜æŸ¥è¯¢æ€§èƒ½ã€‚</font>**

![1680414456643-db561b76-ec69-430a-9b3d-7bee93b2a498.jpeg](./img/hATw4O-knQXenPBo/1680414456643-db561b76-ec69-430a-9b3d-7bee93b2a498-278828.jpeg)

**<font style="color:#000000;background-color:#FFFFFF;">é€šå¸¸ï¼Œå½“ä¸€ä¸ªæŸ¥è¯¢éœ€è¦è®¿é—®å¤§é‡æ•°æ®è¡Œæ—¶ï¼Œå¦‚æœ</font>****<font style="color:#117CEE;background-color:#FFFFFF;">æ²¡æœ‰ç´¢å¼•è¦†ç›–</font>****<font style="color:#000000;background-color:#FFFFFF;">ï¼Œæ•°æ®åº“å¼•æ“éœ€è¦åœ¨</font>****<font style="color:#74B602;background-color:#FFFFFF;">ç£ç›˜ä¸Šè¯»å–</font>****<font style="color:#000000;background-color:#FFFFFF;">ç›¸åº”çš„æ•°æ®é¡µï¼Œå¹¶</font>****<font style="color:#74B602;background-color:#FFFFFF;">æ£€ç´¢å‡º</font>****<font style="color:#000000;background-color:#FFFFFF;">æ»¡è¶³æŸ¥è¯¢æ¡ä»¶çš„</font>****<font style="color:#74B602;background-color:#FFFFFF;">æ•°æ®è¡Œ</font>****<font style="color:#000000;background-color:#FFFFFF;">ã€‚ç„¶åï¼Œ</font>****<font style="color:#74B602;background-color:#FFFFFF;">å†æ ¹æ®</font>****<font style="color:#000000;background-color:#FFFFFF;">æŸ¥è¯¢</font>****<font style="color:#74B602;background-color:#FFFFFF;">éœ€è¦</font>****<font style="color:#000000;background-color:#FFFFFF;">è¿”å›çš„æ•°æ®åˆ—ï¼Œå°†æ‰€éœ€æ•°æ®</font>****<font style="color:#74B602;background-color:#FFFFFF;">ä»å†…å­˜ä¸­ç­›é€‰</font>****<font style="color:#000000;background-color:#FFFFFF;">å‡ºæ¥ã€‚è¿™ä¸ªè¿‡ç¨‹ä¼š</font>****<font style="color:#74B602;background-color:#FFFFFF;">å¯¼è‡´ç£ç›˜I/O</font>****<font style="color:#000000;background-color:#FFFFFF;">çš„</font>****<font style="color:#74B602;background-color:#FFFFFF;">å¼€é”€</font>****<font style="color:#000000;background-color:#FFFFFF;">ï¼Œå¹¶ä¸”å¯èƒ½ä¼šæœ‰</font>****<font style="color:#74B602;background-color:#FFFFFF;">å¤§é‡çš„æ•°æ®</font>****<font style="color:#000000;background-color:#FFFFFF;">éœ€è¦</font>****<font style="color:#74B602;background-color:#FFFFFF;">ä»ç£ç›˜è¯»å–åˆ°å†…å­˜</font>****<font style="color:#000000;background-color:#FFFFFF;">ä¸­ï¼Œå½±å“æŸ¥è¯¢çš„æ€§èƒ½ã€‚</font>**

**<font style="color:#000000;background-color:#FFFFFF;">è€Œå½“æŸ¥è¯¢çš„æ•°æ®åˆ—éƒ½åŒ…å«åœ¨ç´¢å¼•ä¸­æ—¶ï¼Œå¯ä»¥</font>****<font style="color:#117CEE;background-color:#FFFFFF;">åˆ©ç”¨ç´¢å¼•è¦†ç›–</font>****<font style="color:#000000;background-color:#FFFFFF;">æ¥ä¼˜åŒ–æŸ¥è¯¢è¿‡ç¨‹ã€‚æ•°æ®åº“å¼•æ“åªéœ€è¦</font>****<font style="color:#74B602;background-color:#FFFFFF;">é€šè¿‡ç´¢å¼•</font>****<font style="color:#000000;background-color:#FFFFFF;">è¿›è¡Œ</font>****<font style="color:#74B602;background-color:#FFFFFF;">æ•°æ®æ£€ç´¢</font>****<font style="color:#000000;background-color:#FFFFFF;">ï¼Œå¹¶ç›´æ¥ä»ç´¢å¼•ä¸­è·å–æ‰€éœ€çš„æ•°æ®åˆ—ï¼Œè€Œ</font>****<font style="color:#74B602;background-color:#FFFFFF;">ä¸éœ€è¦</font>****<font style="color:#000000;background-color:#FFFFFF;">å†</font>****<font style="color:#74B602;background-color:#FFFFFF;">å›è¡¨</font>****<font style="color:#000000;background-color:#FFFFFF;">åˆ°æ•°æ®é¡µã€‚è¿™æ ·å¯ä»¥å¤§å¤§</font>****<font style="color:#74B602;background-color:#FFFFFF;">å‡å°‘ç£ç›˜I/Oæ“ä½œ</font>****<font style="color:#000000;background-color:#FFFFFF;">å’Œæ•°æ®ä¼ è¾“ï¼Œæé«˜æŸ¥è¯¢æ€§èƒ½ã€‚</font>**

**<font style="color:#000000;background-color:#FFFFFF;">ç´¢å¼•è¦†ç›–çš„å¥½å¤„ä¸»è¦ä½“ç°åœ¨ä»¥ä¸‹å‡ ä¸ªæ–¹é¢ï¼š</font>**

+ **<font style="color:#DF2A3F;background-color:#FFFFFF;">å‡å°‘ç£ç›˜I/Oæ“ä½œï¼š</font>****<font style="color:#000000;background-color:#FFFFFF;">ç”±äºåªéœ€è¦</font>****<font style="color:#74B602;background-color:#FFFFFF;">è¯»å–ç´¢å¼•é¡µ</font>****<font style="color:#000000;background-color:#FFFFFF;">è€Œä¸æ˜¯æ•°æ®é¡µï¼Œ</font>****<font style="color:#117CEE;background-color:#FFFFFF;">èŠ‚çœäº†</font>****<font style="color:#000000;background-color:#FFFFFF;">ä»ç£ç›˜</font>****<font style="color:#117CEE;background-color:#FFFFFF;">è¯»å–</font>****<font style="color:#000000;background-color:#FFFFFF;">æ•°æ®çš„</font>****<font style="color:#117CEE;background-color:#FFFFFF;">å¼€é”€</font>****<font style="color:#000000;background-color:#FFFFFF;">ï¼Œæé«˜äº†æŸ¥è¯¢çš„é€Ÿåº¦ã€‚</font>**
+ **<font style="color:#DF2A3F;background-color:#FFFFFF;">å‡å°‘æ•°æ®ä¼ è¾“ï¼š</font>****<font style="color:#000000;background-color:#FFFFFF;">ç”±äºåªéœ€è¦ä»</font>****<font style="color:#74B602;background-color:#FFFFFF;">ç´¢å¼•ä¸­è·å–æ‰€éœ€çš„æ•°æ®åˆ—</font>****<font style="color:#000000;background-color:#FFFFFF;">ï¼Œ</font>****<font style="color:#117CEE;background-color:#FFFFFF;">å‡å°‘äº†</font>****<font style="color:#000000;background-color:#FFFFFF;">ä»ç£ç›˜åˆ°å†…å­˜çš„æ•°æ®</font>****<font style="color:#117CEE;background-color:#FFFFFF;">ä¼ è¾“é‡</font>****<font style="color:#000000;background-color:#FFFFFF;">ï¼Œé™ä½äº†ç½‘ç»œå¼€é”€ã€‚</font>**
+ **<font style="color:#DF2A3F;background-color:#FFFFFF;">æé«˜æŸ¥è¯¢æ€§èƒ½ï¼š</font>****<font style="color:#000000;background-color:#FFFFFF;">ç´¢å¼•è¦†ç›–å¯ä»¥</font>****<font style="color:#74B602;background-color:#FFFFFF;">å‡å°‘æŸ¥è¯¢æ‰€éœ€çš„æ“ä½œå’Œèµ„æºæ¶ˆè€—</font>****<font style="color:#000000;background-color:#FFFFFF;">ï¼Œ</font>****<font style="color:#117CEE;background-color:#FFFFFF;">åŠ å¿«æŸ¥è¯¢</font>****<font style="color:#000000;background-color:#FFFFFF;">çš„æ‰§è¡Œ</font>****<font style="color:#117CEE;background-color:#FFFFFF;">é€Ÿåº¦</font>****<font style="color:#000000;background-color:#FFFFFF;">ï¼Œæé«˜ç³»ç»Ÿçš„å“åº”æ€§èƒ½ã€‚</font>**

**<font style="color:#000000;background-color:#FFFFFF;">éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œç´¢å¼•è¦†ç›–</font>****<font style="color:#DF2A3F;background-color:#FFFFFF;">å¹¶ä¸æ˜¯é€‚ç”¨äºæ‰€æœ‰</font>****<font style="color:#000000;background-color:#FFFFFF;">æƒ…å†µçš„ä¼˜åŒ–æŠ€æœ¯ã€‚å¦‚æœæŸ¥è¯¢éœ€è¦è¿”å›å¤§é‡çš„æ•°æ®åˆ—æˆ–è€…æŸ¥è¯¢æ¡ä»¶è¾ƒå¤æ‚ï¼Œç´¢å¼•è¦†ç›–å¯èƒ½æ— æ³•æ»¡è¶³è¦æ±‚ã€‚æ­¤å¤–ï¼Œç´¢å¼•è¦†ç›–è¿˜</font>****<font style="color:#DF2A3F;background-color:#FFFFFF;">éœ€è¦æƒè¡¡ç´¢å¼•çš„ç»´æŠ¤æˆæœ¬</font>****<font style="color:#000000;background-color:#FFFFFF;">å’Œ</font>****<font style="color:#DF2A3F;background-color:#FFFFFF;">æŸ¥è¯¢æ€§èƒ½</font>****<font style="color:#000000;background-color:#FFFFFF;">ä¹‹é—´çš„</font>****<font style="color:#DF2A3F;background-color:#FFFFFF;">å¹³è¡¡</font>****<font style="color:#000000;background-color:#FFFFFF;">ï¼Œå› ä¸ºè¦†ç›–ç´¢å¼•å¯èƒ½ä¼šå¢åŠ ç´¢å¼•çš„å¤§å°å’Œç»´æŠ¤çš„å¤æ‚æ€§ã€‚</font>**

# <font style="color:#ECAA04;background-color:#FFFFFF;">MySqlèšç°‡å’Œéèšç°‡ç´¢å¼•çš„åŒºåˆ«</font>
**<font style="color:#000000;background-color:#FFFFFF;">MySQLä¸­çš„</font>****<font style="color:#DF2A3F;background-color:#FFFFFF;">èšç°‡ç´¢å¼•</font>****<font style="color:#000000;background-color:#FFFFFF;">ä¹Ÿè¢«ç§°ä¸ºä¸»é”®ç´¢å¼•ï¼Œå®ƒæ˜¯ä¸€ç§</font>****<font style="color:#DF2A3F;background-color:#FFFFFF;">ç‰¹æ®Šç±»å‹çš„ç´¢å¼•</font>****<font style="color:#000000;background-color:#FFFFFF;">ï¼Œç”¨äºå­˜å‚¨è¡¨ä¸­çš„æ•°æ®è®°å½•ã€‚ä¸èšç°‡ç´¢å¼•ä¸åŒï¼Œ</font>****<font style="color:#DF2A3F;background-color:#FFFFFF;">éèšç°‡ç´¢å¼•</font>****<font style="color:#000000;background-color:#FFFFFF;">ç”¨äº</font>****<font style="color:#DF2A3F;background-color:#FFFFFF;">å­˜å‚¨</font>****<font style="color:#000000;background-color:#FFFFFF;">å¯¹è¡¨ä¸­</font>****<font style="color:#DF2A3F;background-color:#FFFFFF;">æ•°æ®</font>****<font style="color:#000000;background-color:#FFFFFF;">è®°å½•çš„</font>****<font style="color:#DF2A3F;background-color:#FFFFFF;">å¼•ç”¨åœ°å€ã€‚</font>**

![1698762369566-00f520e3-96f3-4c27-847c-3a60641d73b7.jpeg](./img/hATw4O-knQXenPBo/1698762369566-00f520e3-96f3-4c27-847c-3a60641d73b7-330752.jpeg)<font style="background-color:#FFFFFF;"> </font>

**<font style="color:#000000;background-color:#FFFFFF;">ä¸‹é¢æ˜¯èšç°‡ç´¢å¼•å’Œéèšç°‡ç´¢å¼•çš„åŒºåˆ«ï¼š</font>**

+ **<font style="color:#117CEE;background-color:#FFFFFF;">å­˜å‚¨æ–¹å¼ä¸åŒï¼š</font>****<font style="color:#DF2A3F;background-color:#FFFFFF;">èšç°‡ç´¢å¼•</font>****<font style="color:#000000;background-color:#FFFFFF;">å­˜å‚¨</font>****<font style="color:#74B602;background-color:#FFFFFF;">æ•°æ®è®°å½•</font>****<font style="color:#000000;background-color:#FFFFFF;">ï¼Œ</font>****<font style="color:#74B602;background-color:#FFFFFF;">éèšç°‡ç´¢å¼•</font>****<font style="color:#000000;background-color:#FFFFFF;">å­˜å‚¨å¯¹æ•°æ®è®°å½•çš„</font>****<font style="color:#74B602;background-color:#FFFFFF;">å¼•ç”¨åœ°å€</font>****<font style="color:#000000;background-color:#FFFFFF;">ã€‚</font>**
+ **<font style="color:#117CEE;background-color:#FFFFFF;">æŸ¥è¯¢é€Ÿåº¦ä¸åŒï¼š</font>****<font style="color:#000000;background-color:#FFFFFF;">ç”±äº</font>****<font style="color:#DF2A3F;background-color:#FFFFFF;">èšç°‡ç´¢å¼•</font>****<font style="color:#000000;background-color:#FFFFFF;">å­˜å‚¨äº†æ•´ä¸ª</font>****<font style="color:#74B602;background-color:#FFFFFF;">æ•°æ®è®°å½•</font>****<font style="color:#000000;background-color:#FFFFFF;">ï¼Œå› æ­¤åœ¨æŸ¥è¯¢æ—¶</font>****<font style="color:#74B602;background-color:#FFFFFF;">å¯ä»¥ç›´æ¥</font>****<font style="color:#000000;background-color:#FFFFFF;">ä»èšç°‡ç´¢å¼•ä¸­</font>****<font style="color:#74B602;background-color:#FFFFFF;">è¯»å–æ•°æ®</font>****<font style="color:#000000;background-color:#FFFFFF;">ï¼Œä»è€Œ</font>****<font style="color:#74B602;background-color:#FFFFFF;">æé«˜æŸ¥è¯¢é€Ÿåº¦å’Œæ€§èƒ½</font>****<font style="color:#000000;background-color:#FFFFFF;">ã€‚è€Œéèšç°‡ç´¢å¼•éœ€è¦å…ˆæŸ¥æ‰¾ç´¢å¼•ï¼Œå†é€šè¿‡å¼•ç”¨åœ°å€åˆ°æ•°æ®é¡µä¸­æŸ¥æ‰¾ç›¸å…³æ•°æ®è®°å½•ï¼Œæ‰€ä»¥æŸ¥è¯¢é€Ÿåº¦ç›¸å¯¹è¾ƒæ…¢ã€‚</font>**
+ **<font style="color:#117CEE;background-color:#FFFFFF;">å†…å­˜å ç”¨ä¸åŒï¼š</font>****<font style="color:#000000;background-color:#FFFFFF;">ç”±äº</font>****<font style="color:#DF2A3F;background-color:#FFFFFF;">èšç°‡ç´¢å¼•</font>****<font style="color:#000000;background-color:#FFFFFF;">å­˜å‚¨äº†æ•´ä¸ªæ•°æ®è®°å½•ï¼Œå› æ­¤éœ€è¦</font>****<font style="color:#74B602;background-color:#FFFFFF;">æ›´å¤šçš„å†…å­˜</font>****<font style="color:#000000;background-color:#FFFFFF;">ã€‚è€Œéèšç°‡ç´¢å¼•åªéœ€è¦å­˜å‚¨å¯¹æ•°æ®è®°å½•çš„</font>****<font style="color:#74B602;background-color:#FFFFFF;">å¼•ç”¨åœ°å€</font>****<font style="color:#000000;background-color:#FFFFFF;">ï¼Œå› æ­¤éœ€è¦çš„</font>****<font style="color:#74B602;background-color:#FFFFFF;">å†…å­˜è¾ƒå°‘</font>****<font style="color:#000000;background-color:#FFFFFF;">ã€‚</font>**
+ **<font style="color:#117CEE;background-color:#FFFFFF;">ç´¢å¼•æ›´æ–°é€Ÿåº¦ä¸åŒï¼š</font>****<font style="color:#000000;background-color:#FFFFFF;">ç”±äº</font>****<font style="color:#DF2A3F;background-color:#FFFFFF;">èšç°‡ç´¢å¼•</font>****<font style="color:#000000;background-color:#FFFFFF;">å­˜å‚¨çš„æ˜¯æ•°æ®è®°å½•ï¼Œå› æ­¤å½“æ•°æ®è®°å½•å‘ç”Ÿå˜åŒ–æ—¶ï¼Œéœ€è¦</font>****<font style="color:#74B602;background-color:#FFFFFF;">é‡æ„æ•´ä¸ªç´¢å¼•</font>****<font style="color:#000000;background-color:#FFFFFF;">ï¼Œä»è€Œå¯¼è‡´ç´¢å¼•æ›´æ–°</font>****<font style="color:#74B602;background-color:#FFFFFF;">é€Ÿåº¦è¾ƒæ…¢</font>****<font style="color:#000000;background-color:#FFFFFF;">ã€‚è€Œéèšç°‡ç´¢å¼•åªéœ€è¦</font>****<font style="color:#74B602;background-color:#FFFFFF;">ä¿®æ”¹</font>****<font style="color:#000000;background-color:#FFFFFF;">å¯¹æ•°æ®è®°å½•çš„</font>****<font style="color:#74B602;background-color:#FFFFFF;">å¼•ç”¨åœ°å€</font>****<font style="color:#000000;background-color:#FFFFFF;">ï¼Œå› æ­¤æ›´æ–°</font>****<font style="color:#74B602;background-color:#FFFFFF;">é€Ÿåº¦è¾ƒå¿«</font>****<font style="color:#000000;background-color:#FFFFFF;">ã€‚</font>**

**<font style="color:#000000;background-color:#FFFFFF;">åœ¨å®é™…åº”ç”¨ä¸­ï¼Œèšç°‡ç´¢å¼•é€šå¸¸ç”¨äºä¸»é”®æˆ–å”¯ä¸€çº¦æŸåˆ—ï¼Œå› ä¸ºè¿™äº›åˆ—çš„å€¼æ˜¯å”¯ä¸€çš„ï¼Œå¯ä»¥ä½œä¸ºæŸ¥æ‰¾æ•°æ®çš„å…¥å£ã€‚è€Œéèšç°‡ç´¢å¼•åˆ™é€‚ç”¨äºå…¶ä»–éœ€è¦æŸ¥æ‰¾çš„åˆ—ï¼Œå¦‚å¤–é”®å’Œéå”¯ä¸€åˆ—ç­‰ã€‚</font>**

**<font style="color:#000000;background-color:#FFFFFF;">éœ€è¦æ³¨æ„çš„æ˜¯ï¼ŒMySQLä¸­çš„InnoDBå­˜å‚¨å¼•æ“å°†è¡¨çš„ä¸»é”®å®šä¹‰ä¸ºèšç°‡ç´¢å¼•ï¼Œå¦‚æœæ²¡æœ‰æ˜¾å¼åœ°å®šä¹‰ä¸»é”®ï¼Œåˆ™ä½¿ç”¨ç¬¬ä¸€ä¸ªéç©ºçš„å”¯ä¸€ç´¢å¼•ä½œä¸ºèšç°‡ç´¢å¼•ã€‚åŒæ—¶ï¼Œå¯¹äºæ¯ä¸ªè¡¨ï¼Œåªèƒ½æœ‰ä¸€ä¸ªèšç°‡ç´¢å¼•ï¼Œä½†å¯ä»¥æœ‰å¤šä¸ªéèšç°‡ç´¢å¼•ã€‚</font>**

# <font style="color:#ECAA04;background-color:#FFFFFF;">Mysqlæ•°æ®åº“ä¸­ï¼Œä»€ä¹ˆæƒ…å†µä¸‹è®¾ç½®äº†ç´¢å¼•ä½†æ— æ³•ä½¿ç”¨ï¼Ÿ</font>
![ç”»æ¿](./img/hATw4O-knQXenPBo/1720092991597-43042547-1410-4d6b-a6b4-8dfb1213fe50-760731.jpeg)

**<font style="color:#000000;background-color:#FFFFFF;">åœ¨MySQLæ•°æ®åº“ä¸­ï¼Œè™½ç„¶è®¾ç½®äº†ç´¢å¼•ï¼Œä½†æœ‰æ—¶å€™æŸ¥è¯¢æ‰§è¡Œè®¡åˆ’å¹¶ä¸ä¼šä½¿ç”¨ç´¢å¼•ï¼Œå¯¼è‡´æŸ¥è¯¢æ€§èƒ½æ— æ³•å¾—åˆ°æå‡ã€‚ä»¥ä¸‹æ˜¯ä¸€äº›å¸¸è§çš„åŸå› ï¼š</font>**

+ **<font style="color:#DF2A3F;background-color:#FFFFFF;">ä¸æ»¡è¶³æœ€å·¦å‰ç¼€åŸåˆ™ï¼š</font>****<font style="color:#000000;background-color:#FFFFFF;">MySQLçš„</font>****<font style="color:#74B602;background-color:#FFFFFF;">è”åˆç´¢å¼•éµå¾ªæœ€å·¦å‰ç¼€åŸåˆ™</font>****<font style="color:#000000;background-color:#FFFFFF;">ï¼Œå³åªæœ‰åœ¨æŸ¥è¯¢æ¡ä»¶ä¸­</font>****<font style="color:#117CEE;background-color:#FFFFFF;">ä½¿ç”¨äº†ç´¢å¼•æœ€å·¦è¾¹çš„åˆ—</font>****<font style="color:#000000;background-color:#FFFFFF;">ï¼Œç´¢å¼•</font>****<font style="color:#117CEE;background-color:#FFFFFF;">æ‰èƒ½ç”Ÿæ•ˆ</font>****<font style="color:#000000;background-color:#FFFFFF;">ã€‚å¦‚æœæŸ¥è¯¢æ¡ä»¶æ²¡æœ‰æŒ‰ç…§ç´¢å¼•çš„æœ€å·¦è¾¹åˆ—å¼€å§‹ï¼Œå¹¶ä¸ä¼šä½¿ç”¨ç´¢å¼•ã€‚</font>**

```plsql
CREATE TABLE IndexValidation (
  id INT AUTO_INCREMENT PRIMARY KEY,
  name VARCHAR(50),
  age INT,
  email VARCHAR(100),
  created_at TIMESTAMP
);

INSERT INTO IndexValidation (name, age, email, created_at) VALUES
    ('Alice', 25, 'alice@example.com', NOW()),
    ('Bob', 30, 'bob@example.com', NOW()),
    ('Charlie', 35, 'charlie@example.com', NOW());
```

```plsql
CREATE INDEX idx_name_age ON IndexValidation (name, age);

EXPLAIN SELECT * FROM IndexValidation WHERE age = 25;
```

+ **<font style="color:#DF2A3F;background-color:#FFFFFF;">ä½¿ç”¨å‡½æ•°æˆ–è¡¨è¾¾å¼ï¼š</font>****<font style="color:#000000;background-color:#FFFFFF;">å½“æŸ¥è¯¢æ¡ä»¶ä¸­</font>****<font style="color:#74B602;background-color:#FFFFFF;">ä½¿ç”¨äº†å‡½æ•°æˆ–è¡¨è¾¾å¼</font>****<font style="color:#000000;background-color:#FFFFFF;">æ—¶ï¼Œç´¢å¼•å¯èƒ½</font>****<font style="color:#74B602;background-color:#FFFFFF;">æ— æ³•ç”Ÿæ•ˆ</font>****<font style="color:#000000;background-color:#FFFFFF;">ã€‚å› ä¸ºç´¢å¼•åªèƒ½åœ¨ä½¿ç”¨äº†ç›¸åŒçš„å‡½æ•°æˆ–è¡¨è¾¾å¼åæ‰èƒ½å‘æŒ¥ä½œç”¨ã€‚ä¾‹å¦‚ï¼Œåœ¨WHEREå­å¥ä¸­ä½¿ç”¨äº†å‡½æ•°æ“ä½œæˆ–è¿›è¡Œäº†ç±»å‹è½¬æ¢ã€‚</font>**

```plsql
CREATE INDEX idx_created_at ON IndexValidation (created_at);

EXPLAIN SELECT * FROM IndexValidation WHERE YEAR(created_at) = 2023;
```

+ **<font style="color:#DF2A3F;background-color:#FFFFFF;">éšå¼ç±»å‹è½¬æ¢ï¼š</font>****<font style="color:#000000;background-color:#FFFFFF;">å¦‚æœåœ¨æŸ¥è¯¢æ¡ä»¶ä¸­å°†</font>****<font style="color:#117CEE;background-color:#FFFFFF;">åˆ—ä¸ä¸€ä¸ªä¸åŒç±»å‹çš„å€¼æ¯”è¾ƒ</font>****<font style="color:#000000;background-color:#FFFFFF;">ï¼ŒMySQLå¯èƒ½ä¼šè¿›è¡Œéšå¼ç±»å‹è½¬æ¢ã€‚è¿™</font>****<font style="color:#74B602;background-color:#FFFFFF;">å¯èƒ½ä¼šå¯¼è‡´ç´¢å¼•å¤±æ•ˆ</font>****<font style="color:#000000;background-color:#FFFFFF;">ï¼Œå› ä¸ºMySQLæ— æ³•ä½¿ç”¨ç´¢å¼•æ¥å¤„ç†éšå¼ç±»å‹è½¬æ¢åçš„å€¼ã€‚</font>**

```plsql
CREATE INDEX idx_age ON IndexValidation (age);

EXPLAIN SELECT * FROM IndexValidation WHERE  age = '25';
```

+ **<font style="color:#DF2A3F;background-color:#FFFFFF;">LIKEæ“ä½œç¬¦ä»¥é€šé…ç¬¦å¼€å¤´ï¼š</font>****<font style="color:#000000;background-color:#FFFFFF;">å½“ä½¿ç”¨LIKEæ“ä½œç¬¦è¿›è¡Œ</font>****<font style="color:#117CEE;background-color:#FFFFFF;">æ¨¡ç³ŠåŒ¹é…æ—¶</font>****<font style="color:#000000;background-color:#FFFFFF;">ï¼Œå¦‚æœ</font>****<font style="color:#74B602;background-color:#FFFFFF;">é€šé…ç¬¦ï¼ˆ%ï¼‰</font>****<font style="color:#000000;background-color:#FFFFFF;">å‡ºç°åœ¨æœç´¢å­—ç¬¦ä¸²çš„</font>****<font style="color:#74B602;background-color:#FFFFFF;">å¼€å¤´</font>****<font style="color:#000000;background-color:#FFFFFF;">ï¼Œ</font>****<font style="color:#74B602;background-color:#FFFFFF;">ç´¢å¼•ä¹Ÿä¼šå¤±æ•ˆ</font>****<font style="color:#000000;background-color:#FFFFFF;">ã€‚å› ä¸ºé€šé…ç¬¦çš„ä½ç½®å†³å®šäº†ç´¢å¼•çš„å¯ç”¨æ€§ã€‚</font>**

```plsql
EXPLAIN SELECT * FROM IndexValidation WHERE name LIKE '%A';
```

+ **<font style="color:#DF2A3F;background-color:#FFFFFF;">ä½¿ç”¨ORæ“ä½œç¬¦ï¼š</font>****<font style="color:#000000;background-color:#FFFFFF;">å½“</font>****<font style="color:#74B602;background-color:#FFFFFF;">æŸ¥è¯¢æ¡ä»¶ä¸­åŒ…å«ORæ“ä½œç¬¦</font>****<font style="color:#000000;background-color:#FFFFFF;">æ—¶ï¼Œå¦‚æœ</font>****<font style="color:#74B602;background-color:#FFFFFF;">å…¶ä¸­ä¸€ä¸ª</font>****<font style="color:#000000;background-color:#FFFFFF;">æ¡ä»¶</font>****<font style="color:#74B602;background-color:#FFFFFF;">æ— æ³•åˆ©ç”¨ç´¢å¼•</font>****<font style="color:#000000;background-color:#FFFFFF;">ï¼Œæ•´ä¸ªæŸ¥è¯¢å¯èƒ½</font>****<font style="color:#74B602;background-color:#FFFFFF;">ä¼šå¯¼è‡´ç´¢å¼•å¤±æ•ˆ</font>****<font style="color:#000000;background-color:#FFFFFF;">ã€‚å¯¹äºè¿™ç§æƒ…å†µï¼Œå¯ä»¥è€ƒè™‘ä½¿ç”¨UNIONæˆ–é‡å†™æŸ¥è¯¢æ¥é¿å…ä½¿ç”¨ORæ“ä½œç¬¦ã€‚</font>**

```plsql
EXPLAIN SELECT * FROM IndexValidation WHERE name = 'Alice' OR age = 30;
```

+ **<font style="color:#DF2A3F;background-color:#FFFFFF;">æ•°æ®é‡å¤ªå°ï¼š</font>****<font style="color:#000000;background-color:#FFFFFF;">å¯¹äºéå¸¸å°çš„æ•°æ®è¡¨ï¼Œ</font>****<font style="color:#74B602;background-color:#FFFFFF;">ä½¿ç”¨ç´¢å¼•</font>****<font style="color:#000000;background-color:#FFFFFF;">å¯èƒ½</font>****<font style="color:#74B602;background-color:#FFFFFF;">ä¸ä¼šå¸¦æ¥æ€§èƒ½æå‡</font>****<font style="color:#000000;background-color:#FFFFFF;">ï¼Œç”šè‡³å¯èƒ½å¯¼è‡´æ€§èƒ½ä¸‹é™ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼ŒMySQLå¯èƒ½ä¼šé€‰æ‹©ä¸ä½¿ç”¨ç´¢å¼•ã€‚</font>**
+ **<font style="color:#DF2A3F;background-color:#FFFFFF;">æ•°æ®åˆ†å¸ƒä¸å‡åŒ€ï¼š</font>****<font style="color:#000000;background-color:#FFFFFF;">å¦‚æœæŸ¥è¯¢çš„åˆ—å€¼</font>****<font style="color:#74B602;background-color:#FFFFFF;">åˆ†å¸ƒä¸å‡åŒ€</font>****<font style="color:#000000;background-color:#FFFFFF;">ï¼Œä¾‹å¦‚åªæœ‰å°‘æ•°å‡ ä¸ªå€¼å‡ºç°çš„é¢‘ç‡å¾ˆé«˜ï¼Œç´¢å¼•çš„</font>****<font style="color:#74B602;background-color:#FFFFFF;">é€‰æ‹©æ€§å°±ä¼šé™ä½</font>****<font style="color:#000000;background-color:#FFFFFF;">ï¼Œä»è€Œå¯¼è‡´ç´¢å¼•å¤±æ•ˆã€‚</font>**

# **<font style="color:#ECAA04;background-color:#FFFFFF;">ç´¢å¼•çš„è®¾è®¡åŸåˆ™</font>**
**<font style="color:#000000;background-color:#FFFFFF;">åœ¨è®¾è®¡ç´¢å¼•æ—¶ï¼Œéœ€è¦è€ƒè™‘ä»¥ä¸‹å…­ä¸ªåŸåˆ™æ¥æé«˜æŸ¥è¯¢æ€§èƒ½å’Œé™ä½æ•°æ®åº“è´Ÿè½½ï¼š</font>**

![ç”»æ¿](./img/hATw4O-knQXenPBo/1699429805950-6a4ccf50-0ff4-4625-8f70-1bb504bf5ddc-689920.jpeg)

1. **<font style="color:#DF2A3F;background-color:#FFFFFF;">é€‰æ‹©é€‚å½“çš„åˆ—è¿›è¡Œç´¢å¼•ï¼š</font>****<font style="color:#000000;background-color:#FFFFFF;">é€‰æ‹©é‚£äº›</font>****<font style="color:#74B602;background-color:#FFFFFF;">ç»å¸¸è¢«ç”¨äºæŸ¥è¯¢æ¡ä»¶</font>****<font style="color:#000000;background-color:#FFFFFF;">ã€</font>****<font style="color:#74B602;background-color:#FFFFFF;">è¿æ¥æ“ä½œå’Œæ’åºçš„åˆ—</font>****<font style="color:#000000;background-color:#FFFFFF;">è¿›è¡Œç´¢å¼•ã€‚é€šå¸¸æ¥è¯´ï¼Œé€‰æ‹©å…·æœ‰é«˜é€‰æ‹©æ€§ï¼ˆå³æ•°æ®åˆ†å¸ƒè¾ƒå‡åŒ€ï¼‰çš„åˆ—ä½œä¸ºç´¢å¼•åˆ—å¯ä»¥æé«˜ç´¢å¼•çš„æ•ˆç‡ã€‚</font>**
2. **<font style="color:#DF2A3F;background-color:#FFFFFF;">è€ƒè™‘æŸ¥è¯¢ç±»å‹ï¼š</font>****<font style="color:#000000;background-color:#FFFFFF;">æ ¹æ®å¸¸è§çš„æŸ¥è¯¢æ¨¡å¼å’Œæ€§èƒ½éœ€æ±‚ï¼Œ</font>****<font style="color:#74B602;background-color:#FFFFFF;">é€‰æ‹©åˆé€‚çš„ç´¢å¼•ç±»å‹</font>****<font style="color:#000000;background-color:#FFFFFF;">ã€‚ä¾‹å¦‚ï¼Œå¯¹äº</font>****<font style="color:#117CEE;background-color:#FFFFFF;">èŒƒå›´æŸ¥è¯¢</font>****<font style="color:#000000;background-color:#FFFFFF;">ï¼Œ</font>****<font style="color:#117CEE;background-color:#FFFFFF;">Bæ ‘ç´¢å¼•</font>****<font style="color:#000000;background-color:#FFFFFF;">å¯èƒ½æ›´é€‚åˆï¼›å¯¹äº</font>****<font style="color:#117CEE;background-color:#FFFFFF;">å…¨æ–‡æœç´¢</font>****<font style="color:#000000;background-color:#FFFFFF;">ï¼Œ</font>****<font style="color:#117CEE;background-color:#FFFFFF;">å…¨æ–‡ç´¢å¼•</font>****<font style="color:#000000;background-color:#FFFFFF;">å¯èƒ½æ›´åˆé€‚ã€‚</font>**
3. **<font style="color:#DF2A3F;background-color:#FFFFFF;">é¿å…è¿‡å¤šçš„ç´¢å¼•ï¼š</font>****<font style="color:#000000;background-color:#FFFFFF;">è¿‡å¤šçš„ç´¢å¼•ä¼š</font>****<font style="color:#117CEE;background-color:#FFFFFF;">å¢åŠ å†™æ“ä½œçš„å¼€é”€</font>****<font style="color:#000000;background-color:#FFFFFF;">ï¼Œå¹¶å ç”¨æ›´å¤šçš„å­˜å‚¨ç©ºé—´ã€‚å› æ­¤ï¼Œéœ€è¦æƒè¡¡ç´¢å¼•çš„æ•°é‡å’Œæ€§èƒ½éœ€æ±‚ï¼Œé¿å…è¿‡åº¦ç´¢å¼•ã€‚</font>**

![1699278895919-1125bd5c-f1e6-43d5-83ba-c1e795e542c6.png](./img/hATw4O-knQXenPBo/1699278895919-1125bd5c-f1e6-43d5-83ba-c1e795e542c6-705450.png)

4. **<font style="color:#DF2A3F;background-color:#FFFFFF;">æ³¨æ„ç´¢å¼•çš„ç»´æŠ¤æˆæœ¬ï¼š</font>****<font style="color:#117CEE;background-color:#FFFFFF;">ç´¢å¼•çš„åˆ›å»ºå’Œç»´æŠ¤ä¼šå¸¦æ¥é¢å¤–çš„å¼€é”€</font>****<font style="color:#000000;background-color:#FFFFFF;">ï¼ŒåŒ…æ‹¬ç£ç›˜ç©ºé—´ã€CPUå’Œå†…å­˜èµ„æºçš„æ¶ˆè€—ã€‚å› æ­¤ï¼Œéœ€è¦ç»¼åˆè€ƒè™‘ç´¢å¼•çš„æ€§èƒ½æ”¶ç›Šå’Œç»´æŠ¤æˆæœ¬ï¼Œé¿å…è¿‡åº¦ç´¢å¼•ã€‚</font>**
5. **<font style="color:#DF2A3F;background-color:#FFFFFF;">è”åˆç´¢å¼•çš„ä½¿ç”¨ï¼š</font>****<font style="color:#74B602;background-color:#FFFFFF;">è”åˆç´¢å¼•å¯ä»¥åŒ…å«å¤šä¸ªåˆ—</font>****<font style="color:#000000;background-color:#FFFFFF;">ï¼Œé€šè¿‡å¤šä¸ªåˆ—çš„ç»„åˆæ¥åˆ›å»ºç´¢å¼•ã€‚åœ¨åˆ›å»ºè”åˆç´¢å¼•æ—¶ï¼Œéœ€è¦</font>****<font style="color:#117CEE;background-color:#FFFFFF;">æ ¹æ®æŸ¥è¯¢çš„é¢‘ç‡</font>****<font style="color:#000000;background-color:#FFFFFF;">å’Œé¡ºåºé€‰æ‹©åˆé€‚çš„åˆ—é¡ºåºã€‚å°†æœ€å¸¸ç”¨çš„åˆ—æ”¾åœ¨å‰é¢å¯ä»¥æé«˜ç´¢å¼•çš„æ•ˆæœã€‚</font>**

![1680414456643-db561b76-ec69-430a-9b3d-7bee93b2a498.jpeg](./img/hATw4O-knQXenPBo/1680414456643-db561b76-ec69-430a-9b3d-7bee93b2a498-487646.jpeg)

6. **<font style="color:#DF2A3F;background-color:#FFFFFF;">å®šæœŸä¼˜åŒ–å’Œé‡å»ºç´¢å¼•ï¼š</font>****<font style="color:#000000;background-color:#FFFFFF;">éšç€æ•°æ®çš„å˜åŒ–ï¼Œ</font>****<font style="color:#74B602;background-color:#FFFFFF;">ç´¢å¼•çš„æ•ˆæœå¯èƒ½ä¼šä¸‹é™</font>****<font style="color:#000000;background-color:#FFFFFF;">ã€‚å› æ­¤ï¼Œéœ€è¦å®šæœŸå¯¹ç´¢å¼•è¿›è¡Œä¼˜åŒ–å’Œé‡å»ºï¼Œä»¥ä¿æŒç´¢å¼•çš„æœ€ä½³çŠ¶æ€ã€‚</font>**

**<font style="color:#000000;background-color:#FFFFFF;">è¯·æ³¨æ„ï¼Œè¿™äº›åŸåˆ™æ˜¯ä¸€èˆ¬æ€§çš„æŒ‡å¯¼æ–¹é’ˆï¼Œå…·ä½“çš„ç´¢å¼•è®¾è®¡è¿˜éœ€è¦æ ¹æ®åº”ç”¨ç¨‹åºçš„éœ€æ±‚ã€æ•°æ®åº“å¼•æ“çš„ç‰¹æ€§å’Œæ•°æ®çš„ç‰¹ç‚¹æ¥è¿›è¡Œã€‚åœ¨å®é™…è®¾è®¡ä¸­ï¼Œå¯ä»¥ä½¿ç”¨æ•°æ®åº“æ€§èƒ½ç›‘æ§å·¥å…·æ¥è¯„ä¼°ç´¢å¼•çš„æ•ˆæœï¼Œå¹¶æ ¹æ®ç»“æœè¿›è¡Œç›¸åº”çš„ä¼˜åŒ–å’Œè°ƒæ•´ã€‚</font>**

# <font style="color:#ECAA04;background-color:#FFFFFF;">Mysqlæ…¢æŸ¥è¯¢è¯¥å¦‚ä½•ä¼˜åŒ–</font>
**<font style="color:#000000;background-color:#FFFFFF;">è¦ä¼˜åŒ–MySQLçš„æ…¢æŸ¥è¯¢ï¼Œå¯ä»¥é‡‡å–ä»¥ä¸‹ä¸€äº›æ–¹æ³•ï¼š</font>**

1. **<font style="color:#DF2A3F;background-color:#FFFFFF;">ä½¿ç”¨åˆé€‚çš„ç´¢å¼•ï¼š</font>****<font style="color:#000000;background-color:#FFFFFF;">é€šè¿‡</font>****<font style="color:#74B602;background-color:#FFFFFF;">åˆ†ææŸ¥è¯¢è¯­å¥å’Œæ•°æ®è¡¨ç»“æ„</font>****<font style="color:#000000;background-color:#FFFFFF;">ï¼Œç¡®å®šæ˜¯å¦å­˜åœ¨éœ€è¦</font>****<font style="color:#74B602;background-color:#FFFFFF;">åˆ›å»ºæˆ–è°ƒæ•´</font>****<font style="color:#000000;background-color:#FFFFFF;">çš„ç´¢å¼•ã€‚ç´¢å¼•å¯ä»¥åŠ é€ŸæŸ¥è¯¢è¿‡ç¨‹ï¼Œæé«˜æŸ¥è¯¢æ€§èƒ½ã€‚ç¡®ä¿ç´¢å¼•è¦†ç›–å°½å¯èƒ½å¤šçš„æŸ¥è¯¢æ¡ä»¶ï¼Œé¿å…å…¨è¡¨æ‰«æã€‚</font>**
2. **<font style="color:#DF2A3F;background-color:#FFFFFF;">ä¼˜åŒ–æŸ¥è¯¢è¯­å¥ï¼š</font>****<font style="color:#000000;background-color:#FFFFFF;">æ£€æŸ¥æŸ¥è¯¢è¯­å¥ï¼Œç¡®ä¿å®ƒä»¬æ˜¯æœ€ä¼˜çš„ã€‚</font>****<font style="color:#74B602;background-color:#FFFFFF;">é¿å…ä¸å¿…è¦</font>****<font style="color:#000000;background-color:#FFFFFF;">çš„å…³è”æ“ä½œï¼ˆJOINï¼‰ï¼Œ</font>****<font style="color:#74B602;background-color:#FFFFFF;">ä½¿ç”¨åˆé€‚çš„</font>****<font style="color:#000000;background-color:#FFFFFF;">è¿æ¥ç±»å‹ä»£æ›¿ï¼ˆINNER JOINã€LEFT JOINç­‰ï¼‰ï¼›</font>****<font style="color:#74B602;background-color:#FFFFFF;">é¿å…</font>****<font style="color:#000000;background-color:#FFFFFF;">ä½¿ç”¨å­æŸ¥è¯¢ã€ORæ“ä½œç¬¦ã€ä¸ç­‰äºç­‰ã€‚</font>**
3. **<font style="color:#DF2A3F;background-color:#FFFFFF;">æ•°æ®åº“è¡¨ä¼˜åŒ–ï¼š</font>****<font style="color:#000000;background-color:#FFFFFF;">å¯¹äº</font>****<font style="color:#74B602;background-color:#FFFFFF;">é¢‘ç¹æŸ¥è¯¢çš„è¡¨</font>****<font style="color:#000000;background-color:#FFFFFF;">ï¼Œå¯ä»¥è€ƒè™‘</font>****<font style="color:#74B602;background-color:#FFFFFF;">è¿›è¡Œåˆ†åº“æˆ–åˆ†è¡¨</font>****<font style="color:#000000;background-color:#FFFFFF;">æ“ä½œï¼Œå°†æ•°æ®åˆ†æ•£å­˜å‚¨ï¼Œ</font>****<font style="color:#74B602;background-color:#FFFFFF;">æé«˜æŸ¥è¯¢æ•ˆç‡</font>****<font style="color:#000000;background-color:#FFFFFF;">ã€‚</font>**
4. **<font style="color:#DF2A3F;background-color:#FFFFFF;">ä¼˜åŒ–æ•°æ®åº“é…ç½®ï¼š</font>****<font style="color:#000000;background-color:#FFFFFF;">æ ¹æ®æœåŠ¡å™¨çš„ç¡¬ä»¶èµ„æºå’Œåº”ç”¨éœ€æ±‚ï¼Œ</font>****<font style="color:#117CEE;background-color:#FFFFFF;">è°ƒæ•´MySQLçš„é…ç½®å‚æ•°</font>****<font style="color:#000000;background-color:#FFFFFF;">ï¼Œä¾‹å¦‚ç¼“å†²åŒºå¤§å°ã€å¹¶å‘è¿æ¥æ•°ã€æŸ¥è¯¢ç¼“å­˜ç­‰ã€‚</font>**
5. **<font style="color:#DF2A3F;background-color:#FFFFFF;">ä½¿ç”¨ç¼“å­˜æŠ€æœ¯ï¼š</font>****<font style="color:#000000;background-color:#FFFFFF;">å¯¹äºä¸€äº›ç›¸å¯¹ç¨³å®šçš„æŸ¥è¯¢ç»“æœï¼Œå¯ä»¥è€ƒè™‘ä½¿ç”¨ç¼“å­˜æŠ€æœ¯ï¼Œå¦‚</font>****<font style="color:#117CEE;background-color:#FFFFFF;">Redisã€Memcached</font>****<font style="color:#000000;background-color:#FFFFFF;">ç­‰ï¼Œå‡å°‘å¯¹æ•°æ®åº“çš„è®¿é—®ï¼Œæé«˜è¯»å–æ€§èƒ½ã€‚</font>**

# <font style="color:#ECAA04;background-color:#FFFFFF;">äº‹åŠ¡çš„åŸºæœ¬ç‰¹æ€§å’Œéš”ç¦»çº§åˆ«</font>
**<font style="color:#117CEE;background-color:#FFFFFF;">äº‹åŠ¡4å¤§ç‰¹æ€§(ACID)</font>****<font style="background-color:#FFFFFF;">ï¼šåŸå­æ€§ã€ä¸€è‡´æ€§ã€éš”ç¦»æ€§ã€æŒä¹…æ€§ </font>**

+ **<font style="color:#DF2A3F;background-color:#FFFFFF;">åŸå­æ€§ï¼ˆAtomicityï¼‰ï¼š</font>****<font style="background-color:#FFFFFF;">äº‹åŠ¡æ˜¯ä¸å¯åˆ†å‰²çš„å·¥ä½œå•å…ƒï¼Œ</font>****<font style="color:#74B602;background-color:#FFFFFF;">è¦ä¹ˆå…¨éƒ¨æ‰§è¡ŒæˆåŠŸï¼Œè¦ä¹ˆå…¨éƒ¨å¤±è´¥</font>****<font style="background-color:#FFFFFF;">ã€‚å¦‚æœäº‹åŠ¡ä¸­çš„ä»»ä½•ä¸€ä¸ªæ“ä½œå¤±è´¥ï¼Œæ•´ä¸ªäº‹åŠ¡ä¼šè¢«å›æ»šï¼Œä»¥ç¡®ä¿æ•°æ®çš„ä¸€è‡´æ€§ã€‚åŸå­æ€§ä¿è¯äº†äº‹åŠ¡çš„å®Œæ•´æ€§ã€‚</font>**
+ **<font style="color:#DF2A3F;background-color:#FFFFFF;">ä¸€è‡´æ€§ï¼ˆConsistencyï¼‰ï¼š</font>****<font style="background-color:#FFFFFF;">äº‹åŠ¡åœ¨</font>****<font style="color:#74B602;background-color:#FFFFFF;">æ‰§è¡Œå‰å’Œæ‰§è¡Œå</font>****<font style="background-color:#FFFFFF;">ï¼Œæ•°æ®åº“</font>****<font style="color:#74B602;background-color:#FFFFFF;">å¿…é¡»ä¿æŒä¸€è‡´</font>****<font style="background-color:#FFFFFF;">çŠ¶æ€ã€‚è¿™æ„å‘³ç€äº‹åŠ¡å°†æ•°æ®åº“ä»ä¸€ä¸ªä¸€è‡´çŠ¶æ€è½¬å˜ä¸ºå¦ä¸€ä¸ªä¸€è‡´çŠ¶æ€ã€‚å¦‚æœä¸€ä¸ªäº‹åŠ¡æ‰§è¡Œè¿‡ç¨‹ä¸­å‘ç”Ÿé”™è¯¯ï¼Œæ•°æ®åº“å°†è¢«å›æ»šåˆ°äº‹åŠ¡å¼€å§‹å‰çš„çŠ¶æ€ã€‚</font>**
+ **<font style="color:#DF2A3F;background-color:#FFFFFF;">éš”ç¦»æ€§ï¼ˆIsolationï¼‰ï¼š</font>****<font style="background-color:#FFFFFF;">éš”ç¦»æ€§</font>****<font style="color:#74B602;background-color:#FFFFFF;">ç¡®ä¿å¤šä¸ªäº‹åŠ¡å¯ä»¥å¹¶å‘æ‰§è¡Œ</font>****<font style="background-color:#FFFFFF;">ï¼Œè€Œ</font>****<font style="color:#74B602;background-color:#FFFFFF;">ä¸ä¼šç›¸äº’å¹²æ‰°</font>****<font style="background-color:#FFFFFF;">ã€‚æ¯ä¸ªäº‹åŠ¡éƒ½åº”è¯¥æ„Ÿè§‰å°±åƒå®ƒæ˜¯å”¯ä¸€è¿è¡Œçš„ï¼Œå³ä½¿åœ¨å¤šä¸ªäº‹åŠ¡å¹¶å‘æ‰§è¡Œçš„æƒ…å†µä¸‹ã€‚éš”ç¦»çº§åˆ«æ§åˆ¶äº†ä¸åŒäº‹åŠ¡ä¹‹é—´çš„å¯è§æ€§ã€‚</font>**
+ **<font style="color:#DF2A3F;background-color:#FFFFFF;">æŒä¹…æ€§ï¼ˆDurabilityï¼‰ï¼š</font>****<font style="background-color:#FFFFFF;">ä¸€æ—¦äº‹åŠ¡æäº¤ï¼Œå…¶å¯¹æ•°æ®åº“æ‰€åšçš„æ›´æ”¹åº”è¯¥æ˜¯æ°¸ä¹…æ€§çš„ï¼Œå³ä½¿</font>****<font style="color:#74B602;background-color:#FFFFFF;">ç³»ç»Ÿå´©æºƒæˆ–é‡å¯</font>****<font style="background-color:#FFFFFF;">ï¼Œ</font>****<font style="color:#74B602;background-color:#FFFFFF;">æ›´æ”¹ä¹Ÿä¸åº”ä¸¢å¤±</font>****<font style="background-color:#FFFFFF;">ã€‚æ•°æ®åº“ç³»ç»Ÿé€šå¸¸å°†äº‹åŠ¡çš„æ›´æ”¹è®°å½•åˆ°æŒä¹…æ€§å­˜å‚¨ä»‹è´¨ï¼Œå¦‚ç£ç›˜ï¼Œä»¥ç¡®ä¿æŒä¹…æ€§ã€‚</font>**

**<font style="color:#117CEE;background-color:#FFFFFF;">éš”ç¦»çº§åˆ«æ˜¯äº‹åŠ¡éš”ç¦»æ€§çš„å››ç§çº§åˆ«</font>****<font style="background-color:#FFFFFF;">ï¼Œä»ä½åˆ°é«˜ï¼Œä¾æ¬¡ä¸ºï¼š</font>**

+ **<font style="color:#DF2A3F;background-color:#FFFFFF;">è¯»æœªæäº¤ï¼ˆRead Uncommittedï¼‰ï¼š</font>****<font style="background-color:#FFFFFF;">å…è®¸ä¸€ä¸ªäº‹åŠ¡å¯ä»¥è¯»å–å¦ä¸€ä¸ªäº‹åŠ¡æœªæäº¤çš„æ•°æ®ã€‚è¿™æ˜¯æœ€ä½çº§åˆ«çš„éš”ç¦»ï¼Œå¯èƒ½ä¼šå¯¼è‡´è„è¯»ã€ä¸å¯é‡å¤è¯»å’Œå¹»è¯»ã€‚</font>**

```plsql
DROP TABLE test;
CREATE TABLE test (id INT PRIMARY KEY, name VARCHAR(20), balance INT);
INSERT INTO test VALUES (1, 'Alice', 1000);
```

+ <font style="color:rgb(38, 38, 38);background-color:#FFFFFF;">äº‹åŠ¡Aä¿®æ”¹balanceå¹¶ä¸”ä¸æäº¤äº‹åŠ¡ï¼Œäº‹åŠ¡Bè¯»å–balanceå€¼ä¸º900ï¼›</font>
+ <font style="color:rgb(38, 38, 38);background-color:#FFFFFF;">å¦‚æœæ­¤æ—¶äº‹åŠ¡Aå›æ»šæ•°æ®ï¼Œäº‹åŠ¡Bè¯»å–balanceå€¼ä¸º1000ï¼ˆè„è¯»ï¼‰ï¼›</font>

```plsql
# äº‹åŠ¡A
set tx_isolation = 'read-uncommitted';
BEGIN;
UPDATE test SET balance = balance - 100 WHERE id = 1;
SELECT balance FROM test WHERE id = 1;

# @1
rollback
COMMIT;

# äº‹åŠ¡B
set tx_isolation = 'read-uncommitted';
BEGIN;
SELECT balance FROM test WHERE id = 1;

# @1:rollbackå
SELECT balance FROM test WHERE id = 1;
commit;
```

+ **<font style="color:#DF2A3F;background-color:#FFFFFF;">è¯»å·²æäº¤ï¼ˆRead Committedï¼‰ï¼š</font>****<font style="background-color:#FFFFFF;">ä¸€ä¸ªäº‹åŠ¡åªèƒ½è¯»å–å·²ç»æäº¤çš„æ•°æ®ã€‚è¿™å¯ä»¥é¿å…è„è¯»ï¼Œä½†ä»ç„¶å…è®¸ä¸å¯é‡å¤è¯»å’Œå¹»è¯»ã€‚</font>**
+ <font style="color:rgb(38, 38, 38);background-color:#FFFFFF;">äº‹åŠ¡Aä¿®æ”¹balanceå¹¶ä¸”ä¸æäº¤äº‹åŠ¡ï¼Œäº‹åŠ¡Bè¯»å–balanceä¸º1000ï¼›å½“äº‹åŠ¡Aæäº¤åï¼Œäº‹åŠ¡Bè¯»å–balanceå€¼ä¸º900ï¼›</font>
+ <font style="color:rgb(38, 38, 38);background-color:#FFFFFF;">å†é‡æ–°å¼€å¯äº‹åŠ¡Aä¿®æ”¹balanceå¹¶æäº¤äº‹åŠ¡ï¼Œäº‹åŠ¡Bä¸­åœ¨è¯»å–balanceå€¼ä¸º800(æ•´ä¸ªè¿‡ç¨‹äº‹åŠ¡Béƒ½ä¸æäº¤)ï¼ˆä¸å¯é‡å¤è¯»ï¼‰ï¼›</font>

```plsql
update test set balance = 1000 where id = 1;
# äº‹åŠ¡A
set tx_isolation = 'read-committed';
BEGIN;
UPDATE test SET balance = balance - 100 WHERE id = 1;
SELECT balance FROM test WHERE id = 1;
COMMIT;

# @2ï¼šå†æ¬¡ä¿®æ”¹balanceå¹¶æäº¤äº‹åŠ¡
BEGIN;
UPDATE test SET balance = balance - 100 WHERE id = 1;
SELECT balance FROM test WHERE id = 1;
COMMIT;

# äº‹åŠ¡B
set tx_isolation = 'read-committed';
BEGIN;
# äº‹åŠ¡Aæäº¤å‰
SELECT balance FROM test WHERE id = 1;

# äº‹åŠ¡Aæäº¤å
SELECT balance FROM test WHERE id = 1;

# @2ï¼šå†æ¬¡æŸ¥è¯¢balance
SELECT balance FROM test WHERE id = 1;
commit;
```

+ **<font style="color:#DF2A3F;background-color:#FFFFFF;">å¯é‡å¤è¯»ï¼ˆRepeatable Readï¼‰ï¼š</font>****<font style="background-color:#FFFFFF;">ä¸€ä¸ªäº‹åŠ¡åœ¨å…¶ç”Ÿå‘½å‘¨æœŸå†…çœ‹åˆ°çš„æ•°æ®ä¿æŒä¸€è‡´ã€‚è¿™å¯ä»¥é¿å…è„è¯»å’Œä¸å¯é‡å¤è¯»ï¼Œä½†ä»ç„¶å…è®¸å¹»è¯»ã€‚</font>**
+ <font style="color:rgb(38, 38, 38);background-color:#FFFFFF;">äº‹åŠ¡Aä¿®æ”¹balanceå¹¶ä¸”ä¸æäº¤äº‹åŠ¡ï¼Œäº‹åŠ¡Bè¯»å–balanceä¸º1000ï¼›å½“äº‹åŠ¡Aæäº¤åï¼Œäº‹åŠ¡Bè¯»å–balanceå€¼ä¸º1000ï¼›</font>
+ <font style="color:rgb(38, 38, 38);background-color:#FFFFFF;">å¼€å¯äº‹åŠ¡Aä¿®æ”¹balanceå¹¶æäº¤äº‹åŠ¡ï¼Œäº‹åŠ¡Bä¸­åœ¨è¯»å–balanceå€¼ä¸º1000ï¼ˆå¯é‡å¤è¯»ï¼‰(æ•´ä¸ªè¿‡ç¨‹äº‹åŠ¡Béƒ½ä¸æäº¤)ï¼›</font>
+ <font style="color:rgb(38, 38, 38);background-color:#FFFFFF;">å¼€å¯äº‹åŠ¡Aæ’å…¥ä¸º2çš„è®°å½•ï¼Œäº‹åŠ¡Bæ— æ³•è¯»å–åˆ°2çš„è®°å½•ï¼Œæ­¤æ—¶ä¿®æ”¹idä¸º2balance+1000ï¼Œå¯ä»¥ä¿®æ”¹æˆåŠŸï¼Œé‡æ–°è¯»å–ä¸º2çš„è®°å½•balanceä¸º3000ï¼ˆå¹»è¯»ï¼‰(æ•´ä¸ªè¿‡ç¨‹äº‹åŠ¡Béƒ½ä¸æäº¤)</font>

```plsql
update test set balance = 1000 where id = 1;
# äº‹åŠ¡A
set tx_isolation = 'repeatable-read';
BEGIN;
UPDATE test SET balance = balance - 100 WHERE id = 1;
SELECT balance FROM test WHERE id = 1;
COMMIT;

# @1:å†æ¬¡ä¿®æ”¹balance
BEGIN;
UPDATE test SET balance = balance - 100 WHERE id = 1;
SELECT balance FROM test WHERE id = 1;
COMMIT;

# @2:æ’å…¥id:2è®°å½•
BEGIN;
INSERT INTO test VALUES (2, 'Alice2', 2000);
COMMIT;

# äº‹åŠ¡B
set tx_isolation = 'repeatable-read';
BEGIN;
# äº‹åŠ¡Aæäº¤å‰
SELECT balance FROM test WHERE id = 1;

# äº‹åŠ¡Aæäº¤å
SELECT balance FROM test WHERE id = 1;

# @1:å†æ¬¡æŸ¥è¯¢balance
SELECT balance FROM test WHERE id = 1;

# @2:æŸ¥è¯¢id:2çš„è®°å½•
SELECT balance FROM test WHERE id = 2;

# ä¿®æ”¹id:2çš„balanceï¼Œä¿®æ”¹æˆåŠŸ
update test set balance = balance + 1000 where id = 2;

# æŸ¥è¯¢id:2çš„è®°å½•
SELECT balance FROM test WHERE id = 2;
commit;
```

+ **<font style="color:#DF2A3F;background-color:#FFFFFF;">ä¸²è¡ŒåŒ–ï¼ˆSerializableï¼‰ï¼š</font>****<font style="background-color:#FFFFFF;">æœ€é«˜çº§åˆ«çš„éš”ç¦»ï¼Œè¦æ±‚äº‹åŠ¡æŒ‰é¡ºåºè¿è¡Œï¼Œå½¼æ­¤ä¸ä¼šç›¸äº’å¹²æ‰°ã€‚è¿™å¯ä»¥é¿å…è„è¯»ã€ä¸å¯é‡å¤è¯»å’Œå¹»è¯»ï¼Œä½†å¯èƒ½ä¼šå¯¼è‡´æ€§èƒ½ä¸‹é™ï¼Œå› ä¸ºäº‹åŠ¡å¿…é¡»æŒ‰é¡ºåºæ‰§è¡Œã€‚</font>**

```plsql
update test set balance = 1000 where id = 1;
# äº‹åŠ¡A
set tx_isolation = 'serializable';
BEGIN;
UPDATE test SET balance = balance - 100 WHERE id = 1;
COMMIT;

# äº‹åŠ¡B
set tx_isolation = 'serializable';
BEGIN;
SELECT balance FROM test WHERE id = 1;
commit;
```

# <font style="color:#ECAA04;background-color:#FFFFFF;">ä»€ä¹ˆæ˜¯è„è¯»ã€å¹»è¯»ã€ä¸å¯é‡å¤è¯»ï¼Ÿ</font>
**<font style="background-color:#FFFFFF;">è„è¯»ã€å¹»è¯»å’Œä¸å¯é‡å¤è¯»æ˜¯æ•°æ®åº“</font>****<font style="color:#74B602;background-color:#FFFFFF;">äº‹åŠ¡éš”ç¦»çº§åˆ«</font>****<font style="background-color:#FFFFFF;">ä¸­çš„</font>****<font style="color:#74B602;background-color:#FFFFFF;">ä¸‰ç§å¸¸è§é—®é¢˜ã€‚</font>**

+ **<font style="color:#DF2A3F;background-color:#FFFFFF;">è„è¯»ï¼ˆDirty Readsï¼‰ï¼š</font>****<font style="color:rgb(38, 38, 38);background-color:#FFFFFF;">äº‹åŠ¡Aè¯»å–åˆ°äº†äº‹åŠ¡Bå·²ç»ä¿®æ”¹ä½†å°šæœªæäº¤çš„æ•°æ®ã€‚</font>**
+ **<font style="color:#DF2A3F;background-color:#FFFFFF;">ä¸å¯é‡è¯»ï¼ˆNon-Repeatable Readsï¼‰ï¼š</font>****<font style="color:rgb(38, 38, 38);background-color:#FFFFFF;">äº‹åŠ¡Aå†…éƒ¨çš„ç›¸åŒæŸ¥è¯¢è¯­å¥åœ¨ä¸åŒæ—¶åˆ»è¯»å‡ºçš„ç»“æœä¸ä¸€è‡´ã€‚</font>**
+ **<font style="color:#DF2A3F;background-color:#FFFFFF;">å¹»è¯»ï¼ˆPhantom Readsï¼‰ï¼š</font>****<font style="color:rgb(38, 38, 38);background-color:#FFFFFF;">äº‹åŠ¡Aè¯»å–åˆ°äº†äº‹åŠ¡Bæäº¤çš„æ–°å¢æ•°æ®ã€‚</font>**

| **<font style="background-color:#FFFFFF;">id</font>** | **<font style="background-color:#FFFFFF;">age</font>** |
| --- | --- |
| **<font style="background-color:#FFFFFF;">1</font>** | **<font style="background-color:#FFFFFF;">18</font>** |


| **<font style="color:rgb(38, 38, 38);background-color:#FFFFFF;">éš”ç¦»çº§åˆ«</font>****<font style="color:rgb(38, 38, 38);background-color:#FFFFFF;">   </font>** | **<font style="color:rgb(38, 38, 38);background-color:#FFFFFF;">å¹¶å‘é—®é¢˜</font>****<font style="color:rgb(38, 38, 38);background-color:#FFFFFF;">   </font>** | **<font style="color:rgb(38, 38, 38);background-color:#FFFFFF;">é€‚ç”¨åœºæ™¯</font>****<font style="color:rgb(38, 38, 38);background-color:#FFFFFF;">   </font>** | **<font style="color:rgb(38, 38, 38);background-color:#FFFFFF;">éš”ç¦»çº§åˆ«ä»ä¸Šå¾€ä¸‹ï¼Œç”±ä½åˆ°é«˜ã€‚</font>****<font style="color:rgb(38, 38, 38);background-color:#FFFFFF;">   </font>****<font style="color:rgb(38, 38, 38);background-color:#FFFFFF;">éš”ç¦»çº§åˆ«è¶Šé«˜ï¼Œäº‹åŠ¡çš„å¹¶å‘æ€§èƒ½å°±è¶Šä½ã€‚</font>****<font style="color:rgb(38, 38, 38);background-color:#FFFFFF;">   </font>** |
| --- | --- | --- | --- |
| **<font style="color:rgb(38, 38, 38);background-color:#FFFFFF;">è¯»æœªæäº¤ï¼ˆread-uncommittedï¼‰</font>****<font style="color:rgb(38, 38, 38);background-color:#FFFFFF;">   </font>** | **<font style="color:rgb(38, 38, 38);background-color:#FFFFFF;">å¯èƒ½ä¼šå¯¼è‡´è„è¯»ã€å¹»è¯»æˆ–ä¸å¯é‡å¤è¯» </font>****<font style="color:rgb(38, 38, 38);background-color:#FFFFFF;">   </font>** | **<font style="color:rgb(38, 38, 38);background-color:#FFFFFF;">å¹¶å‘æ€§è¦æ±‚ä¸é«˜</font>****<font style="color:rgb(38, 38, 38);background-color:#FFFFFF;">   </font>** | |
| **<font style="color:rgb(38, 38, 38);background-color:#FFFFFF;">è¯»å·²æäº¤ï¼ˆread-committedï¼‰</font>****<font style="color:rgb(38, 38, 38);background-color:#FFFFFF;">   </font>** | **<font style="color:rgb(38, 38, 38);background-color:#FFFFFF;">å¯èƒ½ä¼šå¯¼è‡´å¹»è¯»æˆ–ä¸å¯é‡å¤è¯» </font>****<font style="color:rgb(38, 38, 38);background-color:#FFFFFF;">   </font>** | **<font style="color:rgb(38, 38, 38);background-color:#FFFFFF;">å¹¶å‘æ€§è¦æ±‚è¾ƒé«˜</font>****<font style="color:rgb(38, 38, 38);background-color:#FFFFFF;">   </font>** | |
| **<font style="color:rgb(38, 38, 38);background-color:#FFFFFF;">å¯é‡å¤è¯»ï¼ˆrepeatable-readï¼‰</font>****<font style="color:rgb(38, 38, 38);background-color:#FFFFFF;">   </font>** | **<font style="color:rgb(38, 38, 38);background-color:#FFFFFF;">å¯èƒ½ä¼šå¯¼è‡´å¹»è¯» </font>****<font style="color:rgb(38, 38, 38);background-color:#FFFFFF;">   </font>** | **<font style="color:rgb(38, 38, 38);background-color:#FFFFFF;">æ•°æ®ä¸€è‡´æ€§è¦æ±‚è¾ƒé«˜</font>****<font style="color:rgb(38, 38, 38);background-color:#FFFFFF;">   </font>** | |
| **<font style="color:rgb(38, 38, 38);background-color:#FFFFFF;">å¯ä¸²è¡ŒåŒ–ï¼ˆserializableï¼‰</font>****<font style="color:rgb(38, 38, 38);background-color:#FFFFFF;">   </font>** | **<font style="color:rgb(38, 38, 38);background-color:#FFFFFF;">ä¸ä¼šäº§ç”Ÿå¹²æ‰°</font>****<font style="color:rgb(38, 38, 38);background-color:#FFFFFF;">   </font>** | **<font style="color:rgb(38, 38, 38);background-color:#FFFFFF;">æ•°æ®ä¸€è‡´æ€§è¦æ±‚éå¸¸é«˜</font>****<font style="color:rgb(38, 38, 38);background-color:#FFFFFF;">   </font>** | |


# <font style="color:#ECAA04;background-color:#FFFFFF;">MySQLçš„è¡Œçº§é”é”çš„æ˜¯ä»€ä¹ˆï¼Ÿ</font>
**<font style="color:rgb(38, 38, 38);background-color:#FFFFFF;">MySQL ä¸­è¡Œçº§é”å¯ä»¥</font>****<font style="color:#117CEE;background-color:#FFFFFF;">æ ¹æ®é”ç²’åº¦çš„ä¸åŒåˆ†æˆä¸‰ç§</font>****<font style="color:rgb(38, 38, 38);background-color:#FFFFFF;">ï¼š</font>**

+ **<font style="color:rgb(38, 38, 38);background-color:#FFFFFF;">é’ˆå¯¹</font>****<font style="color:#DF2A3F;background-color:#FFFFFF;">å•ä¸ªæ•°æ®è¡Œ</font>****<font style="color:rgb(38, 38, 38);background-color:#FFFFFF;">è¿›è¡ŒåŠ é”ï¼Œç§°ä¸º</font>****<font style="color:#DF2A3F;background-color:#FFFFFF;">è®°å½•é”</font>****<font style="color:rgb(38, 38, 38);background-color:#FFFFFF;">ã€‚</font>**
+ **<font style="color:rgb(38, 38, 38);background-color:#FFFFFF;">é’ˆå¯¹</font>****<font style="color:#DF2A3F;background-color:#FFFFFF;">æ•°æ®è¡Œçš„é—´éš™</font>****<font style="color:rgb(38, 38, 38);background-color:#FFFFFF;">è¿›è¡ŒåŠ é”ï¼Œç§°ä¸º</font>****<font style="color:#DF2A3F;background-color:#FFFFFF;">é—´éš™é”</font>****<font style="color:rgb(38, 38, 38);background-color:#FFFFFF;">ã€‚</font>**
+ **<font style="color:#DF2A3F;background-color:#FFFFFF;">è®°å½•é”å’Œé—´éš™é”çš„ç»“åˆ</font>****<font style="color:rgb(38, 38, 38);background-color:#FFFFFF;">ï¼Œé”å®šå½“å‰è®°å½•è¡Œä¸ä¸‹ä¸€æ¡è®°å½•è¡Œä¹‹é—´çš„é—´éš™ï¼Œç§°ä¸º</font>****<font style="color:#DF2A3F;background-color:#FFFFFF;">ä¸´å¥é”</font>****<font style="color:rgb(38, 38, 38);background-color:#FFFFFF;">ã€‚</font>**

**<font style="background-color:#FFFFFF;">æ‹“å±•ï¼š</font>**

```plsql
drop TABLE orders;
CREATE TABLE orders (
    order_id INT NOT NULL PRIMARY KEY,
    product_name VARCHAR(50) NOT NULL,
    quantity INT NOT NULL
)  ENGINE=InnoDB DEFAULT CHARSET=utf8;

INSERT INTO orders (
	order_id,
	product_name,
	quantity
)
VALUES
	(1, 'iPhone', 2),
	(2, 'iPad', 1),
	(3, 'MacBook', 3),
	(7, 'AirPods', 7),
	(10, 'Apple Watch', 10);
```

+ **<font style="color:#117CEE;background-color:#FFFFFF;">è®°å½•é”ï¼ˆRecord Lockï¼‰ï¼š</font>****<font style="background-color:#FFFFFF;">è®°å½•é”æ˜¯é’ˆå¯¹å•ä¸ªæ•°æ®è¡Œè¿›è¡ŒåŠ é”ï¼Œé˜²æ­¢å…¶ä»–äº‹åŠ¡ä¿®æ”¹ã€‚</font>**

**<font style="background-color:#FFFFFF;">å½“ä¸€ä¸ªäº‹åŠ¡è·å–äº†æŸä¸€è¡Œçš„è®°å½•é”åï¼Œå…¶ä»–äº‹åŠ¡</font>****<font style="color:#74B602;background-color:#FFFFFF;">æ— æ³•åŒæ—¶è·å–è¯¥è¡Œçš„è®°å½•é”</font>****<font style="background-color:#FFFFFF;">ï¼Œè®°å½•é”</font>****<font style="color:#74B602;background-color:#FFFFFF;">åªä¼šå½±å“åˆ°æ­£åœ¨æ“ä½œçš„è¡Œ</font>****<font style="background-color:#FFFFFF;">ï¼Œä¸ä¼šé˜»å¡å…¶ä»–äº‹åŠ¡å¯¹å…¶ä»–è¡Œçš„å†™æ“ä½œã€‚</font>**

**<font style="background-color:#FFFFFF;">ä¾‹å¦‚ï¼š</font>****<font style="color:rgb(225, 0, 35);background-color:#FFFFFF;">SELECT * FROM</font>****<font style="color:rgb(38, 44, 49);background-color:#FFFFFF;"> orders </font>****<font style="color:rgb(225, 0, 35);background-color:#FFFFFF;">WHERE</font>****<font style="color:rgb(38, 44, 49);background-color:#FFFFFF;"> order_id </font>****<font style="color:rgb(225, 0, 35);background-color:#FFFFFF;">= </font>****<font style="color:rgb(0, 79, 180);background-color:#FFFFFF;">2</font>****<font style="color:rgb(38, 44, 49);background-color:#FFFFFF;"> FOR </font>****<font style="color:rgb(225, 0, 35);background-color:#FFFFFF;">UPDATE</font>****<font style="color:rgb(38, 44, 49);background-color:#FFFFFF;">; </font>**

**<font style="color:rgb(38, 44, 49);background-color:#FFFFFF;">order_id = 2 çš„è¿™æ¡è®°å½•ä¼šè¿›è¡ŒåŠ é”ï¼Œé˜²æ­¢å…¶ä»–äº‹åŠ¡é’ˆå¯¹è¯¥è®°å½•è¿›è¡Œåˆ æ”¹ã€‚</font>**

![1699884606714-c5e1e33a-16b9-4683-b52f-6af59a1ce119.png](./img/hATw4O-knQXenPBo/1699884606714-c5e1e33a-16b9-4683-b52f-6af59a1ce119-095500.png)

+ **<font style="color:#117CEE;background-color:#FFFFFF;">é—´éš™é”ï¼ˆGap Lockï¼‰ï¼š</font>****<font style="background-color:#FFFFFF;">é—´éš™é”æ˜¯ç”¨äºä¿æŠ¤ä¸€ä¸ªæ•°æ®èŒƒå›´çš„é”æœºåˆ¶ï¼Œå®ƒä¼šåœ¨ç´¢å¼•èŒƒå›´å†…çš„é—´éš™ï¼ˆ</font>****<font style="color:#74B602;background-color:#FFFFFF;">ä¸¤ä¸ªç´¢å¼•å€¼ä¹‹é—´</font>****<font style="background-color:#FFFFFF;">ï¼‰ä¸Šè®¾ç½®é”ã€‚</font>**

**<font style="background-color:#FFFFFF;">å½“ä¸€ä¸ªäº‹åŠ¡è·å–äº†é—´éš™é”åï¼Œå…¶ä»–äº‹åŠ¡</font>****<font style="color:#74B602;background-color:#FFFFFF;">æ— æ³•åœ¨è¯¥åŒºé—´å†…æ’å…¥æ–°çš„æ•°æ®è¡Œ</font>****<font style="background-color:#FFFFFF;">ï¼Œä¸»è¦ç”¨äº</font>****<font style="color:#74B602;background-color:#FFFFFF;">é˜²æ­¢å¹»è¯»</font>****<font style="background-color:#FFFFFF;">ï¼ˆPhantom Readï¼‰çš„æƒ…å†µå‘ç”Ÿã€‚</font>**

**<font style="background-color:#FFFFFF;">ä¾‹å¦‚ï¼š</font>****<font style="color:rgb(225, 0, 35);background-color:#FFFFFF;">SELECT * FROM</font>****<font style="color:rgb(38, 44, 49);background-color:#FFFFFF;"> orders </font>****<font style="color:rgb(225, 0, 35);background-color:#FFFFFF;">WHERE</font>****<font style="color:rgb(38, 44, 49);background-color:#FFFFFF;"> order_id </font>****<font style="color:rgb(225, 0, 35);background-color:#FFFFFF;">= </font>****<font style="color:rgb(0, 79, 180);background-color:#FFFFFF;">8</font>****<font style="color:rgb(38, 44, 49);background-color:#FFFFFF;"> FOR </font>****<font style="color:rgb(225, 0, 35);background-color:#FFFFFF;">UPDATE</font>****<font style="color:rgb(38, 44, 49);background-color:#FFFFFF;">; </font>**

**<font style="background-color:#FFFFFF;">ç”±äº orders è¡¨ä¸­ä¸å­˜åœ¨ order_id = 8 çš„è®°å½•ï¼Œä¼šå°†</font>****<font style="color:#74B602;background-color:#FFFFFF;">åŒºé—´ (7,10) è¿›è¡ŒåŠ é”</font>****<font style="background-color:#FFFFFF;">ï¼Œ</font>****<font style="color:rgb(38, 44, 49);background-color:#FFFFFF;">é˜²æ­¢å…¶ä»–äº‹åŠ¡åœ¨è¿™ä¸ªåŒºé—´è¿›è¡Œå¢åˆ æ”¹ã€‚</font>**

![1699884707101-cba2be0f-14c0-43e3-81f0-30b3bf88d59a.png](./img/hATw4O-knQXenPBo/1699884707101-cba2be0f-14c0-43e3-81f0-30b3bf88d59a-307392.png)

+ **<font style="color:#117CEE;background-color:#FFFFFF;">ä¸´å¥é”ï¼ˆNext-Key Lockï¼‰ï¼š</font>****<font style="background-color:#FFFFFF;">ä¸´å¥é”æ˜¯ç»“åˆäº†è®°å½•é”å’Œé—´éš™é”çš„ç‰¹æ€§ï¼Œç”¨äºä¿æŠ¤ä¸€ä¸ªæ•°æ®èŒƒå›´çš„é—´éš™å’Œç´¢å¼•ä¸Šçš„æ•°æ®è¡Œã€‚</font>**

**<font style="background-color:#FFFFFF;">å®ƒä¼šåœ¨ç´¢å¼•èŒƒå›´å†…çš„é—´éš™å’Œç´¢å¼•ä¸Šçš„æ•°æ®è¡Œä¸Šè®¾ç½®é”ï¼Œ</font>****<font style="color:#74B602;background-color:#FFFFFF;">è§£å†³äº†å¹»è¯»å’Œé—´éš™æ’å…¥çš„é—®é¢˜</font>****<font style="background-color:#FFFFFF;">ã€‚</font>**

**<font style="background-color:#FFFFFF;">ä¾‹å¦‚ï¼š</font>****<font style="color:rgb(225, 0, 35);background-color:#FFFFFF;">SELECT * FROM</font>****<font style="color:rgb(38, 44, 49);background-color:#FFFFFF;"> orders </font>****<font style="color:rgb(225, 0, 35);background-color:#FFFFFF;">WHERE</font>****<font style="color:rgb(38, 44, 49);background-color:#FFFFFF;"> order_id </font>****<font style="color:rgb(225, 0, 35);background-color:#FFFFFF;">>= </font>****<font style="color:rgb(0, 79, 180);background-color:#FFFFFF;">3 </font>****<font style="color:rgb(225, 0, 35);background-color:#FFFFFF;">and</font>****<font style="color:rgb(38, 44, 49);background-color:#FFFFFF;"> order_id </font>****<font style="color:rgb(225, 0, 35);background-color:#FFFFFF;">< </font>****<font style="color:rgb(0, 79, 180);background-color:#FFFFFF;">7</font>****<font style="color:rgb(38, 44, 49);background-color:#FFFFFF;"> FOR </font>****<font style="color:rgb(225, 0, 35);background-color:#FFFFFF;">UPDATE</font>****<font style="color:rgb(38, 44, 49);background-color:#FFFFFF;">;</font>**

**<font style="color:rgb(38, 44, 49);background-color:#FFFFFF;">è¯¥ SQL å°†</font>****<font style="color:#74B602;background-color:#FFFFFF;">é”å®š [3,7) è¿™ä¸ªåŒºé—´</font>****<font style="background-color:#FFFFFF;">ï¼Œ</font>****<font style="color:rgb(38, 44, 49);background-color:#FFFFFF;">é˜²æ­¢å…¶ä»–äº‹åŠ¡é’ˆå¯¹è¯¥è®°å½•è¿›è¡Œå¢åˆ æ”¹ã€‚</font>**

![1699884778764-3026bf14-f8d0-46fc-a99b-2bb84d3a2b23.png](./img/hATw4O-knQXenPBo/1699884778764-3026bf14-f8d0-46fc-a99b-2bb84d3a2b23-661079.png)

**<font style="color:#DF2A3F;background-color:#FFFFFF;">éœ€è¦æ³¨æ„é—´éš™é”ä¸ä¸´å¥é”ï¼Œåªåœ¨ InnoDb çš„ RR éš”ç¦»çº§åˆ«ä¸‹ç”Ÿæ•ˆã€‚</font>**

# <font style="color:#ECAA04;background-color:#FFFFFF;">ä»€ä¹ˆæ˜¯æ„å‘é”ï¼Ÿ</font>
**<font style="color:rgb(38, 38, 38);background-color:#FFFFFF;">åœ¨ MySQL ä¸­è·å–ä¸€ä¸ª</font>****<font style="color:#74B602;background-color:#FFFFFF;">å…¬å…±èµ„æºæ—¶</font>****<font style="color:rgb(38, 38, 38);background-color:#FFFFFF;">ï¼Œ</font>****<font style="color:#74B602;background-color:#FFFFFF;">ä¼šå…ˆ</font>****<font style="color:rgb(38, 38, 38);background-color:#FFFFFF;">å¯¹è¯¥èµ„æºè¿›è¡Œ</font>****<font style="color:#74B602;background-color:#FFFFFF;">åŠ é”</font>****<font style="color:rgb(38, 38, 38);background-color:#FFFFFF;">æ“ä½œï¼Œå¦‚æœå¤šä¸ªäº‹åŠ¡éƒ½æ˜¯</font>****<font style="color:#74B602;background-color:#FFFFFF;">ç›´æ¥è·å–</font>****<font style="color:rgb(38, 38, 38);background-color:#FFFFFF;">èµ„æºé”ï¼Œå°±å¾ˆå¯èƒ½å‡ºç°äº’ç›¸</font>****<font style="color:#74B602;background-color:#FFFFFF;">é˜»å¡é—®é¢˜</font>****<font style="color:rgb(38, 38, 38);background-color:#FFFFFF;">ï¼Œç”šè‡³æ˜¯å‡ºç°æ­»</font>****<font style="color:#74B602;background-color:#FFFFFF;">é”é—®é¢˜</font>****<font style="color:rgb(38, 38, 38);background-color:#FFFFFF;">ã€‚</font>**

**<font style="background-color:#FFFFFF;">æ¯”å¦‚è¯´äº‹åŠ¡ A é’ˆå¯¹ Test è¡¨ä¸­çš„æŸè¡Œè®°å½•è¿›è¡Œäº†åŠ é”ï¼Œæ­¤æ—¶è¯¥æ¡è®°å½•</font>****<font style="color:#74B602;background-color:#FFFFFF;">åªèƒ½è¯»å–ä¸èƒ½ä¿®æ”¹</font>****<font style="background-color:#FFFFFF;">ã€‚</font>**

**<font style="background-color:#FFFFFF;">å¦‚æœåŒæ—¶äº‹åŠ¡ B éœ€è¦å¯¹ Test è¡¨æ·»åŠ è¡¨çº§é”ï¼Œé‚£ä¹ˆå°±éœ€è¦</font>****<font style="color:#117CEE;background-color:#FFFFFF;">éå† Test è¡¨ä¸­çš„æ‰€æœ‰æ•°æ®</font>****<font style="background-color:#FFFFFF;">çœ‹</font>****<font style="color:#117CEE;background-color:#FFFFFF;">æ˜¯å¦å­˜åœ¨</font>****<font style="background-color:#FFFFFF;">äº‹åŠ¡å·²ç»é’ˆå¯¹è¯¥è¡¨è®°å½•æ·»åŠ äº†</font>****<font style="color:#117CEE;background-color:#FFFFFF;">è¡Œçº§é”</font>****<font style="background-color:#FFFFFF;">ï¼Œé€è¡Œéå†å°±æ¯”è¾ƒæµªè´¹èµ„æºï¼Œå› æ­¤ MySQL å°±é’ˆå¯¹è¯¥é—®é¢˜å¼•å…¥äº†æ„å‘é”æœºåˆ¶ã€‚</font>**

**<font style="background-color:#FFFFFF;">å½“ä¸€ä¸ªäº‹ç‰©</font>****<font style="color:#74B602;background-color:#FFFFFF;">è·å–è¡Œçº§é”æˆ–è¡¨çº§é”æ—¶</font>****<font style="background-color:#FFFFFF;">ï¼ŒMySQL ä¼š</font>****<font style="color:#74B602;background-color:#FFFFFF;">è‡ªåŠ¨è·å–ç›¸åº”è¡¨çš„æ„å‘é”</font>****<font style="background-color:#FFFFFF;">ï¼Œæˆ‘ä»¬å¯ä»¥ç®€å•ç†è§£åœ¨</font>****<font style="color:#74B602;background-color:#FFFFFF;">è¡¨ä¸Šæœ‰ä¸€ä¸ªæ ‡å¿—ä½</font>****<font style="background-color:#FFFFFF;">ï¼Œæ ‡å¿—ç€æ˜¯å¦å·²ç»æœ‰è¡Œçº§é”æˆ–è€…æ˜¯è¡¨çº§é”äº†ã€‚</font>**

**<font style="background-color:#FFFFFF;">è¿™æ ·å…¶ä»–äº‹åŠ¡ä¹Ÿæƒ³é’ˆå¯¹è¯¥è¡¨è¿›è¡Œæ“ä½œæ—¶ï¼Œåªéœ€è¦å…ˆåˆ¤æ–­æ„å‘é”å³å¯ï¼Œå°±æ— éœ€é€è¡Œéå†ã€‚</font>**

**<font style="background-color:#FFFFFF;">åŒæ—¶æ„å‘é”ä¹Ÿåˆ†</font>****<font style="color:#DF2A3F;background-color:#FFFFFF;">æ„å‘å…±äº«é”</font>****<font style="background-color:#FFFFFF;">ä¸</font>****<font style="color:#DF2A3F;background-color:#FFFFFF;">æ„å‘æ’ä»–é”</font>****<font style="background-color:#FFFFFF;">ã€‚</font>**

+ **<font style="color:#117CEE;background-color:#FFFFFF;">æ„å‘å…±äº«é”ï¼ˆISï¼‰ï¼š</font>****<font style="color:rgb(38, 38, 38);background-color:#FFFFFF;">åœ¨ä¸€ä¸ªäº‹åŠ¡éœ€è¦å¯¹è¡¨ä¸­æŸäº›è¡Œ</font>****<font style="color:#74B602;background-color:#FFFFFF;">åŠ å…±äº«é”ï¼ˆSé”ï¼‰æ—¶</font>****<font style="color:rgb(38, 38, 38);background-color:#FFFFFF;">ï¼Œäº‹åŠ¡é¦–å…ˆéœ€è¦</font>****<font style="color:#74B602;background-color:#FFFFFF;">è·å¾—è¡¨çš„æ„å‘å…±äº«é”ï¼ˆISé”ï¼‰ã€‚</font>**
+ **<font style="color:#117CEE;background-color:#FFFFFF;">æ„å‘æ’ä»–é”ï¼ˆIXï¼‰ï¼š</font>****<font style="color:rgb(38, 38, 38);background-color:#FFFFFF;">æŒ‡çš„æ˜¯åœ¨ä¸€ä¸ªäº‹åŠ¡éœ€è¦å¯¹è¡¨ä¸­æŸäº›è¡Œ</font>****<font style="color:#74B602;background-color:#FFFFFF;">åŠ æ’å®ƒé”ï¼ˆXé”ï¼‰æ—¶</font>****<font style="color:rgb(38, 38, 38);background-color:#FFFFFF;">ï¼Œäº‹åŠ¡é¦–å…ˆéœ€è¦</font>****<font style="color:#74B602;background-color:#FFFFFF;">è·å¾—è¡¨çš„æ„å‘æ’å®ƒé”ï¼ˆIXé”ï¼‰ã€‚</font>**

**<font style="background-color:#FFFFFF;">éœ€è¦æ³¨æ„æ„å‘é”æ˜¯ä¸€ç§</font>****<font style="color:#DF2A3F;background-color:#FFFFFF;">è¾…åŠ©æ€§çš„é”</font>****<font style="background-color:#FFFFFF;">ï¼Œç”¨äº</font>****<font style="color:#DF2A3F;background-color:#FFFFFF;">åè°ƒè¡¨çº§é”å’Œè¡Œçº§é”</font>****<font style="background-color:#FFFFFF;">ä¹‹é—´çš„å…³ç³»ï¼Œå®ƒå¹¶ä¸ç›´æ¥åŠ åœ¨æ•°æ®è®°å½•ä¸Šï¼Œè€Œæ˜¯</font>****<font style="color:#DF2A3F;background-color:#FFFFFF;">åŠ åœ¨è¡¨çº§åˆ«æˆ–é¡µé¢çº§åˆ«</font>****<font style="background-color:#FFFFFF;">ä¸Šï¼Œç”¨äºæŒ‡ç¤ºäº‹åŠ¡æ¥ä¸‹æ¥å¯èƒ½ä¼šå¯¹æ•°æ®è¡Œè¿›è¡Œä½•ç§ç±»å‹çš„é”å®šæ“ä½œã€‚</font>**

# <font style="color:#ECAA04;background-color:#FFFFFF;">MySQL åŠ ç´¢å¼•ä¼šé”è¡¨å—ï¼Ÿ</font>
**<font style="color:rgb(38, 38, 38);background-color:#FFFFFF;">åœ¨</font>****<font style="color:#117CEE;background-color:#FFFFFF;"> MySQL 5.6 ç‰ˆæœ¬ä¹‹å‰</font>****<font style="color:rgb(38, 38, 38);background-color:#FFFFFF;">ï¼Œæ·»åŠ ç´¢å¼•æ—¶éœ€è¦</font>****<font style="color:#117CEE;background-color:#FFFFFF;">æ·»åŠ æ’å®ƒé”</font>****<font style="color:rgb(38, 38, 38);background-color:#FFFFFF;">ï¼Œä¹Ÿå°±æ˜¯è¯´æ·»åŠ ç´¢å¼•æ—¶</font>****<font style="color:#117CEE;background-color:#FFFFFF;">é˜»å¡å…¶ä»–æ‰€æœ‰çš„è¯»å†™æ“ä½œ</font>****<font style="color:rgb(38, 38, 38);background-color:#FFFFFF;">ã€‚</font>**

**<font style="color:rgb(38, 38, 38);background-color:#FFFFFF;">å¦‚æœæ˜¯å¤§è¡¨ï¼Œè¿™å¯èƒ½ä¼šå¯¼è‡´è¯¥è¡¨</font>****<font style="color:#74B602;background-color:#FFFFFF;">ä¼šé•¿æ—¶é—´é˜»å¡</font>****<font style="color:rgb(38, 38, 38);background-color:#FFFFFF;">ï¼Œå½±å“çœŸå®ä¸šåŠ¡å¤„ç†ï¼Œè¿™ä¹Ÿå°±æ˜¯ä¸ºä»€ä¹ˆä»¥å‰éƒ½æ˜¯å‡Œæ™¨è¿›è¡Œæ›´æ–°æ“ä½œã€‚</font>**

**<font style="color:rgb(38, 38, 38);background-color:#FFFFFF;">åœ¨ </font>****<font style="color:#74B602;background-color:#FFFFFF;">MySQL 5.6 ç‰ˆæœ¬</font>****<font style="color:rgb(38, 38, 38);background-color:#FFFFFF;">å¼•å…¥äº† </font>****<font style="color:#74B602;background-color:#FFFFFF;">online dll çš„æŠ€æœ¯ä¼˜åŒ–è¯¥é—®é¢˜</font>****<font style="color:rgb(38, 38, 38);background-color:#FFFFFF;">ï¼Œonline dll  </font>****<font style="color:#74B602;background-color:#FFFFFF;">å…è®¸åœ¨ä¸é˜»å¡å…¶ä»–äº‹åŠ¡</font>****<font style="color:rgb(38, 38, 38);background-color:#FFFFFF;">çš„æƒ…å†µä¸‹</font>****<font style="color:#74B602;background-color:#FFFFFF;">åˆ›å»ºæˆ–è€…åˆ é™¤</font>****<font style="color:rgb(38, 38, 38);background-color:#FFFFFF;">ç´¢å¼•ã€‚</font>**

**<font style="color:rgb(38, 38, 38);background-color:#FFFFFF;">åŒæ—¶ online dll å¯¹ä¸åŒçš„ ddl æ“ä½œæ”¯æŒä¹Ÿä¸åŒï¼Œå¤§å®¶å¯ä»¥çœ‹çœ‹å®˜ç½‘æä¾›çš„æ–‡æ¡£ï¼š</font>**[**<font style="color:#DF2A3F;background-color:#FFFFFF;">å®˜ç½‘online dllæ”¯æŒæè¿°</font>**](https://dev.mysql.com/doc/refman/5.7/en/innodb-online-ddl-operations.html)

![1699880355582-ae3becf0-32c5-46fc-94af-8745220783e8.png](./img/hATw4O-knQXenPBo/1699880355582-ae3becf0-32c5-46fc-94af-8745220783e8-700721.png)

**<font style="color:rgb(38, 38, 38);background-color:#FFFFFF;">è™½ç„¶ online dll é’ˆå¯¹é”è¡¨è¿›è¡Œäº†ä¼˜åŒ–ï¼Œä½†æ˜¯åœ¨æ‰§è¡Œçš„è¿‡ç¨‹ä¸­</font>****<font style="color:#74B602;background-color:#FFFFFF;">è¿˜æ˜¯ä¼šè¿›è¡Œé”è¡¨</font>****<font style="color:rgb(38, 38, 38);background-color:#FFFFFF;">çš„ã€‚åªæ˜¯ online dll çš„é”è¡¨</font>****<font style="color:#74B602;background-color:#FFFFFF;">æ—¶é—´å¤§å¤§çš„å‡å°‘</font>****<font style="color:rgb(38, 38, 38);background-color:#FFFFFF;">äº†ã€‚</font>**

**<font style="color:rgb(38, 38, 38);background-color:#FFFFFF;">å› æ­¤æˆ‘ä»¬åœ¨çº¿ä¸Šæ‰§è¡Œ ddl è¯­å¥æ—¶ï¼Œ</font>****<font style="color:#74B602;background-color:#FFFFFF;">è¿˜æ˜¯åº”å½“é¿å…</font>****<font style="color:rgb(38, 38, 38);background-color:#FFFFFF;">åœ¨ä¸šåŠ¡é«˜å³°æœŸæ‰§è¡Œï¼Œä»¥é¿å…å½±å“æ­£å¸¸ä¸šåŠ¡å¤„ç†ã€‚</font>**

**<font style="color:rgb(38, 38, 38);background-color:#FFFFFF;">è¯¦ç»†çš„è®²è§£å¤§å®¶å¯ä»¥çœ‹çœ‹è¿™è¾¹æ–‡ç« ï¼š</font>**[**<font style="color:#DF2A3F;background-color:#FFFFFF;">ã€Šæ·»åŠ ç´¢å¼•çœŸçš„ä¸ä¼šé”è¡¨å—ã€‹</font>**](https://www.yuque.com/tulingzhouyu/sfx8p0/cwhdopx7y13t3kl9?singleDoc#%20%E3%80%8A%E6%B7%BB%E5%8A%A0%E7%B4%A2%E5%BC%95%E7%9C%9F%E7%9A%84%E4%B8%8D%E4%BC%9A%E9%94%81%E8%A1%A8%E5%90%97%EF%BC%9F%E3%80%8B)

<font style="color:rgb(38, 38, 38);background-color:#FFFFFF;"></font>

# <font style="color:#ECAA04;background-color:#FFFFFF;">ä»€ä¹ˆæ˜¯æ’ä»–é”å’Œå…±äº«é”ï¼Ÿ</font>
**<font style="background-color:#FFFFFF;">æ’ä»–é”ï¼ˆExclusive Lockï¼‰å’Œå…±äº«é”ï¼ˆShared Lockï¼‰æ˜¯ä¸¤ç§å¸¸è§çš„æ•°æ®åº“é”æœºåˆ¶ï¼Œç”¨äºæ§åˆ¶å¯¹æ•°æ®çš„å¹¶å‘è®¿é—®ã€‚</font>**

1. **<font style="color:#DF2A3F;background-color:#FFFFFF;">æ’ä»–é”ï¼ˆExclusive Lockï¼‰ï¼š</font>**
    - **<font style="color:#117CEE;background-color:#FFFFFF;">æ’ä»–é”æ˜¯ä¸€ç§ç‹¬å é”ï¼Œä¹Ÿç§°ä¸ºå†™é”</font>****<font style="background-color:#FFFFFF;">ã€‚å½“ä¸€ä¸ªäº‹åŠ¡è·</font>****<font style="color:#74B602;background-color:#FFFFFF;">å–äº†æ’ä»–é”</font>****<font style="background-color:#FFFFFF;">åï¼Œå…¶ä»–äº‹åŠ¡</font>****<font style="color:#74B602;background-color:#FFFFFF;">æ— æ³•å†è·å–</font>****<font style="background-color:#FFFFFF;">è¯¥æ•°æ®é¡¹çš„ä»»ä½•é”ï¼ŒåŒ…æ‹¬å…±äº«é”å’Œæ’ä»–é”ã€‚</font>**
    - **<font style="background-color:#FFFFFF;">æ’ä»–é”</font>****<font style="color:#74B602;background-color:#FFFFFF;">é€‚ç”¨äºéœ€è¦ä¿®æ”¹æ•°æ®</font>****<font style="background-color:#FFFFFF;">çš„æ“ä½œï¼Œå®ƒç¡®ä¿åœ¨äº‹åŠ¡ä¿®æ”¹æ•°æ®æ—¶ï¼Œå…¶ä»–äº‹åŠ¡</font>****<font style="color:#74B602;background-color:#FFFFFF;">æ— æ³•è¯»å–æˆ–ä¿®æ”¹ç›¸åŒ</font>****<font style="background-color:#FFFFFF;">çš„æ•°æ®ï¼Œä»è€Œä¿è¯äº†æ•°æ®çš„ä¸€è‡´æ€§ã€‚</font>**

**<font style="background-color:#FFFFFF;">ç”¨æ³•ï¼šSELECT Â·Â·Â·Â·Â·Â· FOR UPDATE;</font>**

**<font style="background-color:#FFFFFF;">åœ¨æŸ¥è¯¢è¯­å¥åé¢æ·»åŠ  FOR UPDATE è¯­å¥ï¼ŒMySQL ä¼šå¯¹è¯¥ SQL ç»“æœé›†è®°å½•æ·»åŠ æ’å®ƒé”ï¼Œè¿™é‡Œè¾¹æ¶‰åŠåˆ°é”å‡çº§æƒ…å†µï¼Œå¦‚æœç»“æœé›†ä¸­æ— ç´¢å¼•ï¼Œåˆ™åœ¨è¡¨çº§åˆ«æ·»åŠ é”ä¹Ÿå°±æ˜¯è¡¨é”ï¼Œå¦‚æœå­˜åœ¨ç´¢å¼•ï¼Œåˆ™æ·»åŠ è¡Œçº§é”ã€‚</font>**

2. **<font style="color:#DF2A3F;background-color:#FFFFFF;">å…±äº«é”ï¼ˆShared Lockï¼‰ï¼š</font>**
    - **<font style="color:#117CEE;background-color:#FFFFFF;">å…±äº«é”æ˜¯ä¸€ç§å…±äº«è®¿é—®é”ï¼Œä¹Ÿç§°ä¸ºè¯»é”</font>****<font style="background-color:#FFFFFF;">ã€‚</font>****<font style="color:#74B602;background-color:#FFFFFF;">å¤šä¸ªäº‹åŠ¡</font>****<font style="background-color:#FFFFFF;">å¯ä»¥</font>****<font style="color:#74B602;background-color:#FFFFFF;">åŒæ—¶è·å–ç›¸åŒ</font>****<font style="background-color:#FFFFFF;">æ•°æ®é¡¹çš„å…±äº«é”ï¼Œå½¼æ­¤ä¹‹é—´</font>****<font style="color:#74B602;background-color:#FFFFFF;">ä¸ä¼šäº’æ–¥</font>****<font style="background-color:#FFFFFF;">ã€‚</font>**
    - **<font style="background-color:#FFFFFF;">å…±äº«é”</font>****<font style="color:#74B602;background-color:#FFFFFF;">é€‚ç”¨äºåªè¯»æ“ä½œ</font>****<font style="background-color:#FFFFFF;">ï¼Œå®ƒå…è®¸å¤šä¸ªäº‹åŠ¡åŒæ—¶è¯»å–ç›¸åŒçš„æ•°æ®ï¼Œæé«˜äº†å¹¶å‘æ€§èƒ½ã€‚</font>**

**<font style="background-color:#FFFFFF;">ç”¨æ³•ï¼šSELECT Â·Â·Â·Â·Â·Â· LOCK IN SHARE MODE;</font>**

**<font style="background-color:#FFFFFF;">åœ¨æŸ¥è¯¢è¯­å¥åé¢æ·»åŠ  LOCK IN SHARE MODE è¯­å¥ï¼ŒMySQL ä¼šå¯¹è¯¥ SQL </font>****<font style="color:#74B602;background-color:#FFFFFF;">ç»“æœé›†è®°å½•æ·»åŠ å…±äº«é”</font>****<font style="background-color:#FFFFFF;">ï¼Œå…è®¸å…¶ä»–äº‹åŠ¡åŒæ—¶è¯»å–è¿™äº›è®°å½•ã€‚å¦‚æœå…¶ä»–äº‹åŠ¡æ˜¯æ·»åŠ æ’ä»–é”ï¼Œåˆ™éœ€è¦ç­‰å¾…å…±äº«è¯»é”é‡Šæ”¾åæ‰èƒ½ç»§ç»­è¿›è¡Œã€‚</font>**

**<font style="color:#117CEE;background-color:#FFFFFF;">æ’ä»–é”å’Œå…±äº«é”ä¹‹é—´å­˜åœ¨äº’æ–¥å…³ç³»</font>****<font style="background-color:#FFFFFF;">ï¼Œå³å½“ä¸€ä¸ªäº‹åŠ¡æŒæœ‰æ’ä»–é”æ—¶ï¼Œå…¶ä»–äº‹åŠ¡æ— æ³•è·å–è¯¥æ•°æ®é¡¹çš„å…±äº«é”ï¼›åŒæ ·åœ°ï¼Œå½“ä¸€ä¸ªäº‹åŠ¡æŒæœ‰å…±äº«é”æ—¶ï¼Œå…¶ä»–äº‹åŠ¡æ— æ³•è·å–è¯¥æ•°æ®é¡¹çš„æ’ä»–é”ã€‚</font>**

![1699885413183-21d2039f-0dc1-4b91-bd99-d3bd839089b7.jpeg](./img/hATw4O-knQXenPBo/1699885413183-21d2039f-0dc1-4b91-bd99-d3bd839089b7-142001.jpeg)

**<font style="background-color:#FFFFFF;">Xï¼šå…±äº«é”ï¼›IXï¼šæ„å‘å…±äº«é”ï¼›Sï¼šæ’ä»–é”ï¼›ISï¼šæ„å‘æ’ä»–é”ï¼›</font>**

# <font style="color:#ECAA04;background-color:#FFFFFF;">ä»€ä¹ˆæ˜¯MySQLçš„å­—å…¸é”ï¼Ÿ</font>
**<font style="background-color:#FFFFFF;">MySQLçš„å­—å…¸é”ï¼Œä¹Ÿç§°ä¸º</font>****<font style="color:#DF2A3F;background-color:#FFFFFF;">å…ƒæ•°æ®é”ï¼ˆMDLï¼ŒMetaData Lockï¼‰</font>****<font style="background-color:#FFFFFF;">ï¼Œæ˜¯ä¸€ç§ä¸ºäº†ä¿æŠ¤æ•°æ®åº“å¯¹è±¡çš„å…ƒæ•°æ®è€Œè®¾è®¡çš„é”æœºåˆ¶ã€‚</font>**

**<font style="background-color:#FFFFFF;">åœ¨ MySQL 5.5.3 ä¹‹å‰æœ‰ä¸ª bug#989 ï¼Œå¤§æ¦‚å¾—æ“ä½œæµç¨‹å¦‚ä¸‹ï¼š</font>**

```plsql
äº‹åŠ¡A
BEGIN;
	INSERT INTO t ... ;
COMMIT; 

äº‹åŠ¡B
DROP TABLE t;
```

**<font style="background-color:#FFFFFF;">æœ€ç»ˆçš„åœ¨ binlog ä¸­è®°å½•çš„æ˜¯å…ˆåˆ é™¤è¡¨åœ¨æ’å…¥æ•°æ®ï¼Œè¿™æ ·å¤‡ä»½åº“åœ¨åŒæ­¥æ•°æ®æ—¶å°±è¢«ä¸­æ–­äº†ã€‚ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼ŒMySQL5.5.3 ç‰ˆæœ¬å¼•å…¥äº† </font>****<font style="color:#74B602;background-color:#FFFFFF;">MDL é”</font>****<font style="background-color:#FFFFFF;">ä¿æŠ¤è¡¨çš„å…ƒæ•°æ®ä¿¡æ¯ï¼Œç”¨äº</font>****<font style="color:#74B602;background-color:#FFFFFF;">è§£å†³æˆ–è€…ä¿è¯</font>****<font style="background-color:#FFFFFF;">DDLæ“ä½œä¸DMLæ“ä½œä¹‹é—´çš„ä¸€è‡´æ€§ã€‚</font>**

**<font style="background-color:#FFFFFF;">MDLæ˜¯</font>****<font style="color:#117CEE;background-color:#FFFFFF;">è¡¨çº§é”</font>****<font style="background-color:#FFFFFF;">ï¼Œæ˜¯åœ¨serverå±‚åŠ çš„ï¼Œ</font>****<font style="color:#117CEE;background-color:#FFFFFF;">é€‚ç”¨äºæ‰€æœ‰å­˜å‚¨å¼•æ“</font>****<font style="background-color:#FFFFFF;">ã€‚æ‰€æœ‰çš„</font>****<font style="color:#74B602;background-color:#FFFFFF;">dmlæ“ä½œ</font>****<font style="background-color:#FFFFFF;">éƒ½ä¼šåœ¨è¡¨ä¸ŠåŠ ä¸€ä¸ª</font>****<font style="color:#74B602;background-color:#FFFFFF;">MDLè¯»é”</font>****<font style="background-color:#FFFFFF;">ï¼›æ‰€æœ‰çš„</font>****<font style="color:#74B602;background-color:#FFFFFF;">ddlæ“ä½œ</font>****<font style="background-color:#FFFFFF;">éƒ½ä¼šåœ¨è¡¨ä¸ŠåŠ ä¸€ä¸ª</font>****<font style="color:#74B602;background-color:#FFFFFF;">MDLå†™é”</font>****<font style="background-color:#FFFFFF;">ã€‚</font>**

**<font style="background-color:#FFFFFF;">è¯»é”å’Œå†™é”çš„é˜»å¡å…³ç³»å¦‚ä¸‹ï¼š</font>**

+ **<font style="background-color:#FFFFFF;">è¯»é”å’Œå†™é”ä¹‹é—´ç›¸äº’é˜»å¡ï¼Œå³åŒä¸€ä¸ªè¡¨ä¸Šçš„</font>****<font style="color:#74B602;background-color:#FFFFFF;">dmlå’Œddlä¹‹é—´äº’ç›¸é˜»å¡</font>****<font style="background-color:#FFFFFF;">ã€‚</font>**
+ **<font style="background-color:#FFFFFF;">å†™é”å’Œå†™é”ä¹‹é—´äº’ç›¸é˜»å¡ï¼Œå³ä¸¤ä¸ªsession</font>****<font style="color:#74B602;background-color:#FFFFFF;">ä¸èƒ½å¯¹è¡¨åŒæ—¶åšè¡¨å®šä¹‰å˜æ›´</font>****<font style="background-color:#FFFFFF;">ï¼Œéœ€è¦ä¸²è¡Œæ“ä½œã€‚</font>**
+ **<font style="background-color:#FFFFFF;">è¯»é”å’Œè¯»é”ä¹‹é—´ä¸ä¼šäº§ç”Ÿé˜»å¡ã€‚ä¹Ÿå°±æ˜¯</font>****<font style="color:#74B602;background-color:#FFFFFF;">å¢åˆ æ”¹æŸ¥ä¸ä¼šå› ä¸ºMDL é”äº§ç”Ÿé˜»å¡</font>****<font style="background-color:#FFFFFF;">ï¼Œå¯ä»¥å¹¶å‘æ‰§è¡Œï¼Œ</font>****<font style="color:#DF2A3F;background-color:#FFFFFF;">æ—¥å¸¸å·¥ä½œä¸­å¤§å®¶çœ‹åˆ°çš„dmlä¹‹é—´çš„é”ç­‰å¾…æ˜¯innodbè¡Œé”å¼•èµ·çš„ï¼Œå’ŒMDL é”æ— å…³</font>****<font style="background-color:#FFFFFF;">ã€‚</font>**

**<font style="background-color:#FFFFFF;">ç†Ÿæ‚‰innodbè¡Œé”çš„åŒå­¦è¿™é‡Œå¯èƒ½æœ‰ç‚¹å›°æƒ‘ï¼Œå› ä¸ºè¡Œé”åˆ†ç±»å’ŒMDLé”å¾ˆç±»ä¼¼ï¼Œä¹Ÿä¸»è¦åˆ†ä¸ºè¯»é”å’Œå†™é”ï¼Œæˆ–è€…å«å…±äº«é”å’Œæ’ä»–é”ï¼Œè¯»å†™é”ä¹‹é—´é˜»å¡å…³ç³»ä¹Ÿä¸€è‡´ã€‚äºŒè€…æœ€é‡è¦çš„åŒºåˆ«ä¸€ä¸ªæ˜¯è¡¨é”ï¼Œä¸€ä¸ªæ˜¯è¡Œé”ï¼Œä¸”è¡Œé”ä¸­çš„è¯»å†™æ“ä½œå¯¹åº”åœ¨ MDL é”ä¸­éƒ½å±äºè¯»é”ã€‚</font>**

# <font style="color:#ECAA04;background-color:#FFFFFF;">MySQL çš„ä¼˜åŒ–å™¨ç©¶ç«Ÿæ˜¯å¦‚ä½•é€‰æ‹©æœ€ä¼˜æ‰§è¡Œè®¡åˆ’çš„ï¼Ÿ</font>
<font style="background-color:#FFFFFF;">è¿™ä¸ªé—®é¢˜å…¶å®å¾ˆç®€å•ï¼Œä¼˜åŒ–å™¨é€‰æ‹©æœ€ä¼˜æ‰§è¡Œè®¡åˆ’çš„ä¾æ®å°±æ˜¯ä¸åŒç´¢å¼•ï¼Œä¸åŒæ¡ä»¶æ‰§è¡Œæ‰€æ¶ˆè€—çš„æˆæœ¬ï¼Œå“ªä¸ªæ‰§è¡Œè®¡åˆ’çš„æˆæœ¬æœ€ä½å°±é€‰æ‹©å“ªä¸ªï¼Œç›´æ¥ä¸Šä¾‹å­ã€‚</font>

```plsql
CREATE TABLE `test` (
  `id` int NOT NULL,
  `var` varchar(50) NOT NULL,
  `num` int NOT NULL,
  PRIMARY KEY (`id`),
  KEY `idx_var` (`var`) USING BTREE
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3

insert into test ( `id`,`var`,`num` ) values (1,'1',1);
insert into test ( `id`,`var`,`num` ) values (2,'2',2);
insert into test ( `id`,`var`,`num` ) values (3,'3',3);
insert into test ( `id`,`var`,`num` ) values (7,'7',7);
insert into test ( `id`,`var`,`num` ) values (9,'9',9);
insert into test ( `id`,`var`,`num` ) values (10,'10',10);
```

<font style="background-color:#FFFFFF;">test è¡¨æ·»åŠ äº†ä¸€ä¸ª var å­—æ®µäºŒçº§ç´¢å¼•ï¼Œè¿™ä¸ªæ—¶å€™æˆ‘ä»¬ä½¿ç”¨ var å­—æ®µå½“æ¡ä»¶æŸ¥è¯¢ï¼ŒæŸ¥è¯¢æ—¶æ˜¯ä¼šä½¿ç”¨ var å­—æ®µçš„ç´¢å¼•ï¼Œæˆ‘ä»¬èƒŒå…«è‚¡æ–‡çš„æ—¶å€™å°±æ˜¯è¿™ä¹ˆèƒŒçš„ï¼Œä½†æ˜¯ä»–çš„åº•å±‚å…¶å®å°±æ˜¯æ ¹æ®æˆæœ¬æ¥è¿›è¡Œè®¡ç®—çš„ã€‚</font>

```plsql
-- ä½¿ç”¨explain format =  tree æŸ¥çœ‹å½“å‰SQLçš„æŸ¥è¯¢æˆæœ¬
explain format =  tree select * from test where var = '1';
-- ç»“æœå¦‚ä¸‹ï¼Œæ¶ˆè€—0.35ï¼Œæ‰«æä¸€æ¡è®°å½•
-> Index lookup on test using idx_var (var='1') (cost=0.35 rows=1)
```

```plsql
-- ä½¿ç”¨explain format =  tree æŸ¥çœ‹å½“å‰SQLçš„æŸ¥è¯¢æˆæœ¬
explain format =  tree select * from test ignore index(idx_var) where var = '1';
-- ç»“æœå¦‚ä¸‹ï¼Œæ¶ˆè€—0.75ï¼Œæ‰«æäº”æ¡è®°å½•
-> Filter: (test.var = '1') (cost=0.75 rows=1)â†µ -> Table scan on test (cost=0.75 rows=5)
```

**<font style="background-color:#FFFFFF;">ä½¿ç”¨ç´¢å¼•æŸ¥è¯¢</font>**<font style="background-color:#FFFFFF;">ä¸</font>**<font style="background-color:#FFFFFF;">ä¸ä½¿ç”¨ç´¢å¼•æŸ¥è¯¢</font>**<font style="background-color:#FFFFFF;">ä¸¤ç§æ‰§è¡Œè®¡åˆ’çš„æˆæœ¬ç›¸å·®å¾ˆæ˜æ˜¾ï¼Œè¿™ä¸ªæ—¶å€™æ‰§è¡Œè®¡åˆ’</font>**<font style="background-color:#FFFFFF;">é€‰æ‹©ä½æˆæœ¬çš„æŸ¥è¯¢æ–¹å¼ï¼šä½¿ç”¨ç´¢å¼•æŸ¥è¯¢</font>**

<font style="background-color:#FFFFFF;">ä¸Šé¢ä¸¤ç§æŸ¥è¯¢æ–¹å¼å¾—å‡ºæ¥çš„æˆæœ¬ï¼Œå…¶å®æˆ‘ä»¬å¯ä»¥è¿›ä¸€æ­¥ç»†åŒ–ï¼Œå› ä¸ºæœ€ç»ˆçš„ cost = io_cost + engine_costã€‚</font>

<font style="background-color:#FFFFFF;">æˆ‘ä»¬æƒ³çœ‹åˆ°ä¸€æ¡ SQL çš„ io_cost ä¸ engine_cost å¯ä»¥å°†ä¸Šé¢æŸ¥çœ‹æˆæœ¬çš„ SQL æ”¹ä¸€ä¸‹ï¼ˆ</font>**<font style="background-color:#FFFFFF;">format = tree ->format = json</font>**<font style="background-color:#FFFFFF;">ï¼‰ï¼Œå¦‚ä¸‹ï¼š</font>

```plsql
explain format =  json select * from test where var = '1';

explain format =  json select * from test ignore index(idx_var) where var = '1';
```

```json
{
  "query_block": {
    "select_id": 1,
    "cost_info": {
      "query_cost": "0.35"
    },
    "table": {
      "table_name": "test",
      "access_type": "ref",
      "possible_keys": [
        "idx_var"
      ],
      "key": "idx_var",
      "used_key_parts": [
        "var"
      ],
      "key_length": "152",
      "ref": [
        "const"
      ],
      "rows_examined_per_scan": 1,
      "rows_produced_per_join": 1,
      "filtered": "100.00",
      "cost_info": {
        "read_cost": "0.25",
        "eval_cost": "0.10",
        "prefix_cost": "0.35",
        "data_read_per_join": "160"
      },
      "used_columns": [
        "id",
        "var",
        "num"
      ]
    }
  }
}

{
  "query_block": {
    "select_id": 1,
    "cost_info": {
      "query_cost": "0.75"
    },
    "table": {
      "table_name": "test",
      "access_type": "ALL",
      "rows_examined_per_scan": 5,
      "rows_produced_per_join": 1,
      "filtered": "20.00",
      "cost_info": {
        "read_cost": "0.65",
        "eval_cost": "0.10",
        "prefix_cost": "0.75",
        "data_read_per_join": "160"
      },
      "used_columns": [
        "id",
        "var",
        "num"
      ],
      "attached_condition": "(`sys`.`test`.`var` = '1')"
    }
  }
}
```

<font style="background-color:#FFFFFF;">ä¸»è¦æ˜¯å…¶ä¸­çš„ cost_info å±æ€§éƒ¨åˆ†ï¼š prefix_cost = read_cost + eval_cost</font>

<font style="background-color:#FFFFFF;">è¡¥å……ï¼š</font>

<font style="background-color:#FFFFFF;">ä¸Šé¢çš„ io_cost ä¸ engine_cost ä¹Ÿæœ‰å…¶å›ºå®šçš„å…¬å¼å¾—å‡ºå…·ä½“çš„å€¼ï¼Œé‡Œé¢è¿˜æ¶‰åŠåˆ° MySQL çš„ä¸€äº›åŸºç¡€é…ç½®ï¼ˆæˆæœ¬è®¡ç®—å› å­ï¼‰ï¼Œè¿™éƒ¨åˆ†ç•™åˆ°ä¸‹ä¸€æ¬¡åœ¨åšè®²è§£ã€‚</font>

# <font style="color:#ECAA04;background-color:#FFFFFF;">ä¸ºä»€ä¹ˆå¤§å‚çš„çº¿ä¸Šæ•°æ®åº“ç¦æ­¢ delete</font>
![1727441139702-3b6c86a1-a925-4dcc-8ed4-e85c87fbc3fa.png](./img/hATw4O-knQXenPBo/1727441139702-3b6c86a1-a925-4dcc-8ed4-e85c87fbc3fa-892807.png)

# <font style="background-color:#FFFFFF;">å½“å‰è¯»ä¸å¿«ç…§è¯»</font>
<font style="background-color:#FFFFFF;">æ¶‰åŠåˆ° MySQL çš„é¢è¯•æ—¶ï¼Œæ˜¯ä¸æ˜¯ç»å¸¸ä¼šè¢«é—®åˆ°å½“å‰è¯»å’Œå¿«ç…§è¯»çš„åŒºåˆ«ï¼Ÿ</font>

<font style="background-color:#FFFFFF;">æœ¬èŠ‚å†…å®¹å°±æ¥èŠèŠè¿™ä¸ªè¯é¢˜ï¼Œé¦–å…ˆä»å¿«ç…§è¯»å¼€å§‹ï¼š</font>

#### **<font style="background-color:#FFFFFF;">1 æ™®é€šè¯»</font>**
##### **<font style="background-color:#FFFFFF;">1.1 å®šä¹‰</font>**
<font style="background-color:#FFFFFF;">æ™®é€šè¯»ï¼ˆä¹Ÿç§°</font>**<font style="background-color:#FFFFFF;">å¿«ç…§è¯»</font>**<font style="background-color:#FFFFFF;">ï¼Œè‹±æ–‡åï¼šConsistent Readï¼‰ï¼Œå°±æ˜¯å•çº¯çš„ SELECT è¯­å¥ï¼Œä¸åŒ…æ‹¬ä¸‹é¢è¿™ä¸¤ç±»è¯­å¥ï¼š</font>

```plsql
SELECT ...  FOR UPDATE 
SELECT ... LOCK IN SHARE MODE
```

<font style="background-color:#FFFFFF;">æ™®é€šè¯»çš„æ‰§è¡Œæ–¹å¼æ˜¯ç”Ÿæˆ ReadViewï¼Œç›´æ¥åˆ©ç”¨ MVCC æœºåˆ¶æ¥è¿›è¡Œè¯»å–ï¼Œå¹¶ä¸ä¼šå¯¹è®°å½•è¿›è¡ŒåŠ é”ã€‚</font>

> **<font style="background-color:#FFFFFF;">å°è´´å£«</font>**<font style="background-color:#FFFFFF;"> å¯¹äº SERIALIZABLE éš”ç¦»çº§åˆ«æ¥è¯´ï¼Œå¦‚æœ autocommit ç³»ç»Ÿå˜é‡è¢«è®¾ç½®ä¸ºOFFï¼Œé‚£æ™®é€šè¯»çš„è¯­å¥ä¼šè½¬å˜ä¸ºé”å®šè¯»ï¼Œå’Œåœ¨æ™®é€šçš„ SELECT è¯­å¥åè¾¹åŠ  LOCK IN SHARE MODE è¾¾æˆçš„æ•ˆæœä¸€æ ·ã€‚</font>
>

##### **<font style="background-color:#FFFFFF;">1.2 å®ç°æ–¹å¼</font>**
<font style="background-color:#FFFFFF;">æ™®é€šè¯»æ˜¯é€šè¿‡ undo log + MVCC æ¥å®ç°çš„ï¼Œå…·ä½“æˆ‘ä»¬å†ä»”ç»†èŠèŠï¼š</font>

<font style="background-color:#FFFFFF;">ä¸‹å›¾å³ä¾§é»„è‰²éƒ¨åˆ†æ˜¯æ•°æ®ï¼šä¸€è¡Œæ•°æ®è®°å½•ï¼Œä¸»é”® ID æ˜¯ 10ï¼Œobject = 'Goland' ï¼Œè¢« update æ›´æ–°ä¸º object = '</font><font style="background-color:#FFFFFF;">Python</font><font style="background-color:#FFFFFF;">' ã€‚</font>

![1729078504913-88f1a004-3756-47e5-b427-ce6619ef9600.png](./img/hATw4O-knQXenPBo/1729078504913-88f1a004-3756-47e5-b427-ce6619ef9600-987454.png)

<font style="background-color:#FFFFFF;">äº‹åŠ¡ä¼šå…ˆä½¿ç”¨â€œæ’ä»–é”â€é”å®šè¯¥è¡Œï¼Œå°†è¯¥è¡Œå½“å‰çš„å€¼å¤åˆ¶åˆ° undo log ä¸­ï¼Œç„¶åå†çœŸæ­£åœ°ä¿®æ”¹å½“å‰è¡Œçš„å€¼ï¼Œæœ€åå¡«å†™äº‹åŠ¡çš„ DB_TRX_ID ï¼Œä½¿ç”¨å›æ»šæŒ‡é’ˆ DB_ROLL_PTR æŒ‡å‘ undo log ä¸­ä¿®æ”¹å‰çš„è¡Œã€‚</font>

<font style="background-color:#FFFFFF;">è¿™é‡Œè§£é‡Šä¸€ä¸‹ DB_TRX_ID å’Œ DB_ROLL_PTR æ‰€ä»£è¡¨çš„å«ä¹‰ï¼š</font>

+ **<font style="background-color:#FFFFFF;">DB_TRX_ID</font>**<font style="background-color:#FFFFFF;"> : 6 å­—èŠ‚ DB_TRX_ID å­—æ®µï¼Œè¡¨ç¤ºæœ€åæ›´æ–°çš„äº‹åŠ¡ id ( update , delete , insert ) ã€‚æ­¤å¤–ï¼Œåˆ é™¤åœ¨å†…éƒ¨è¢«è§†ä¸ºæ›´æ–°ï¼Œå…¶ä¸­è¡Œä¸­çš„ç‰¹æ®Šä½è¢«è®¾ç½®ä¸ºå°†å…¶æ ‡è®°ä¸ºå·²è½¯åˆ é™¤ã€‚</font>
+ **<font style="background-color:#FFFFFF;">DB_ROLL_PTR</font>**<font style="background-color:#FFFFFF;"> : 7 å­—èŠ‚å›æ»šæŒ‡é’ˆï¼ŒæŒ‡å‘å‰ä¸€ä¸ªç‰ˆæœ¬çš„ undo log è®°å½•ï¼Œç»„æˆ undo é“¾è¡¨ã€‚å¦‚æœæ›´æ–°äº†è¡Œï¼Œåˆ™æ’¤æ¶ˆæ—¥å¿—è®°å½•åŒ…å«åœ¨æ›´æ–°è¡Œä¹‹å‰é‡å»ºè¡Œå†…å®¹æ‰€éœ€çš„ä¿¡æ¯ã€‚</font>

> **<font style="background-color:#FFFFFF;">å°è´´å£«</font>**<font style="background-color:#FFFFFF;"> insert undo log åªåœ¨äº‹åŠ¡å›æ»šæ—¶éœ€è¦, äº‹åŠ¡æäº¤å°±å¯ä»¥åˆ æ‰äº†ã€‚update undo log åŒ…æ‹¬ update å’Œ delete , å›æ»šå’Œå¿«ç…§è¯»éƒ½éœ€è¦ã€‚</font>
>

#### **<font style="background-color:#FFFFFF;">2 å½“å‰è¯»</font>**
<font style="background-color:#FFFFFF;">èŠå®Œå¿«ç…§è¯»ï¼Œå†èŠèŠå½“å‰è¯»ï¼ˆä¹Ÿç§°é”å®šè¯»ï¼ŒLocking Readï¼‰ã€‚</font>

##### **<font style="background-color:#FFFFFF;">2.1 å®šä¹‰</font>**
<font style="background-color:#FFFFFF;">å½“å‰è¯»ï¼Œè¯»å–çš„æ˜¯æœ€æ–°ç‰ˆæœ¬ï¼Œå¹¶ä¸”éœ€è¦å…ˆè·å–å¯¹åº”è®°å½•çš„é”ï¼Œå¦‚ä»¥ä¸‹è¿™äº› SQL ç±»å‹ï¼š</font>

```plsql
select ... lock in share mode ã€

select ... for updateã€

update ã€delete ã€insert
```

<font style="background-color:#FFFFFF;">å½“ç„¶ï¼Œè·å–ä»€ä¹ˆç±»å‹çš„é”å–å†³äºå½“å‰äº‹åŠ¡çš„éš”ç¦»çº§åˆ«ã€è¯­å¥çš„æ‰§è¡Œè®¡åˆ’ã€æŸ¥è¯¢æ¡ä»¶ç­‰å› ç´ ã€‚ä¾‹å¦‚ï¼Œè¦ update ä¸€æ¡è®°å½•ï¼Œåœ¨äº‹åŠ¡æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œå¦‚æœä¸åŠ é”ï¼Œé‚£ä¹ˆå¦ä¸€ä¸ªäº‹åŠ¡å¯ä»¥ delete è¿™æ¡æ•°æ®å¹¶ä¸”èƒ½æˆåŠŸ commit ï¼Œå°±ä¼šäº§ç”Ÿå†²çªäº†ã€‚æ‰€ä»¥ update çš„æ—¶å€™è‚¯å®šè¦æ˜¯å½“å‰è¯»ï¼Œå¾—åˆ°æœ€æ–°çš„ä¿¡æ¯å¹¶ä¸”é”å®šç›¸åº”çš„è®°å½•ã€‚</font>

##### **<font style="background-color:#FFFFFF;">2.2 å®ç°æ–¹å¼</font>**
<font style="background-color:#FFFFFF;">å½“å‰è¯»æ˜¯é€šè¿‡ next-key é”(è¡Œè®°å½•é”+é—´éš™é”)æ¥æ˜¯å®ç°çš„ã€‚</font>

> **<font style="background-color:#FFFFFF;">è¿™é‡Œè¡¥å……ä¸‹è¡Œé”çš„ 3 ç§ç®—æ³•ï¼š</font>**<font style="background-color:#FFFFFF;"> è¡Œé”ï¼ˆRecord Lockï¼‰ï¼šé”ç›´æ¥åŠ åœ¨ç´¢å¼•è®°å½•ä¸Šé¢ã€‚ é—´éš™é”ï¼ˆGap Lockï¼‰ï¼šæ˜¯ Innodb ä¸ºäº†è§£å†³å¹»è¯»é—®é¢˜æ—¶å¼•å…¥çš„é”æœºåˆ¶ï¼Œæ‰€ä»¥åªæœ‰åœ¨ Read Repeatable ã€Serializable éš”ç¦»çº§åˆ«æ‰æœ‰ã€‚ Next-Key Lock ï¼šRecord Lock + Gap Lockï¼Œé”å®šä¸€ä¸ªèŒƒå›´å¹¶ä¸”é”å®šè®°å½•æœ¬èº« ã€‚</font>
>

<font style="background-color:#FFFFFF;">ä¸‹é¢é€šè¿‡ä¸€ä¸ªä¾‹å­æ¥è¯´æ˜å½“å‰è¯»çš„å®ç°æ–¹å¼ï¼Œä¾‹å¦‚ä¸‹é¢è¿™æ¡ SQLï¼š</font>

```plsql
delete from T where age = 7;
```

<font style="background-color:#FFFFFF;">è¿›è¡Œä¸‹é¢çš„å®éªŒï¼š</font>

![1729078504897-8b20eb16-5a65-4dae-8373-abd1fa89dd3e.png](./img/hATw4O-knQXenPBo/1729078504897-8b20eb16-5a65-4dae-8373-abd1fa89dd3e-048242.png)

<font style="background-color:#FFFFFF;">æµ‹è¯•å¯çŸ¥ delete from T where age = 7; è¯­å¥åœ¨ age ä¸Šçš„åŠ é”åŒºé—´ä¸º (4,10) ,å›¾è§£å¦‚ä¸‹ï¼š </font>

![1729078505209-a2cad768-9e18-43d1-807f-9b2dd71173d1.png](./img/hATw4O-knQXenPBo/1729078505209-a2cad768-9e18-43d1-807f-9b2dd71173d1-188069.png)<font style="background-color:#FFFFFF;"></font>

# <font style="color:#ECAA04;background-color:#FFFFFF;">ä»€ä¹ˆæ˜¯ Spring çš„ IOC</font>
**<font style="background-color:#FFFFFF;">Spring çš„ IOCï¼Œå…¨ç§° Inversion of Controlï¼Œç¿»è¯‘è¿‡æ¥å°±æ˜¯</font>****<font style="color:#DF2A3F;background-color:#FFFFFF;">æ§åˆ¶åè½¬çš„æ„æ€</font>****<font style="background-color:#FFFFFF;">ï¼Œå®ƒæ˜¯ </font>****<font style="color:#000000;background-color:#FFFFFF;">Spring æ¡†æ¶çš„æ ¸å¿ƒæ¦‚å¿µ</font>****<font style="background-color:#FFFFFF;">ä¹‹ä¸€ã€‚</font>**

**<font style="color:#DF2A3F;background-color:#FFFFFF;">ä»€ä¹ˆæ˜¯æ§åˆ¶åè½¬ï¼Ÿ</font>****<font style="background-color:#FFFFFF;">ç®€å•ç†è§£ï¼ŒæŸä¸ªäº‹ç‰©çš„æ§åˆ¶æƒå‘ç”Ÿäº†åè½¬ï¼Œ</font>****<font style="color:#DF2A3F;background-color:#FFFFFF;">ä»€ä¹ˆæ§åˆ¶æƒï¼Ÿ</font>****<font style="color:#74B602;background-color:#FFFFFF;">å¯¹è±¡æ§åˆ¶æƒ</font>****<font style="background-color:#FFFFFF;">ã€‚</font>**

**<font style="background-color:#FFFFFF;">æ²¡æœ‰ä½¿ç”¨ IOC æ—¶ï¼Œåº”ç”¨</font>****<font style="color:#74B602;background-color:#FFFFFF;">ç¨‹åº</font>****<font style="background-color:#FFFFFF;">é€šå¸¸</font>****<font style="color:#74B602;background-color:#FFFFFF;">è´Ÿè´£å¯¹è±¡çš„åˆ›å»ºå’Œç®¡ç†</font>****<font style="background-color:#FFFFFF;">ã€‚è¿™ä¼šå¯¼è‡´é«˜è€¦åˆåº¦ï¼Œéš¾ä»¥ç»´æŠ¤å’Œæµ‹è¯•ã€‚</font>**

**<font style="background-color:#FFFFFF;">ä½¿ç”¨ IOC åï¼ŒSpring çš„ IoC é€šè¿‡</font>****<font style="color:#74B602;background-color:#FFFFFF;">å®¹å™¨ç®¡ç†å¯¹è±¡çš„ç”Ÿå‘½å‘¨æœŸå’Œä¾èµ–</font>****<font style="background-color:#FFFFFF;">å…³ç³»ï¼Œé™ä½äº†ç»„ä»¶ä¹‹é—´çš„è€¦åˆåº¦ï¼Œæé«˜äº†çµæ´»æ€§å’Œå¯ç»´æŠ¤æ€§ã€‚</font>**

**<font style="background-color:#FFFFFF;">IOCå°†æ§åˆ¶æµåè½¬ï¼Œä½¿å¾—åº”ç”¨ç¨‹åºæ›´ä¸“æ³¨äºä¸šåŠ¡é€»è¾‘ï¼Œè€Œä¸æ˜¯å¯¹è±¡çš„åˆ›å»ºå’Œç®¡ç†ã€‚</font>**

```plsql
// æ²¡æœ‰ä½¿ç”¨IoCçš„æƒ…å†µ
public class MyService {}

public class MyApp {
    public static void main(String[] args) {
        MyService myService = new MyService();
        myService.dosomething();
    }
}

// ä½¿ç”¨IoCçš„æƒ…å†µ
@Component
public class MyService {}

public class MyApp {
    @Autowired
    private MyService myService;

    public void run() {
        myService.dosomething();
    }
}
```

**<font style="background-color:#FFFFFF;">ä½¿ç”¨ IOC çš„å¥½å¤„ï¼š</font>**

1. **<font style="color:#117CEE;background-color:#FFFFFF;">é™ä½è€¦åˆåº¦ï¼š</font>****<font style="background-color:#FFFFFF;"> </font>****<font style="color:#74B602;background-color:#FFFFFF;">é™ä½äº†</font>****<font style="background-color:#FFFFFF;">ç»„ä»¶ä¹‹é—´çš„è€¦åˆåº¦ï¼Œä½¿å¾—å¯¹è±¡ä¹‹é—´çš„</font>****<font style="color:#74B602;background-color:#FFFFFF;">å…³ç³»æ›´åŠ çµæ´»</font>****<font style="background-color:#FFFFFF;">ã€‚</font>**
    1. **<font style="background-color:#FFFFFF;">åœ¨ä¸Šè¿°ä¾‹å­ä¸­ï¼ŒMyApp ä¸ç›´æ¥åˆ›å»º MyServiceï¼Œè€Œæ˜¯é€šè¿‡</font>****<font style="color:#AE146E;background-color:#FFFFFF;">IoCå®¹å™¨æ³¨å…¥</font>****<font style="background-color:#FFFFFF;">ï¼Œ</font>****<font style="color:#AE146E;background-color:#FFFFFF;">å‡å°‘äº†ç»„ä»¶</font>****<font style="background-color:#FFFFFF;">ä¹‹é—´çš„ç›´æ¥ä¾èµ–ï¼Œ</font>****<font style="color:#AE146E;background-color:#FFFFFF;">æé«˜äº†ä»£ç </font>****<font style="background-color:#FFFFFF;">çš„çµæ´»æ€§å’Œå¯ç»´æŠ¤æ€§ã€‚</font>**
    2. **<font style="background-color:#FFFFFF;">å¦‚æœå°†æ¥éœ€è¦æ›´æ”¹æˆ–æ›¿æ¢ MyServiceï¼Œåªéœ€</font>****<font style="color:#AE146E;background-color:#FFFFFF;">æ›´æ–°IoCå®¹å™¨ä¸­çš„é…ç½®</font>****<font style="background-color:#FFFFFF;">ï¼Œè€Œæ— éœ€ä¿®æ”¹ MyApp çš„ä»£ç ã€‚</font>**
2. **<font style="color:#117CEE;background-color:#FFFFFF;">æé«˜å¯ç»´æŠ¤æ€§ï¼š</font>****<font style="background-color:#FFFFFF;"> é€šè¿‡å®¹å™¨ç®¡ç†å¯¹è±¡çš„ç”Ÿå‘½å‘¨æœŸï¼Œä½¿å¾—ä»£ç æ›´</font>****<font style="color:#74B602;background-color:#FFFFFF;">æ˜“äºç»´æŠ¤å’Œç†è§£</font>****<font style="background-color:#FFFFFF;">ã€‚</font>**
    1. **<font style="background-color:#FFFFFF;">IoCå°†å¯¹è±¡çš„åˆ›å»ºå’Œç®¡ç†äº¤ç»™å®¹å™¨ï¼Œ</font>****<font style="color:#AE146E;background-color:#FFFFFF;">å‡è½»äº†</font>****<font style="background-color:#FFFFFF;">å¼€å‘è€…çš„è´Ÿæ‹…ï¼ŒåŒæ—¶ä½¿ä»£ç æ›´æ¸…æ™°ï¼Œæ˜“äºç†è§£ã€‚</font>**
    2. **<font style="background-color:#FFFFFF;">é€šè¿‡é›†ä¸­ç®¡ç†å¯¹è±¡çš„ç”Ÿå‘½å‘¨æœŸï¼Œå¼€å‘è€…å¯ä»¥</font>****<font style="color:#AE146E;background-color:#FFFFFF;">æ›´è½»æ¾åœ°è¿›è¡Œä»£ç ç»´æŠ¤</font>****<font style="background-color:#FFFFFF;">ï¼Œä¾‹å¦‚åœ¨éœ€è¦ä¿®æ”¹å¯¹è±¡å®ä¾‹åŒ–æ–¹å¼æˆ–æ›´æ–°ä¾èµ–å…³ç³»æ—¶ï¼Œåªéœ€ä¿®æ”¹IoCå®¹å™¨çš„é…ç½®ï¼Œè€Œä¸æ˜¯åœ¨æ•´ä¸ªä»£ç ä¸­è¿›è¡Œä¿®æ”¹ã€‚</font>**
3. **<font style="color:#117CEE;background-color:#FFFFFF;">å¢å¼ºå¯æµ‹è¯•æ€§ï¼š</font>****<font style="background-color:#FFFFFF;"> </font>****<font style="color:#74B602;background-color:#FFFFFF;">æ”¯æŒä¾èµ–æ³¨å…¥</font>****<font style="background-color:#FFFFFF;">ï¼Œä½¿å¾—å•å…ƒæµ‹è¯•æ›´å®¹æ˜“å®ç°ï¼Œ</font>****<font style="color:#74B602;background-color:#FFFFFF;">æé«˜äº†</font>****<font style="background-color:#FFFFFF;">ä»£ç çš„å¯æµ‹è¯•æ€§ã€‚</font>**
    1. **<font style="background-color:#FFFFFF;">é€šè¿‡ä¾èµ–æ³¨å…¥ï¼Œå¯ä»¥</font>****<font style="color:#AE146E;background-color:#FFFFFF;">è½»æ¾åœ°æ›¿æ¢å¯¹è±¡çš„ä¾èµ–é¡¹</font>****<font style="background-color:#FFFFFF;">ï¼Œä½¿å•å…ƒæµ‹è¯•æ›´åŠ ç®€å•å’Œå¯é ã€‚</font>**
    2. **<font style="background-color:#FFFFFF;">è¿™æ ·ï¼Œå¼€å‘è€…å¯ä»¥æ›´æ–¹ä¾¿åœ°ç¼–å†™æµ‹è¯•ç”¨ä¾‹ï¼ŒéªŒè¯ä»£ç çš„å„ä¸ªéƒ¨åˆ†çš„åŠŸèƒ½ï¼Œæé«˜äº†ä»£ç çš„å¯æµ‹è¯•æ€§å’Œè´¨é‡ã€‚</font>**
4. **<font style="color:#117CEE;background-color:#FFFFFF;">æé«˜çµæ´»æ€§ï¼š</font>****<font style="background-color:#FFFFFF;">å®¹å™¨ç®¡ç†å¯¹è±¡çš„åˆ›å»ºå’Œä¾èµ–å…³ç³»ï¼Œä½¿å¾—åº”ç”¨ç¨‹åºæ›´å®¹æ˜“é€‚åº”å˜åŒ–ã€‚</font>**
    1. **<font style="background-color:#FFFFFF;">å½“åº”ç”¨ç¨‹åºéœ€è¦è°ƒæ•´å¯¹è±¡çš„åˆ›å»ºæ–¹å¼æˆ–ä¿®æ”¹ä¾èµ–å…³ç³»æ—¶ï¼Œé€šè¿‡</font>****<font style="color:#AE146E;background-color:#FFFFFF;">æ›´æ–°IoCå®¹å™¨çš„é…ç½®</font>****<font style="background-color:#FFFFFF;">ï¼Œè€Œä¸æ˜¯ç›´æ¥ä¿®æ”¹ä»£ç ï¼Œå¯ä»¥æ›´å¿«é€Ÿåœ°é€‚åº”å˜åŒ–ï¼Œæé«˜äº†åº”ç”¨ç¨‹åºçš„çµæ´»æ€§ã€‚</font>**

# <font style="color:#ECAA04;background-color:#FFFFFF;">ä»€ä¹ˆæ˜¯ Spring çš„ AOP</font>
**<font style="background-color:#FFFFFF;">Spring çš„ AOPï¼Œå…¨ç§° Aspect-Oriented Programmingï¼Œ</font>****<font style="color:#DF2A3F;background-color:#FFFFFF;">é¢å‘åˆ‡é¢ç¼–ç¨‹çš„æ„æ€</font>****<font style="background-color:#FFFFFF;">ï¼Œæ˜¯ </font>****<font style="color:#000000;background-color:#FFFFFF;">Spring æ¡†æ¶çš„å¦ä¸€ä¸ªæ ¸å¿ƒæ¦‚å¿µ</font>****<font style="background-color:#FFFFFF;">ã€‚</font>**

**<font style="background-color:#FFFFFF;">ç®€å•æ¥è¯´ï¼Œå°†ä¸€äº›</font>****<font style="color:#74B602;background-color:#FFFFFF;">è·Ÿä¸šåŠ¡æ²¡æœ‰å…³è”æ€§çš„é€»è¾‘å‰¥ç¦»å‡ºæ¥è¿›è¡Œç»Ÿä¸€å¤„ç†</font>****<font style="background-color:#FFFFFF;">ã€‚</font>**

**<font style="background-color:#FFFFFF;">ç¡®åˆ‡åœ°è¯´ï¼ŒSpring AOPé€šè¿‡åˆ‡é¢ï¼ˆAspectsï¼‰å°†</font>****<font style="color:#74B602;background-color:#FFFFFF;">æ¨ªåˆ‡å…³æ³¨ç‚¹ä»ä¸šåŠ¡é€»è¾‘ä¸­åˆ†ç¦»</font>****<font style="background-color:#FFFFFF;">ï¼Œ</font>****<font style="color:#000000;background-color:#FFFFFF;">æé«˜äº†</font>****<font style="background-color:#FFFFFF;">ä»£ç çš„æ¨¡å—æ€§ã€‚</font>**

**<font style="background-color:#FFFFFF;">è¿™å…è®¸å¯¹ä¸€äº›</font>****<font style="color:#74B602;background-color:#FFFFFF;">æ¨ªè·¨å¤šä¸ªä¸šåŠ¡å¯¹è±¡</font>****<font style="background-color:#FFFFFF;">çš„éä¸šåŠ¡é€»è¾‘ï¼ˆå¦‚æ—¥å¿—ã€äº‹åŠ¡ã€å®‰å…¨æ€§ç­‰ï¼‰è¿›è¡Œ</font>****<font style="color:#74B602;background-color:#FFFFFF;">ç»Ÿä¸€å¤„ç†</font>****<font style="background-color:#FFFFFF;">ï¼Œä½¿ä»£ç æ›´æ¸…æ™°æ˜“æ‡‚ï¼ŒåŒæ—¶é¿å…äº†é‡å¤æ€§ä»£ç ã€‚ </font>**

**<font style="background-color:#FFFFFF;">AOPé€šè¿‡åˆ’åˆ†å…³æ³¨ç‚¹å’Œæ¨ªåˆ‡å…³æ³¨ç‚¹çš„æ–¹å¼</font>****<font style="color:#74B602;background-color:#FFFFFF;">æé«˜äº†ä»£ç çš„å¯ç»´æŠ¤æ€§å’Œå¯é‡ç”¨æ€§</font>****<font style="background-color:#FFFFFF;">ã€‚</font>**

```plsql
æ²¡æœ‰ä½¿ç”¨AOPçš„ä»£ç ï¼š
public class UserService {
    public void addUser() {
        // ä¸šåŠ¡é€»è¾‘
        Logger.log("User added"); // é‡å¤çš„æ—¥å¿—ä»£ç 
    }

    public void updateUser() {
        // ä¸šåŠ¡é€»è¾‘
        Logger.log("User update"); // é‡å¤çš„æ—¥å¿—ä»£ç 
    }
}

ä½¿ç”¨AOPçš„ä»£ç ï¼š
@Aspect
public class LoggingAspect {
    @Before("execution(* com.example.UserService.*(..))")
    public void logBefore() {
        Logger.log("User added");
    }

    @AfterReturning("execution(* com.example.UserService.*(..))")
    public void logAfterReturning() {
        Logger.log("After user operation");
    }
}

public class UserService {
    public void addUser() {
        // ä¸šåŠ¡é€»è¾‘
    }
}
```

**<font style="background-color:#FFFFFF;">Spring AOPæ¶‰åŠä»¥ä¸‹æ ¸å¿ƒæ¦‚å¿µï¼š</font>**

1. **<font style="color:#DF2A3F;background-color:#FFFFFF;">åˆ‡é¢ï¼ˆAspectï¼‰ï¼š</font>****<font style="background-color:#FFFFFF;"> æ¨ªåˆ‡å…³æ³¨ç‚¹çš„æ¨¡å—åŒ–å•å…ƒï¼Œå®ƒå®šä¹‰äº†</font>****<font style="color:#117CEE;background-color:#FFFFFF;">åœ¨ä½•å¤„ä»¥åŠå¦‚ä½•åº”ç”¨æ¨ªåˆ‡å…³æ³¨ç‚¹</font>****<font style="background-color:#FFFFFF;">ã€‚</font>**
2. **<font style="color:#DF2A3F;background-color:#FFFFFF;">è¿æ¥ç‚¹ï¼ˆJoin Pointï¼‰ï¼š</font>****<font style="background-color:#FFFFFF;"> åœ¨åº”ç”¨ç¨‹åº</font>****<font style="color:#117CEE;background-color:#FFFFFF;">æ‰§è¡Œè¿‡ç¨‹ä¸­</font>****<font style="background-color:#FFFFFF;">ï¼Œåˆ‡é¢å¯ä»¥</font>****<font style="color:#117CEE;background-color:#FFFFFF;">æ’å…¥çš„ç‚¹</font>****<font style="background-color:#FFFFFF;">ï¼Œå¦‚æ–¹æ³•æ‰§è¡Œçš„æ—¶å€™ã€‚</font>**
3. **<font style="color:#DF2A3F;background-color:#FFFFFF;">é€šçŸ¥ï¼ˆAdviceï¼‰ï¼š</font>****<font style="background-color:#FFFFFF;"> åˆ‡é¢åœ¨è¿æ¥ç‚¹ä¸Š</font>****<font style="color:#117CEE;background-color:#FFFFFF;">æ‰§è¡Œçš„å…·ä½“æ“ä½œ</font>****<font style="background-color:#FFFFFF;">ï¼ŒåŒ…æ‹¬"å‰ç½®é€šçŸ¥"ã€"åç½®é€šçŸ¥"ã€"ç¯ç»•é€šçŸ¥"ç­‰ã€‚</font>**
4. **<font style="color:#DF2A3F;background-color:#FFFFFF;">åˆ‡å…¥ç‚¹ï¼ˆPointcutï¼‰ï¼š</font>****<font style="background-color:#FFFFFF;"> å®šä¹‰</font>****<font style="color:#117CEE;background-color:#FFFFFF;">ä¸€ç»„è¿æ¥ç‚¹</font>****<font style="background-color:#FFFFFF;">çš„è¡¨è¾¾å¼ï¼ŒæŒ‡å®šåˆ‡é¢åœ¨ä½•å¤„æ‰§è¡Œã€‚</font>**
5. **<font style="color:#DF2A3F;background-color:#FFFFFF;">å¼•å…¥ï¼ˆIntroductionï¼‰ï¼š</font>****<font style="background-color:#FFFFFF;"> å…è®¸åˆ‡é¢ä¸ºç°æœ‰çš„ç±»</font>****<font style="color:#117CEE;background-color:#FFFFFF;">æ·»åŠ æ–°æ–¹æ³•æˆ–å±æ€§</font>****<font style="background-color:#FFFFFF;">ã€‚</font>**
6. **<font style="color:#DF2A3F;background-color:#FFFFFF;">ç›®æ ‡å¯¹è±¡ï¼ˆTarget Objectï¼‰ï¼š</font>****<font style="background-color:#FFFFFF;"> åˆ‡é¢æ‰€å½±å“çš„</font>****<font style="color:#117CEE;background-color:#FFFFFF;">åŸå§‹å¯¹è±¡</font>****<font style="background-color:#FFFFFF;">ã€‚</font>**
7. **<font style="color:#DF2A3F;background-color:#FFFFFF;">ä»£ç†ï¼ˆProxyï¼‰ï¼š</font>****<font style="background-color:#FFFFFF;"> ç”±AOPæ¡†æ¶ç”Ÿæˆçš„å¯¹è±¡ï¼Œç”¨äºå°†æ¨ªåˆ‡é€»è¾‘åº”ç”¨åˆ°ç›®æ ‡å¯¹è±¡ä¸Šã€‚</font>**

# <font style="color:#ECAA04;background-color:#FFFFFF;">Spring äº‹åŠ¡ä¼ æ’­æœºåˆ¶</font>
**<font style="background-color:#FFFFFF;">Springäº‹åŠ¡ä¼ æ’­æœºåˆ¶å®šä¹‰äº†</font>****<font style="color:#74B602;background-color:#FFFFFF;">äº‹åŠ¡æ–¹æ³•å¦‚ä½•ä¸å·²ç»å­˜åœ¨çš„äº‹åŠ¡è¿›è¡Œäº¤äº’</font>****<font style="background-color:#FFFFFF;">ï¼Œ</font>****<font style="background-color:#FFFFFF;">ç®€å•çš„ç†è§£å°±æ˜¯</font>****<font style="color:#74B602;background-color:#FFFFFF;">å¤šä¸ªäº‹åŠ¡</font>****<font style="background-color:#FFFFFF;">æ–¹æ³•ç›¸äº’è°ƒç”¨æ—¶ï¼Œäº‹åŠ¡</font>****<font style="color:#74B602;background-color:#FFFFFF;">å¦‚ä½•</font>****<font style="background-color:#FFFFFF;">åœ¨è¿™äº›æ–¹æ³•é—´</font>****<font style="color:#74B602;background-color:#FFFFFF;">ä¼ æ’­</font>****<font style="background-color:#FFFFFF;">ã€‚</font>**

**<font style="background-color:#FFFFFF;">åœ¨ç¹ççš„ä¸šåŠ¡åœºæ™¯ä¸­ï¼Œå¤šä¸ªäº‹åŠ¡æ–¹æ³•é—´çš„è°ƒç”¨å¯èƒ½å¼•èµ·äº‹åŠ¡ä¸ä¸€è‡´ï¼Œå¦‚æ•°æ®ä¸¢å¤±ã€é‡å¤æäº¤ç­‰ã€‚</font>**

**<font style="background-color:#FFFFFF;">åœ¨ Spring ä¸­</font>****<font style="background-color:#FFFFFF;">ä¸»è¦æœ‰ä¸ƒç§äº‹åŠ¡ä¼ æ’­çº§åˆ«ï¼š</font>**

1. **<font style="color:#DF2A3F;background-color:#FFFFFF;">REQUIREDï¼ˆé»˜è®¤ï¼‰ï¼š</font>****<font style="background-color:#FFFFFF;"> å¦‚æœå½“å‰</font>****<font style="color:#74B602;background-color:#FFFFFF;">å­˜åœ¨äº‹åŠ¡</font>****<font style="background-color:#FFFFFF;">ï¼Œåˆ™</font>****<font style="color:#74B602;background-color:#FFFFFF;">åŠ å…¥</font>****<font style="background-color:#FFFFFF;">è¯¥äº‹åŠ¡ï¼›å¦‚æœå½“å‰</font>****<font style="color:#74B602;background-color:#FFFFFF;">æ²¡æœ‰äº‹åŠ¡</font>****<font style="background-color:#FFFFFF;">ï¼Œåˆ™</font>****<font style="color:#74B602;background-color:#FFFFFF;">æ–°å»ºä¸€ä¸ª</font>****<font style="background-color:#FFFFFF;">äº‹åŠ¡ã€‚è¿™æ˜¯æœ€å¸¸è§çš„ä¼ æ’­è¡Œä¸ºã€‚</font>**
2. **<font style="color:#DF2A3F;background-color:#FFFFFF;">SUPPORTSï¼š </font>****<font style="background-color:#FFFFFF;">å¦‚æœå½“å‰</font>****<font style="color:#74B602;background-color:#FFFFFF;">å­˜åœ¨äº‹åŠ¡</font>****<font style="background-color:#FFFFFF;">ï¼Œåˆ™</font>****<font style="color:#74B602;background-color:#FFFFFF;">åŠ å…¥</font>****<font style="background-color:#FFFFFF;">è¯¥äº‹åŠ¡ï¼›å¦‚æœå½“å‰</font>****<font style="color:#74B602;background-color:#FFFFFF;">æ²¡æœ‰äº‹åŠ¡</font>****<font style="background-color:#FFFFFF;">ï¼Œåˆ™</font>****<font style="color:#74B602;background-color:#FFFFFF;">ä»¥éäº‹åŠ¡çŠ¶æ€æ‰§è¡Œ</font>****<font style="background-color:#FFFFFF;">ã€‚é€‚ç”¨äºä¸å¸Œæœ›äº‹åŠ¡å¹²æ‰°çš„åªè¯»æ“ä½œã€‚</font>**
3. **<font style="color:#DF2A3F;background-color:#FFFFFF;">NOT_SUPPORTEDï¼š</font>****<font style="background-color:#FFFFFF;"> æ€»æ˜¯</font>****<font style="color:#74B602;background-color:#FFFFFF;">ä»¥éäº‹åŠ¡çŠ¶æ€æ‰§è¡Œæ“ä½œ</font>****<font style="background-color:#FFFFFF;">ã€‚å¦‚æœå½“å‰å­˜åœ¨äº‹åŠ¡ï¼Œåˆ™æŒ‚èµ·å½“å‰äº‹åŠ¡ã€‚</font>**
4. **<font style="color:#DF2A3F;background-color:#FFFFFF;">REQUIRES_NEWï¼š</font>****<font style="background-color:#FFFFFF;"> æ€»æ˜¯å¼€å¯ä¸€ä¸ªæ–°çš„äº‹åŠ¡ã€‚å¦‚æœå½“å‰</font>****<font style="color:#74B602;background-color:#FFFFFF;">å­˜åœ¨äº‹åŠ¡</font>****<font style="background-color:#FFFFFF;">ï¼Œåˆ™</font>****<font style="color:#74B602;background-color:#FFFFFF;">æŒ‚èµ·</font>****<font style="background-color:#FFFFFF;">å½“å‰äº‹åŠ¡ï¼Œå¹¶</font>****<font style="color:#74B602;background-color:#FFFFFF;">åˆ›å»ºä¸€ä¸ªæ–°çš„äº‹åŠ¡</font>****<font style="background-color:#FFFFFF;">ã€‚é€‚ç”¨äºéœ€è¦ç‹¬ç«‹äº‹åŠ¡æ‰§è¡Œçš„æ“ä½œã€‚</font>**
5. **<font style="color:#DF2A3F;background-color:#FFFFFF;">NESTEDï¼š</font>****<font style="background-color:#FFFFFF;"> å¦‚æœå½“å‰</font>****<font style="color:#74B602;background-color:#FFFFFF;">å­˜åœ¨äº‹åŠ¡</font>****<font style="background-color:#FFFFFF;">ï¼Œåˆ™åœ¨</font>****<font style="color:#74B602;background-color:#FFFFFF;">åµŒå¥—äº‹åŠ¡ä¸­æ‰§è¡Œ</font>****<font style="background-color:#FFFFFF;">ï¼›å¦‚æœå½“å‰æ²¡æœ‰äº‹åŠ¡ï¼Œåˆ™è¡Œä¸ºç±»ä¼¼äº REQUIREDã€‚ä½†æ˜¯ï¼ŒåµŒå¥—äº‹åŠ¡å¯ä»¥ç‹¬ç«‹äºå¤–éƒ¨äº‹åŠ¡è¿›è¡Œæäº¤æˆ–å›æ»šã€‚</font>**
6. **<font style="color:#DF2A3F;background-color:#FFFFFF;">MANDATORYï¼š</font>****<font style="background-color:#FFFFFF;"> å¿…é¡»åœ¨äº‹åŠ¡ä¸­æ‰§è¡Œï¼Œå¦‚æœå½“å‰</font>****<font style="color:#74B602;background-color:#FFFFFF;">æ²¡æœ‰äº‹åŠ¡</font>****<font style="background-color:#FFFFFF;">ï¼Œåˆ™æŠ›å‡º</font>****<font style="color:#74B602;background-color:#FFFFFF;">å¼‚å¸¸</font>****<font style="background-color:#FFFFFF;">ã€‚é€‚ç”¨äºéœ€è¦å¼ºåˆ¶åœ¨äº‹åŠ¡ä¸­æ‰§è¡Œçš„æ“ä½œã€‚</font>**
7. **<font style="color:#DF2A3F;background-color:#FFFFFF;">NEVERï¼š</font>****<font style="background-color:#FFFFFF;"> æ€»æ˜¯ä»¥éäº‹åŠ¡çŠ¶æ€æ‰§è¡Œæ“ä½œã€‚å¦‚æœå½“å‰</font>****<font style="color:#74B602;background-color:#FFFFFF;">å­˜åœ¨äº‹åŠ¡</font>****<font style="background-color:#FFFFFF;">ï¼Œåˆ™æŠ›å‡º</font>****<font style="color:#74B602;background-color:#FFFFFF;">å¼‚å¸¸</font>****<font style="background-color:#FFFFFF;">ã€‚</font>**

```java
package com.Baili.aspect;

import org.aspectj.lang.JoinPoint;
import org.aspectj.lang.annotation.Aspect;
import org.aspectj.lang.annotation.Before;
import org.springframework.stereotype.Component;

@Aspect
@Component
public class BailiAspect {

	@Before("execution(public void com.Baili.service.UserService.test())")
	public void BailiBefore(JoinPoint joinPoint) {
		System.out.println("BailiBefore");
	}
    
}
```

```java
package com.Baili.service;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.jdbc.core.JdbcTemplate;
import org.springframework.stereotype.Component;
import org.springframework.transaction.annotation.Propagation;
import org.springframework.transaction.annotation.Transactional;

@Component
public class UserService  {

	@Autowired
	UserService userService;
	@Autowired
	JdbcTemplate jdbcTemplate;

	@Transactional
	public void test(){
		jdbcTemplate.execute("INSERT INTO `test`.`employees` (`name`, `age`, `position`, `hire_time`, `remark`) VALUES ('å¾åº¶', 20, 'shanghai', '2023-06-11 20:51:35', 'æµ‹è¯•3');\n");
		userService.test2();  //ä»£ç†å¯¹è±¡è°ƒç”¨ï¼Œäº‹åŠ¡ä¸å¤±æ•ˆï¼Œç”±äºæ˜¯NEVERçº§åˆ«ï¼Œå­˜åœ¨äº‹åŠ¡å‡ºç°å¼‚å¸¸æ’å…¥å¤±è´¥
        test2(); //ç›´æ¥è°ƒç”¨ï¼Œäº‹åŠ¡å¤±æ•ˆï¼Œç”±äºæ˜¯NEVERçº§åˆ«ï¼Œåè€Œå¯ä»¥æˆåŠŸæ’å…¥
	}

	@Transactional(propagation = Propagation.NEVER)
	public void test2(){
		jdbcTemplate.execute("INSERT INTO `test`.`employees` (`name`, `age`, `position`, `hire_time`, `remark`) VALUES ('è¯¸è‘›', 20, 'shanghai', '2023-06-11 20:51:35', 'æµ‹è¯•3');\n");
	}
}
```

# <font style="color:#ECAA04;background-color:#FFFFFF;">Autowired å’Œ Resource çš„åŒºåˆ«</font>
**<font style="background-color:#FFFFFF;">@Autowiredå’Œ@Resource</font>****<font style="color:#DF2A3F;background-color:#FFFFFF;">éƒ½æ˜¯ç”¨äºä¾èµ–æ³¨å…¥çš„æ³¨è§£</font>****<font style="background-color:#FFFFFF;">ï¼Œç”¨äºå°†å…¶ä»–ç»„ä»¶æˆ–èµ„æºè‡ªåŠ¨æ³¨å…¥åˆ°ç›®æ ‡å¯¹è±¡ä¸­ã€‚æ¯”å¦‚è¯´ï¼š</font>**

```java
@Autowired
private Bean A;

@Resource
private Bean B;
```

**<font style="background-color:#FFFFFF;">ä½†æ˜¯å®ƒä»¬åœ¨ä½¿ç”¨æ–¹å¼å’ŒåŠŸèƒ½ä¸Šæœ‰ä¸€äº›åŒºåˆ«ï¼š</font>**

1. **<font style="background-color:#FFFFFF;">@Autowiredï¼šåœ¨è·å– Bean æ—¶ï¼Œ</font>****<font style="color:#74B602;background-color:#FFFFFF;">å…ˆé€šè¿‡ç±»å‹è¿›è¡ŒåŒ¹é…</font>****<font style="background-color:#FFFFFF;">ï¼Œ</font>****<font style="color:#74B602;background-color:#FFFFFF;">åœ¨æ ¹æ®åç§°è¿›è¡ŒåŒ¹é…</font>****<font style="background-color:#FFFFFF;">ã€‚ç¤ºä¾‹å¦‚ä¸‹ï¼š</font>**

```java
@Component
class ABean implements Bean {}
@Component
class BBean implements Bean {}

@Service
class Test {

    //è‡ªåŠ¨è£…é…å¤±è´¥ï¼ŒæŒ‰ç…§ç±»å‹æ‰¾åˆ°ä¸¤ä¸ª Beanï¼šABean ä¸ BBeanï¼Œåœ¨æ ¹æ®åç§° bean æœªæ‰¾åˆ°ç›®æ ‡Beanï¼Œ è£…é…å¤±è´¥ã€‚
    @Autowired
    private Bean bean;

    //è‡ªåŠ¨è£…é…æˆåŠŸï¼ŒæŒ‰ç…§ç±»å‹æ‰¾åˆ°ä¸¤ä¸ª Beanï¼šABean ä¸ BBeanï¼Œåœ¨æ ¹æ®åç§° ABean æ‰¾åˆ°ç›®æ ‡Beanï¼Œè£…é…æˆåŠŸã€‚
    @Autowired
    @Qualifier("ABean")
    private Bean bean;

    //è‡ªåŠ¨è£…é…æˆåŠŸï¼ŒæŒ‰ç…§ç±»å‹æ‰¾åˆ°ä¸¤ä¸ª Beanï¼šABean ä¸ BBeanï¼Œåœ¨æ ¹æ®åç§° BBean æ‰¾åˆ°ç›®æ ‡Beanï¼Œè£…é…æˆåŠŸã€‚
    @Autowired
    private Bean BBean;  
}
```

+ **<font style="background-color:#FFFFFF;">æ˜¯</font>****<font style="background-color:#FFFFFF;">Springæ¡†æ¶</font>****<font style="background-color:#FFFFFF;">çš„æ³¨è§£ï¼Œ</font>****<font style="background-color:#FFFFFF;">åŸºäºç±»å‹</font>****<font style="background-color:#FFFFFF;">è¿›è¡Œä¾èµ–æ³¨å…¥ã€‚</font>**
+ **<font style="background-color:#FFFFFF;">æ”¯æŒé€šè¿‡@Qualifieræ³¨è§£æŒ‡å®šå…·ä½“çš„Beanåç§°è¿›è¡Œæ³¨å…¥ã€‚</font>**
+ **<font style="background-color:#FFFFFF;">å¯ä»¥ç”¨äºæ„é€ å™¨ã€å­—æ®µã€æ–¹æ³•æˆ–è€…å‚æ•°ä¸Šã€‚</font>**
2. **<font style="background-color:#FFFFFF;">@Resourceï¼šåœ¨è·å– Bean æ—¶ï¼Œ</font>****<font style="color:#117CEE;background-color:#FFFFFF;">å…ˆé€šè¿‡åç§°è¿›è¡ŒåŒ¹é…ï¼Œåœ¨æ ¹æ®ç±»å‹è¿›è¡ŒåŒ¹é…</font>****<font style="background-color:#FFFFFF;">ã€‚ç¤ºä¾‹å¦‚ä¸‹ï¼š</font>**

```java
@Component
class ABean implements Bean {}
@Component
class BBean implements Bean {}

@Service
class Test {

    //è‡ªåŠ¨è£…é…å¤±è´¥ï¼ŒæŒ‰ç…§åç§°æœªæ‰¾åˆ°ç›®æ ‡Beanï¼Œåœ¨æ ¹æ®ç±»å‹æ‰¾åˆ°ä¸¤ä¸ª Beanï¼šABean ä¸ BBean ï¼Œè£…é…å¤±è´¥ã€‚
    @Resource
    private Bean bean;

    //è‡ªåŠ¨è£…é…æˆåŠŸï¼ŒæŒ‰ç…§åç§°æ‰¾åˆ°ç›®æ ‡Beanï¼Œè£…é…æˆåŠŸã€‚
    @Resource(name = "ABean")
    private Bean bean;  
    
    //è‡ªåŠ¨è£…é…æˆåŠŸï¼ŒæŒ‰ç…§åç§°æ‰¾åˆ°ç›®æ ‡Beanï¼Œè£…é…æˆåŠŸã€‚
    @Resource
    private Bean BBean;
}
```

+ **<font style="background-color:#FFFFFF;">æ˜¯Java EEè§„èŒƒä¸­å®šä¹‰çš„æ³¨è§£ï¼Œåœ¨Java 6åŠä»¥ä¸Šç‰ˆæœ¬ä¸­å¯ç”¨ã€‚</font>**
+ **<font style="background-color:#FFFFFF;">é»˜è®¤æŒ‰ç…§å±æ€§åç§°</font>****<font style="background-color:#FFFFFF;">è¿›è¡ŒæŸ¥æ‰¾ï¼Œä¹Ÿå¯ä»¥é€šè¿‡nameå±æ€§æŒ‡å®šå…·ä½“çš„Beanåç§°è¿›è¡Œæ³¨å…¥ã€‚</font>**
+ **<font style="background-color:#FFFFFF;">åªèƒ½ç”¨äºå­—æ®µã€setteræ–¹æ³•æˆ–è€…å‚æ•°ä¸Šã€‚</font>**



> æ›´æ–°: 2025-08-15 22:32:09  
> åŸæ–‡: <https://www.yuque.com/tulingzhouyu/db22bv/ecg9nv4gqlb5uwck>