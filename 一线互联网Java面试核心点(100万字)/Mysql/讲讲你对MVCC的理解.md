# 讲讲你对MVCC的理解

<font style="color:rgb(36, 41, 47);">MVCC是一种并发控制策略，它在多个事务同时执行时，确保数据库的一致性和隔离性。MVCC通过为每个事务创建数据的不同版本，避免了锁竞争问题。</font>

<font style="color:rgb(36, 41, 47);">它的工作原理如下：</font>

+ <font style="color:rgb(36, 41, 47);">每条数据行都有一个隐藏的版本号或时间戳，记录该行的创建或最后修改时间。</font>
+ <font style="color:rgb(36, 41, 47);">当事务开始，它会获取一个唯一的事务ID，作为其开始时间戳。</font>
+ <font style="color:rgb(36, 41, 47);">在读取数据时，事务只能访问在其开始时间戳之前已提交的数据。这个版本的数据在事务开始前就已存在。</font>
+ <font style="color:rgb(36, 41, 47);">当事务更新数据，会创建新版本的数据，将更新后的数据写入新的数据行，并将事务ID与新版本关联。</font>
+ <font style="color:rgb(36, 41, 47);">其他事务可以继续访问旧版本的数据，不受正在进行的更新事务影响。这种机制被称为快照读。</font>
+ <font style="color:rgb(36, 41, 47);">当事务提交，其所有修改才对其他事务可见。此时，新版本的数据成为其他事务读取的数据。	</font>

<font style="color:rgb(36, 41, 47);">以上就是MVCC的工作原理。它是</font>通过使用多个版本的数据来实现并发控制，提高了数据库的并发性能，并确保了事务之间的隔离性和数据一致性。



> 更新: 2023-08-29 21:30:17  
> 原文: <https://www.yuque.com/tulingzhouyu/db22bv/zc68pbf1pmu0g4zc>